function aa(a){throw a;}var h=void 0,i=!0,l=null,n=!1;function p(){return function(){}}function ca(a){return function(b){this[a]=b}}function ea(a){return function(){return this[a]}}function s(a){return function(){return a}}var t,w=this;function fa(a){for(var a=a.split("."),b=w,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}
function ga(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function x(a){return a!==h}function ia(a){return"array"==ga(a)}function ja(a){var b=ga(a);return"array"==b||"object"==b&&"number"==typeof a.length}function oa(a){return"string"==typeof a}function pa(a){return"function"==ga(a)}function qa(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ua(a){return a[va]||(a[va]=++wa)}var va="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),wa=0;
function xa(a,b,c){return a.call.apply(a.bind,arguments)}function ya(a,b,c){a||aa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function za(a,b,c){za=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xa:ya;return za.apply(l,arguments)}var Aa=Date.now||function(){return+new Date};
function z(a,b){var c=a.split("."),d=w;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ba(a,b){function c(){}c.prototype=b.prototype;a.Me=b.prototype;a.prototype=new c;a.prototype.constructor=a};var A=0,D=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha=7,Ia=8,Ja=9,Ka=10,La=11,Ma=12,Na=13,Oa=14,Pa=15,Qa=16,Ra=17,Sa=18,Ta=19,Ua=20,Va=21,Wa=22,Xa=23,Ya=24,Za=65533,$a=65534,ab=25,bb=26,cb=65535;z("OG_OBJECT_CONTEXT",A);z("OG_OBJECT_SCENE",D);z("OG_OBJECT_WORLD",Ca);z("OG_OBJECT_IMAGELAYER",Da);z("OG_OBJECT_ELEVATIONLAYER",Ea);z("OG_OBJECT_WAYPOINTLAYER",Fa);z("OG_OBJECT_GEOMETRYLAYER",Ha);z("OG_OBJECT_POILAYER",Ga);z("OG_OBJECT_VOXELLAYER",Ia);z("OG_OBJECT_VECTORLAYER",Ja);z("OG_OBJECT_IMAGE",Ka);
z("OG_OBJECT_TEXTURE",La);z("OG_OBJECT_PIXELBUFFER",Ma);z("OG_OBJECT_GEOMETRY",Na);z("OG_OBJECT_MESH",Oa);z("OG_OBJECT_SURFACE",Pa);z("OG_OBJECT_VECTOR",Qa);z("OG_OBJECT_CAMERA",Ra);z("OG_OBJECT_TEXT",Sa);z("OG_OBJECT_BINARYDATA",Ta);z("OG_OBJECT_LIGHT",Ua);z("OG_OBJECT_NAVIGATIONCONTROLLER",Va);z("OG_OBJECT_POI",Wa);z("OG_OBJECT_BILLBOARD",Xa);z("OG_OBJECT_BILLBOARDLAYER",Ya);z("OG_OBJECT_AOEIMAGELAYER",Za);z("OG_OBJECT_AOEIMAGE",$a);z("OG_OBJECT_POINTSPRITE",ab);z("OG_OBJECT_EARTHPOLYLINE",bb);
z("OG_OBJECT_INVALID",cb);z("OG_RENDEREFFECT_RGB",0);z("OG_RENDEREFFECT_CHROMADEPTH",1);var db=1,eb=2,fb=3,gb=4;z("OG_SCENE_3D_ELLIPSOID_WGS84",db);z("OG_SCENE_3D_FLAT_CARTESIAN",eb);z("OG_SCENE_2D_SCREEN",fb);z("OG_SCENE_CUSTOM",gb);var hb=1,ib=2;z("OG_OBJECT_READY",hb);z("OG_OBJECT_BUSY",ib);z("OG_OBJECT_FAILED",3);var jb=[];function E(a){if(-1==a)return l;for(var b=0;b<jb.length;b++)if(jb[b].id==a)return jb[b];return l}function F(){this.parent=l;this.name="ogObject";this.type=cb;this.id=-1;this.status=hb;this.I=this.J=l}F.prototype.Oa=p();function G(a){for(var a=a.id,b=0;b<jb.length;b++)if(jb[b].id==a){jb[b].Oa();jb.splice(b,1);break}}F.prototype.ya=p();function kb(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function lb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function mb(a){if(!nb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(ob,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(pb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(qb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(rb,"&quot;"));return a}var ob=/&/g,pb=/</g,qb=/>/g,rb=/\"/g,nb=/[&<>\"]/;
function sb(a){return lb(a.replace(/  /g," &#160;"),h)};var tb,ub,vb,wb,xb;function yb(){return w.navigator?w.navigator.userAgent:l}wb=vb=ub=tb=n;var zb;if(zb=yb()){var Ab=w.navigator;tb=0==zb.indexOf("Opera");ub=!tb&&-1!=zb.indexOf("MSIE");vb=!tb&&-1!=zb.indexOf("WebKit");wb=!tb&&!vb&&"Gecko"==Ab.product}var Bb=tb,Cb=ub,Db=wb,Eb=vb,Fb,Gb=w.navigator;Fb=Gb&&Gb.platform||"";xb=-1!=Fb.indexOf("Mac");var Hb=-1!=Fb.indexOf("Win"),Ib;
a:{var Jb="",Kb;if(Bb&&w.opera)var Lb=w.opera.version,Jb="function"==typeof Lb?Lb():Lb;else if(Db?Kb=/rv\:([^\);]+)(\)|;)/:Cb?Kb=/MSIE\s+([^\);]+)(\)|;)/:Eb&&(Kb=/WebKit\/(\S+)/),Kb)var Mb=Kb.exec(yb()),Jb=Mb?Mb[1]:"";if(Cb){var Nb,Ob=w.document;Nb=Ob?Ob.documentMode:h;if(Nb>parseFloat(Jb)){Ib=""+Nb;break a}}Ib=Jb}var Pb={};
function Qb(a){var b;if(!(b=Pb[a])){b=0;for(var c=(""+Ib).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var o=k.exec(g)||["","",""],r=m.exec(j)||["","",""];if(0==o[0].length&&0==r[0].length)break;b=((0==o[1].length?0:parseInt(o[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==o[1].length?0:parseInt(o[1],
10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==o[2].length)<(0==r[2].length)?-1:(0==o[2].length)>(0==r[2].length)?1:0)||(o[2]<r[2]?-1:o[2]>r[2]?1:0)}while(0==b)}b=Pb[a]=0<=b}return b}var Rb={};function Sb(){return Rb[9]||(Rb[9]=Cb&&!!document.documentMode&&9<=document.documentMode)};function Tb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Ub(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Vb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Wb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Vb.length;f++)c=Vb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Xb(a){this.stack=Error().stack||"";a&&(this.message=""+a)}Ba(Xb,Error);Xb.prototype.name="CustomError";function Yb(a,b){b.unshift(a);Xb.call(this,kb.apply(l,b));b.shift()}Ba(Yb,Xb);Yb.prototype.name="AssertionError";function Zb(a,b){aa(new Yb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var $b=Array.prototype,ac=$b.indexOf?function(a,b,c){return $b.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(oa(a))return!oa(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},bc=$b.forEach?function(a,b,c){$b.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=oa(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function cc(a){return $b.concat.apply($b,arguments)}
function dc(a){if(ia(a))return cc(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function ec(a,b,c){return 2>=arguments.length?$b.slice.call(a,b):$b.slice.call(a,b,c)};var fc="StopIteration"in w?w.StopIteration:Error("StopIteration");function gc(){}gc.prototype.next=function(){aa(fc)};gc.prototype.aj=function(){return this};function hc(a){if(a instanceof gc)return a;if("function"==typeof a.aj)return a.aj(n);if(ja(a)){var b=0,c=new gc;c.next=function(){for(;;){b>=a.length&&aa(fc);if(b in a)return a[b++];b++}};return c}aa(Error("Not implemented"))}
function ic(a,b){if(ja(a))try{bc(a,b,h)}catch(c){c!==fc&&aa(c)}else{a=hc(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==fc&&aa(d)}}};function jc(a,b){this.jc={};this.ab=[];var c=arguments.length;if(1<c){c%2&&aa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof jc)c=a.Wh(),d=a.Kj();else{var c=Ub(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}t=jc.prototype;t.ua=0;t.yi=0;t.se=ea("ua");t.Kj=function(){kc(this);for(var a=[],b=0;b<this.ab.length;b++)a.push(this.jc[this.ab[b]]);return a};t.Wh=function(){kc(this);return this.ab.concat()};
t.h=function(a,b){if(this===a)return i;if(this.ua!=a.se())return n;var c=b||lc;kc(this);for(var d,e=0;d=this.ab[e];e++)if(!c(this.get(d),a.get(d)))return n;return i};function lc(a,b){return a===b}t.clear=function(){this.jc={};this.yi=this.ua=this.ab.length=0};
function kc(a){if(a.ua!=a.ab.length){for(var b=0,c=0;b<a.ab.length;){var d=a.ab[b];Object.prototype.hasOwnProperty.call(a.jc,d)&&(a.ab[c++]=d);b++}a.ab.length=c}if(a.ua!=a.ab.length){for(var e={},c=b=0;b<a.ab.length;)d=a.ab[b],Object.prototype.hasOwnProperty.call(e,d)||(a.ab[c++]=d,e[d]=1),b++;a.ab.length=c}}t.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.jc,a)?this.jc[a]:b};
t.set=function(a,b){Object.prototype.hasOwnProperty.call(this.jc,a)||(this.ua++,this.ab.push(a),this.yi++);this.jc[a]=b};t.aj=function(a){kc(this);var b=0,c=this.ab,d=this.jc,e=this.yi,f=this,g=new gc;g.next=function(){for(;;){e!=f.yi&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(fc);var g=c[b++];return a?g:d[g]}};return g};function mc(a){return nc(a||arguments.callee.caller,[])}
function nc(a,b){var c=[];if(0<=ac(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(oc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=oc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(nc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function oc(a){if(pc[a])return pc[a];a=""+a;if(!pc[a]){var b=/function ([^\(]+)/.exec(a);pc[a]=b?b[1]:"[Anonymous]"}return pc[a]}var pc={};function qc(a,b,c,d,e){this.reset(a,b,c,d,e)}qc.prototype.zj=l;qc.prototype.yj=l;var rc=0;qc.prototype.reset=function(a,b,c,d,e){"number"==typeof e||rc++;this.Im=d||Aa();this.Bc=a;this.$l=b;this.Ul=c;delete this.zj;delete this.yj};qc.prototype.Pg=ca("Bc");function sc(a){this.Rn=a}sc.prototype.fi=l;sc.prototype.Bc=l;sc.prototype.uj=l;sc.prototype.vg=l;function tc(a,b){this.name=a;this.value=b}tc.prototype.toString=ea("name");var uc=new tc("SHOUT",1200),vc=new tc("SEVERE",1E3),wc=new tc("WARNING",900),xc=new tc("INFO",800),yc=new tc("CONFIG",700),zc=[new tc("OFF",Infinity),uc,vc,wc,xc,yc,new tc("FINE",500),new tc("FINER",400),new tc("FINEST",300),new tc("ALL",0)],Ac=l;
function Bc(a){if(!Ac){Ac={};for(var b=0,c;c=zc[b];b++)Ac[c.value]=c,Ac[c.name]=c}return Ac[a]||l}t=sc.prototype;t.getParent=ea("fi");t.Pg=ca("Bc");function Cc(a){if(a.Bc)return a.Bc;if(a.fi)return Cc(a.fi);Zb("Root logger has no level set.");return l}
t.log=function(a,b,c){if(a.value>=Cc(this).value){a=this.Nn(a,b,c);b="log:"+a.$l;w.console&&(w.console.timeStamp?w.console.timeStamp(b):w.console.markTimeline&&w.console.markTimeline(b));w.msWriteProfilerMark&&w.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.vg)for(var e=0,f=h;f=c.vg[e];e++)f(d);b=b.getParent()}}};
t.Nn=function(a,b,c){var d=new qc(a,""+b,this.Rn);if(c){d.zj=c;var e;var f=arguments.callee.caller;try{var g;var j=fa("window.location.href");if(oa(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,o=n;try{k=c.lineNumber||c.xo||"Not available"}catch(r){k="Not available",o=i}try{m=c.fileName||c.filename||c.sourceURL||j}catch(q){m="Not available",o=i}g=o||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,fileName:m,
stack:c.stack||"Not available"}:c}e="Message: "+mb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+mb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+mb(mc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.yj=e}return d};function I(a,b){a.log(wc,b,h)}t.info=function(a,b){this.log(xc,a,b)};var Dc={},Ec=l;function Fc(){Ec||(Ec=new sc(""),Dc[""]=Ec,Ec.Pg(yc))}
function J(a){Fc();var b;if(!(b=Dc[a])){b=new sc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=J(a.substr(0,c));c.uj||(c.uj={});c.uj[d]=b;b.fi=c;Dc[a]=b}return b};function Gc(){this.name="ogTexture";this.type=La;this.g=l;this.Hm="";this.status=ib}Gc.prototype=new F;
Gc.prototype.ya=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=D)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.g=this.parent.parent.c.vi.Ik(a.url,function(){b.status=hb;b.J&&b.J(b.id)},function(){b.status=3;b.I&&b.I(b.id)},n);this.Hm=a.url}};
Gc.prototype.Oa=function(){this.g&&(this.parent.parent.c.vi.Kk(this.Hm),this.g=l,this.status=3)};Gc.prototype.B=function(a,b,c){this.status==hb&&this.g&&(c!=l?this.g.B(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.g.B(a,b))};var Hc=6378137,Ic=0.006694379990197,Jc=0.006739496742;function K(a){return 0.017453292519943295*a}function Kc(a){return 57.29577951308232*a}function Lc(a){for(var b=1;a>b;)b*=2;return b};function Mc(){this.name="ogCamera";this.type=Ra;this.pc=this.pitch=this.La=this.Sc=this.Uc=this.Vc=0}Mc.prototype=new F;t=Mc.prototype;t.Oa=function(){this.pc=this.pitch=this.La=this.Sc=this.Uc=this.Vc=0};t.ta=function(a,b,c){this.Vc=a;this.Uc=b;this.Sc=c;this.parent.ke==this&&Nc(this).ta(a,b,c)};t.de=function(){var a={};a.longitude=this.Vc;a.latitude=this.Uc;a.elevation=this.Sc;return a};t.We=function(a,b,c){this.La=a;this.pitch=b;this.pc=c;this==this.parent.ke&&Nc(this).We(K(a),K(b),K(c))};
t.Sf=function(){var a={};a.yaw=this.La;a.pitch=this.pitch;a.roll=this.pc;return a};t.rh=function(a,b,c,d){this==this.parent.ke&&Nc(this).rh(a,b,c,d)};function Nc(a){var b=l,a=a.parent.parent.c;a.f&&a.f.Hb&&(b=a.f.Hb);return b}function Oc(a){var b=Nc(a),c=b.de(),b=b.Sf();a.Vc=c.longitude;a.Uc=c.latitude;a.Sc=c.elevation;a.La=Kc(b.La);a.pitch=Kc(b.pitch);a.pc=Kc(b.pc)};function L(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.Mb=new Float32Array([a,b,c])}t=L.prototype;t.t=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};t.Ca=function(){this.Mb[0]=this.a[0];this.Mb[1]=this.a[1];this.Mb[2]=this.a[2];return this.Mb};t.Rf=ea("a");t.Mf=function(){var a=new L;a.t(this.a[0],this.a[1],this.a[2]);return a};t.Zm=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};t.$i=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
t.rn=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};t.bn=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Pc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}t.cn=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
t.Li=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};t.qn=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};t.vc=function(){var a=this.Li();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};t.nn=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};t.Xe=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};z("Cross",Pc);z("vec3",L);L.prototype.Add=L.prototype.Zm;L.prototype.Cross=L.prototype.bn;
L.prototype.Dot=L.prototype.cn;L.prototype.Get=L.prototype.Rf;L.prototype.Length=L.prototype.Li;L.prototype.Neg=L.prototype.nn;L.prototype.Normalize=L.prototype.vc;L.prototype.Set=L.prototype.t;L.prototype.SquaredLength=L.prototype.qn;L.prototype.Subtract=L.prototype.rn;L.prototype.Sub=L.prototype.$i;L.prototype.ToString=L.prototype.Xe;function M(){this.a=Array(16);this.fh();this.Mb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}t=M.prototype;t.Dd=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};t.Ca=function(){for(var a=0;16>a;a++)this.Mb[a]=this.a[a];return this.Mb};t.Rf=ea("a");t.Mf=function(){for(var a=new M,b=0;16>b;b++)a.a[b]=this.a[b];return a};t.ba=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
t.fh=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.sn=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.ed=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Tk=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};t.Cd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return i};
t.Xi=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};t.Xk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.Yk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.mn=function(a,b,c,d,e,f,g,j,k){var m,o,r,q,d=a-d,e=b-e,f=c-f;q=1/Math.sqrt(d*d+e*e+f*f);d*=q;e*=q;f*=q;m=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(q=Math.sqrt(m*m+k*k+g*g))?(q=1/q,m*=q,k*=q,g*=q):g=k=m=0;j=e*g-f*k;o=f*m-d*g;r=d*k-e*m;(q=Math.sqrt(j*j+o*o+r*r))?(q=1/q,j*=q,o*=q,r*=q):r=o=j=0;this.a[0]=m;this.a[4]=k;this.a[8]=g;this.a[12]=-(m*a+k*b+g*c);this.a[1]=j;this.a[5]=o;this.a[9]=r;this.a[13]=-(j*a+o*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
t.da=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],m=a.a[7],o=a.a[8],r=a.a[9],q=a.a[10],u=a.a[11],v=a.a[12],y=a.a[13],B=a.a[14],ka=a.a[15],da=b.a[0],S=b.a[1],la=b.a[2],ma=b.a[3],P=b.a[4],H=b.a[5],U=b.a[6],V=b.a[7],W=b.a[8],ra=b.a[9],sa=b.a[10],ta=b.a[11],C=b.a[12],Z=b.a[13],na=b.a[14],$=b.a[15];this.a[0]=da*c+S*g+la*o+ma*v;this.a[1]=da*d+S*j+la*r+ma*y;this.a[2]=da*e+S*k+la*q+ma*B;this.a[3]=da*f+S*m+la*u+ma*ka;this.a[4]=P*c+H*g+U*o+V*v;this.a[5]=P*d+H*j+U*r+V*y;this.a[6]=
P*e+H*k+U*q+V*B;this.a[7]=P*f+H*m+U*u+V*ka;this.a[8]=W*c+ra*g+sa*o+ta*v;this.a[9]=W*d+ra*j+sa*r+ta*y;this.a[10]=W*e+ra*k+sa*q+ta*B;this.a[11]=W*f+ra*m+sa*u+ta*ka;this.a[12]=C*c+Z*g+na*o+$*v;this.a[13]=C*d+Z*j+na*r+$*y;this.a[14]=C*e+Z*k+na*q+$*B;this.a[15]=C*f+Z*m+na*u+$*ka};t.Ye=function(){for(var a=this.Mf(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
t.Ma=function(a){var b=new L;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
t.fn=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(2*f*e)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Uk=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Rk=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};t.Sk=function(a,b,c,d){this.Rk(a,b,c,d,-1,1)};
t.be=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.an=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Dk=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Di=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.dn=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];1.0E-6>Math.abs(b)&&1.0E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
t.ah=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Ek=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.en=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.bh=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,m=b*c,a=d*a,b=d*b,c=d*c;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.on=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],m=a+e+k;0<m?(m=2*Math.sqrt(m+1),a=0.25*m,e=(j-f)/m,k=(c-g)/m,b=(d-b)/m):a>e&a>k?(m=2*Math.sqrt(1+a-e-k),a=(j-f)/m,e=0.25*m,k=(b+d)/m,b=(c+g)/m):e>k?(m=2*Math.sqrt(1+e-a-k),a=(c-g)/m,e=(b+d)/m,k=0.25*m,b=(f+j)/m):(m=2*Math.sqrt(1+k-a-e),a=(d-b)/m,e=(c+g)/m,k=(f+j)/m,b=0.25*m);return[e,k,b,a]};
t.Qe=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],m=a.a[8],o=a.a[9],r=a.a[10],q=a.a[11],u=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],B=1/(b*g*r*a+b*j*q*v+b*k*o*y+c*f*q*y+c*j*m*a+c*k*r*u+d*f*o*a+d*g*q*u+d*k*m*v+e*f*r*v+e*g*m*y+e*j*o*u-b*g*q*y-b*j*o*a-b*k*r*v-c*f*r*a-c*j*q*u-c*k*m*y-d*f*q*v-d*g*m*a-d*k*o*u-e*f*o*y-e*g*r*u-e*j*m*v);this.a[0]=(g*r*a+j*q*v+k*o*y-g*q*y-j*o*a-k*r*v)*B;this.a[4]=(f*q*y+j*m*a+k*r*u-f*r*a-j*q*u-k*m*y)*B;this.a[8]=(f*o*a+g*q*u+k*m*v-f*q*
v-g*m*a-k*o*u)*B;this.a[12]=(f*r*v+g*m*y+j*o*u-f*o*y-g*r*u-j*m*v)*B;this.a[1]=(c*q*y+d*o*a+e*r*v-c*r*a-d*q*v-e*o*y)*B;this.a[5]=(b*r*a+d*q*u+e*m*y-b*q*y-d*m*a-e*r*u)*B;this.a[9]=(b*q*v+c*m*a+e*o*u-b*o*a-c*q*u-e*m*v)*B;this.a[13]=(b*o*y+c*r*u+d*m*v-b*r*v-c*m*y-d*o*u)*B;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*B;this.a[6]=(b*k*y+d*f*a+e*j*u-b*j*a-d*k*u-e*f*y)*B;this.a[10]=(b*g*a+c*k*u+e*f*v-b*k*v-c*f*a-e*g*u)*B;this.a[14]=(b*j*v+c*f*y+d*g*u-b*g*y-c*j*u-d*f*v)*B;this.a[3]=(c*k*r+d*g*q+e*j*o-c*
j*q-d*k*o-e*g*r)*B;this.a[7]=(b*j*q+d*k*m+e*f*r-b*k*r-d*f*q-e*j*m)*B;this.a[11]=(b*k*o+c*f*q+e*g*m-b*g*q-c*k*m-e*f*o)*B;this.a[15]=(b*g*r+c*j*m+d*f*o-b*j*o-c*f*r-d*g*m)*B};t.Xe=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};z("mat4",M);M.prototype.CalcBodyFrame=M.prototype.Di;
M.prototype.CalcNavigationFrame=M.prototype.be;M.prototype.Cami3d=M.prototype.ah;M.prototype.CopyFrom=M.prototype.ba;M.prototype.Copy=M.prototype.Mf;M.prototype.Frustum=M.prototype.fn;M.prototype.Get=M.prototype.Rf;M.prototype.Identity=M.prototype.fh;M.prototype.Inverse=M.prototype.Qe;M.prototype.LookAt=M.prototype.mn;M.prototype.Multiply=M.prototype.da;M.prototype.MultiplyVec3=M.prototype.Ma;M.prototype.Ortho2D=M.prototype.Sk;M.prototype.Ortho=M.prototype.Rk;M.prototype.OverwriteTranslation=M.prototype.Tk;
M.prototype.Perspective=M.prototype.Uk;M.prototype.RotationX=M.prototype.Xi;M.prototype.RotationY=M.prototype.Xk;M.prototype.RotationZ=M.prototype.Yk;M.prototype.Scale=M.prototype.Cd;M.prototype.SetFromArray=M.prototype.Dd;M.prototype.ToString=M.prototype.Xe;M.prototype.Translation=M.prototype.ed;M.prototype.Transpose=M.prototype.Ye;M.prototype.Zero=M.prototype.sn;M.prototype.CalcNavigationFrame2=M.prototype.an;M.prototype.CalcNavigationFrameZUp=M.prototype.Dk;M.prototype.ExtractEulerAngles=M.prototype.dn;
M.prototype.CamViewFrustum=M.prototype.Ek;M.prototype.FromQuaternion=M.prototype.en;M.prototype.FromQuaternionComponents=M.prototype.bh;M.prototype.Rot2Quat=M.prototype.on;function Qc(){this.hh=[];this.gh=[];this.Re=[];this.qb={};this.qb.x=0;this.qb.y=0;this.qb.n=0;this.Pb={};this.Pb.longitude=0;this.Pb.latitude=0;this.Pb.elevation=0;this.ff=n;this.zc=[0,0];this.Xc=-1;this.mm=0;this.cb=Rc;this.Ea=0}var Rc=0,Sc=1,Tc=2,Uc=3,Vc=4,Wc=5;Qc.prototype.ta=function(a,b,c){this.qb.x=a;this.qb.y=b;this.qb.n=c};Qc.prototype.de=ea("qb");function Xc(){this.result={};this.result.w=0;this.result.$b=0;this.result.Kc=0;this.rb={};this.rb.x=0;this.rb.y=0;this.rb.n=0;this.sb={};this.sb.x=0;this.sb.y=0;this.sb.n=0;this.Ua={};this.Ua.x=0;this.Ua.y=0;this.Ua.n=0;this.Bb={};this.Bb.x=0;this.Bb.y=0;this.Bb.n=0;this.Cb={};this.Cb.x=0;this.Cb.y=0;this.Zh=this.Md=this.Cb.n=0;this.Mk=2.220446049250313E-16}
Xc.prototype.Ji=function(a,b,c,d,e,f,g,j,k,m,o,r,q,u,v){this.rb.x=m-g;this.rb.y=o-j;this.rb.n=r-k;this.sb.x=q-g;this.sb.y=u-j;this.sb.n=v-k;this.Bb.x=e*this.sb.n-f*this.sb.y;this.Bb.y=f*this.sb.x-d*this.sb.n;this.Bb.n=d*this.sb.y-e*this.sb.x;this.Md=this.rb.x*this.Bb.x+this.rb.y*this.Bb.y+this.rb.n*this.Bb.n;this.Ua.x=a-g;this.Ua.y=b-j;this.Ua.n=c-k;this.Zh=1/this.Md;this.Cb.x=this.Ua.y*this.rb.n-this.Ua.n*this.rb.y;this.Cb.y=this.Ua.n*this.rb.x-this.Ua.x*this.rb.n;this.Cb.n=this.Ua.x*this.rb.y-this.Ua.y*
this.rb.x;if(this.Md>this.Mk){this.result.$b=this.Ua.x*this.Bb.x+this.Ua.y*this.Bb.y+this.Ua.n*this.Bb.n;if(0>this.result.$b||this.result.$b>this.Md)return l;this.result.Kc=d*this.Cb.x+e*this.Cb.y+f*this.Cb.n;if(0>this.result.Kc||this.result.$b+this.result.Kc>this.Md)return l}else if(this.Md<-this.Mk){this.result.$b=this.Ua.x*this.Bb.x+this.Ua.y*this.Bb.y+this.Ua.n*this.Bb.n;if(0<this.result.$b||this.result.$b<this.Md)return l;this.result.Kc=d*this.Cb.x+e*this.Cb.y+f*this.Cb.n;if(0<this.result.Kc||
this.result.$b+this.result.Kc<this.Md)return l}else return l;this.result.w=this.sb.x*this.Cb.x+this.sb.y*this.Cb.y+this.sb.n*this.Cb.n;this.result.$b*=this.Zh;this.result.Kc*=this.Zh;this.result.w*=this.Zh;return this.result};z("TriangleIntersector",Xc);Xc.prototype.IntersectTriangle=Xc.prototype.Ji;function Yc(){this.Tg=this.Ug=this.Rg=this.Sg=0;this.Th=1;this.result={Wd:0,Vd:0}}
Yc.prototype.Tf=function(a,b,c,d,e,f,g,j,k,m,o,r){this.Th=1;0<=d?(this.result.Wd=(g-a)/d,this.result.Vd=(m-a)/d):(this.result.Wd=(m-a)/d,this.result.Vd=(g-a)/d);0<=e?(this.Sg=(j-b)/e,this.Rg=(o-b)/e):(this.Sg=(o-b)/e,this.Rg=(j-b)/e);if(this.result.Wd>this.Rg||this.Sg>this.result.Vd)this.Th=-1;this.Sg>this.result.Wd&&(this.result.Wd=this.Sg);this.Rg<this.result.Vd&&(this.result.Vd=this.Rg);0<=f?(this.Ug=(k-c)/f,this.Tg=(r-c)/f):(this.Ug=(r-c)/f,this.Tg=(k-c)/f);if(this.result.Wd>this.Tg||this.Ug>
this.result.Vd)this.Th=-1;this.Ug>this.result.Wd&&(this.result.Wd=this.Ug);this.Tg<this.result.Vd&&(this.result.Vd=this.Tg);return 0<this.Th?this.result:l};z("AABB",Yc);Yc.prototype.HitBox=Yc.prototype.Tf;function Zc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.Mb=new Float32Array([a,b,c,d])}Zc.prototype.t=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Zc.prototype.Ca=function(){this.Mb[0]=this.a[0];this.Mb[1]=this.a[1];this.Mb[2]=this.a[2];this.Mb[3]=this.a[3];return this.Mb};Zc.prototype.Rf=ea("a");Zc.prototype.Xe=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};z("vec4",Zc);Zc.prototype.Get=Zc.prototype.Rf;Zc.prototype.Set=Zc.prototype.t;function $c(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}aa(Error("Invalid JSON string: "+a))};function N(a){this.c=a;this.b=a.b;this.r=this.g=this.ub=this.V=l;this.mode="";this.Ib=0;this.rd=this.L=l;this.qa=n;this.xl=this.sd=this.N=l;this.El=new Zc;this.El.t(1,1,1,1);this.Fl=new Zc;this.Fl.t(1,1,1,1);this.ic=new Zc;this.ic.t(1,1,1,1);this.zd=new Zc;this.zd.t(1,0,0,1);this.Nl=new Xc;this.pa=this.ia=this.Q=l;this.Fh=new Yc;this.la=l;this.Fg=this.M=0;this.l={};this.hd=Array(3);this.gd=Array(3);this.vd=new M;this.bi=n;this.gb=-1}t=N.prototype;t.he=function(a,b,c,d){this.ic.t(a,b,c,d)};
function ad(a,b){0==b.length%3&&(a.r=new Float32Array(b),a.mode="p",a.M=3)}function bd(a,b){0==b.length%8&&(a.r=new Float32Array(b),a.mode="pnt",a.M=8)}function cd(a,b){0==b.length%7&&(a.r=new Float32Array(b),a.mode="pc",a.M=7)}function dd(a,b){0==b.length%5&&(a.r=new Float32Array(b),a.mode="pt",a.M=5)}function ed(a,b){0==b.length%12&&(a.r=new Float32Array(b),a.mode="pnct",a.M=12)}function fd(a,b){0==b.length%5&&(a.r=new Float32Array(b),a.mode="poi",a.M=5)}
function gd(a,b,c){a.L=new Uint16Array(b);a.rd=c;a.Ib=b.length;a.qa=i;switch(c){case "TRIANGLES":a.Fg=b.length/3;break;case "TRIANGLESTRIP":a.Fg=b.length-2}}t.dc=ca("g");t.Gd=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.r,this.b.STATIC_DRAW);this.ub=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.L,this.b.STATIC_DRAW)};
t.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.ub&&(this.b.deleteBuffer(this.ub),this.ub=l);this.bi?this.g.k():this.g=l;this.r=l;this.mode="";this.Ib=0;this.rd=this.L=l};
t.ha=function(a,b,c,d,e){if(this.qa){b=b||0;c=c||0;this.V==l&&this.Gd();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.la&&(this.c.ac(),this.vd.da(this.la,this.c.vb),this.c.cc(this.vd));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,12,0);hd(this.c.Ta,this.c.ka,this.zd);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,n,32,24);var d=this.c.Ta,e=this.c.Qj,f=this.c.Ag,g=this.c.Cc;d.Ab&&(d.b.useProgram(d.Ab),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ab,"matModelView"),n,f.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ab,"matProjection"),n,g.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ab,"matNormal"),n,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.Ab,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);id(this.c.Ta,this.c.ka,this.ic);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.Ta;e=this.c.ka;f=this.ic;d.Ub&&(d.b.useProgram(d.Ub),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,
"matMVP"),n,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.Ub,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Ub,"uColor"),f.Ca()));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,n,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,n,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,n,48,40);
d=this.c.Ta;e=this.c.ka;d.Tb&&(d.b.useProgram(d.Tb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,"matMVP"),n,e.Ca()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d==l&&(d=this.El);e=this.c.Ta;f=this.c.ka;e.kc&&(e.b.useProgram(e.kc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.kc,"matMVP"),n,f.Ca()),e.b.uniform4fv(e.b.getUniformLocation(e.kc,"uColor"),
d.Ca()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);e==l&&(e=this.Fl);d=this.c.Ta;f=this.c.ka;d.mc&&(d.b.useProgram(d.mc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.mc,"matMVP"),n,f.Ca()),d.b.uniform4fv(d.b.getUniformLocation(d.mc,"uColor"),e.Ca()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,n,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,n,20,12);d=this.c.Ta;e=this.c.ka;f=this.c.vb;d.Vb&&(d.b.useProgram(d.Vb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Vb,"matM"),n,f.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Vb,"matMVP"),n,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.Vb,"uTexture"),0));break;default:alert("unknown surface mode!!")}this.g&&(d=this.g,d.Db&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.g)));switch(this.rd){case "TRIANGLES":a?
this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?
this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.Ib,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.la&&this.c.Pc();this.g&&(a=this.g,a.Db&&a.b.bindTexture(a.b.TEXTURE_2D,l));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
t.Mc=function(a,b,c,d){d||(d=this);c&&(this.yc=c);b&&(this.ld=b);a.BoundingBox&&(d.Q=a.BoundingBox[0],d.ia=a.BoundingBox[1]);a.Offset&&(d.pa=a.Offset);a.CurtainIndex&&(d.to=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.di=a.Vertices.length/3;ad(d,a.Vertices);d.mode="p";break;case "pnt":d.di=a.Vertices.length/8;bd(d,a.Vertices);d.mode="pnt";break;case "pc":d.di=a.Vertices.length/7;d.mode="pc";cd(d,a.Vertices);break;case "pt":d.di=a.Vertices.length/5;d.mode="pt";dd(d,a.Vertices);break;case "pnct":d.di=
a.Vertices.length/12;d.mode="p";ed(d,a.Vertices);break;default:alert("unknown surface mode!!")}gd(d,a.Indices,a.IndexSemantic);a.DiffuseMap&&(d.g=new O(d.c),d.g.repeat=i,Q(d.g,a.DiffuseMap,function(){var a=d;a.Db=i;a.ld&&a.ld(a)},function(){var a=d;I(J("owg.Mesh"),"Downloading Error: Texture not found...");a.yc&&a.yc(a)},i),d.bi=i);a.Center&&d.ph(a.Center[0],a.Center[1],a.Center[2]);d.Ib=a.Indices.length;d.bi||(d.Db=i);d.xl&&d.xl();d.ld&&!d.bi&&d.ld(d)};
function jd(a,b,c,d){b==l?alert("invalid json-url"):(a.sd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.sd,i),a.ld=c,a.yc=d,a.N.onreadystatechange=function(){if(4==a.N.readyState)if(404==a.N.status)a.yc&&a.yc(a);else{var b=$c(a.N.responseText);a.Mc(b,l,l,a)}},a.N.send())}
t.Fd=function(a,b,c,d,e,f){var g=n,j,k,m,o;k=j=0;m=1.0E20;for(var r=0;r<this.Fg;r++){var q=r;switch(this.rd){case "TRIANGLES":this.l.Ef=this.r[this.L[3*q]*this.M];this.l.Ff=this.r[this.L[3*q]*this.M+1];this.l.Gf=this.r[this.L[3*q]*this.M+2];this.l.Hf=this.r[this.L[3*q+1]*this.M];this.l.If=this.r[this.L[3*q+1]*this.M+1];this.l.Jf=this.r[this.L[3*q+1]*this.M+2];this.l.Vg=this.r[this.L[3*q+2]*this.M];this.l.Wg=this.r[this.L[3*q+2]*this.M+1];this.l.Xg=this.r[this.L[3*q+2]*this.M+2];break;case "TRIANGLESTRIP":0==
q%2?(this.l.Ef=this.r[this.L[q]*this.M],this.l.Ff=this.r[this.L[q]*this.M+1],this.l.Gf=this.r[this.L[q]*this.M+2],this.l.Hf=this.r[this.L[q+1]*this.M],this.l.If=this.r[this.L[q+1]*this.M+1],this.l.Jf=this.r[this.L[q+1]*this.M+2]):(this.l.Ef=this.r[this.L[q+1]*this.M],this.l.Ff=this.r[this.L[q+1]*this.M+1],this.l.Gf=this.r[this.L[q+1]*this.M+2],this.l.Hf=this.r[this.L[q]*this.M],this.l.If=this.r[this.L[q]*this.M+1],this.l.Jf=this.r[this.L[q]*this.M+2]);this.l.Vg=this.r[this.L[q+2]*this.M];this.l.Wg=
this.r[this.L[q+2]*this.M+1];this.l.Xg=this.r[this.L[q+2]*this.M+2];break;default:I(J("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.pa&&(this.l.Ef+=this.pa[0],this.l.Ff+=this.pa[1],this.l.Gf+=this.pa[2],this.l.Hf+=this.pa[0],this.l.If+=this.pa[1],this.l.Jf+=this.pa[2],this.l.Vg+=this.pa[0],this.l.Wg+=this.pa[1],this.l.Xg+=this.pa[2]);if(!(this.L[q]==this.L[q+1]||this.L[q]==this.L[q+2]||this.L[q+1]==this.L[q+2])){if(this.la){q=new M;q.ba(this.vd);
var u=new L;u.t(this.l.Ef,this.l.Ff,this.l.Gf);var v=new L;v.t(this.l.Hf,this.l.If,this.l.Jf);var y=new L;y.t(this.l.Vg,this.l.Wg,this.l.Xg);u=q.Ma(u);v=q.Ma(v);q=q.Ma(y);q=this.Nl.Ji(a,b,c,d,e,f,u.a[0],u.a[1],u.a[2],v.a[0],v.a[1],v.a[2],q.a[0],q.a[1],q.a[2])}else q=this.Nl.Ji(a,b,c,d,e,f,this.l.Ef,this.l.Ff,this.l.Gf,this.l.Hf,this.l.If,this.l.Jf,this.l.Vg,this.l.Wg,this.l.Xg);q&&(g=i,q.w<m&&0<q.w&&(m=q.w,j=q.$b,k=q.Kc,o=r))}}return g?(a={},a.w=m,a.$b=j,a.Kc=k,a.Om=o,a):l};
function kd(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,m,o=0;o<a.r.length;o++)j=a.r[o*a.M],k=a.r[o*a.M+1],m=a.r[o*a.M+2],j>e&&(e=j),k>f&&(f=k),m>g&&(g=m),j<b&&(b=j),k<c&&(c=k),m<d&&(d=m);a.la&&(o=new L(b,c,d),m=new L(e,c,d),j=new L(e,f,d),d=new L(b,f,d),k=new L(b,c,g),c=new L(b,f,g),e=new L(e,f,g),g=new L(b,f,g),b=a.la.Ma(o),f=a.la.Ma(m),j=a.la.Ma(j),d=a.la.Ma(d),k=a.la.Ma(k),c=a.la.Ma(c),m=a.la.Ma(e),o=a.la.Ma(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],m.a[0],o.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],m.a[1],o.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],m.a[2],o.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.pa&&(b+=a.pa[0],c+=a.pa[1],d+=a.pa[2],e+=a.pa[0],f+=a.pa[1],g+=a.pa[2]);a.Q===l&&(a.Q=Array(3));a.ia===l&&(a.ia=Array(3));a.Q[0]=b;a.Q[1]=c;a.Q[2]=d;a.ia[0]=e;a.ia[1]=f;a.ia[2]=g}
t.kl=function(a,b,c,d,e,f){return this.Fh.Tf(a,b,c,d,e,f,this.Q[0],this.Q[1],this.Q[2],this.ia[0],this.ia[1],this.ia[2])};t.bg=function(a,b,c,d,e,f){var g=this.c.hb.a,j=new M;this.hd[0]=a;this.hd[1]=b;this.hd[2]=c;this.gd[0]=d||0;this.gd[1]=e||0;this.gd[2]=f||0;j.Dd([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.hd[0],this.hd[1],this.hd[2],1]);a=new M;a.ed(this.gd[0],this.gd[1],this.gd[2]);b=new M;b.da(j,a);this.la=b};
function ld(a){a.bg(a.hd[0],a.hd[1],a.hd[2],a.gd[0],a.gd[1],a.gd[2])}
t.ph=function(a,b,c,d,e,f){var g=new R(a,b,c),c=Array(3);g.ma(c);(new M).ed(c[0],c[1],c[2]);g=new M;g.be(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new M;b.Dd(a);a=new M;a.Cd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new M;c.da(b,a);b=new M;g=new M;a=new M;d?b.Xi(e*Math.PI/180):b.Xi(-1.57079633);e&&g.Xk(d*Math.PI/180+1.57079633);
f&&a.Yk(f*Math.PI/180);d=new M;d.da(b,g);e=new M;e.da(d,a);d=new M;d.da(c,e);this.la=d;kd(this)};t.ba=function(a){this.dc(a.g);this.r=a.r;this.mode=a.mode;this.M=a.M;this.L=a.L;this.rd=a.rd;this.Ib=a.Ib;this.qa=a.qa;this.Fg=a.Fg;this.V=a.V;this.ub=a.ub;this.la=a.la;this.rd=a.rd};z("Surface",N);N.prototype.Draw=N.prototype.ha;N.prototype.CopyFrom=N.prototype.ba;N.prototype.SetAsBillboard=N.prototype.bg;N.prototype.SetTexture=N.prototype.dc;N.prototype.TestBoundingBoxIntersection=N.prototype.kl;
N.prototype.TestRayIntersection=N.prototype.Fd;var md="art/";function O(a,b,c,d,e){this.c=a;this.b=a.b;this.g=l;this.Sh=this.Db=n;this.Za=l;this.height=this.width=0;this.Jl=this.Qm=n;b&&nd(this,c||0,d||0,e||n);this.repeat=n}
function nd(a,b,c,d){od(a);a.Xb=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Xb);a.Xb.width=b;a.Xb.height=c;a.g=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.g);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Xb.width,a.Xb.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,l);a.hi=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.hi);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Xb.width,a.Xb.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.g,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.hi);a.b.bindTexture(a.b.TEXTURE_2D,l);a.b.bindRenderbuffer(a.b.RENDERBUFFER,l);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
l);a.Db=i;a.Qm=i;a.width=b;a.height=c}function od(a){a.Xb!=l&&(a.b.deleteRenderbuffer(a.hi),a.hi=l,a.b.deleteFramebuffer(a.Xb),a.Xb=l,a.b.deleteTexture(a.g),a.g=l,a.Za&&(a.Za.k(),a.Za=l))}
function Q(a,b,c,d,e){a.Jl=x(e)?e:n;a.g=a.b.createTexture();var f=a.g,g=a.b;a.g.Qd=new Image;a.g.Qd.crossOrigin="anonymous";a.g.Qd.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Jl);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Qd);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,l);a.width=f.Qd.width;a.height=f.Qd.height;c!=l&&c(a);a.Db=i};a.g.Qd.onerror=function(){I(J("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Sh=i;d&&d(a)};a.g.Qd.src=b}t=O.prototype;
t.B=function(a,b,c,d,e,f,g,j,k,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||n;j=j||n;k=k||1;if(this.Db){var o=this.width,r=this.height,q=this.width/2,u=this.height/2;this.c.ac();this.c.Yi();var d=K(d),v=new M;0<d?v.Dd([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*q+Math.sin(d)*e*u+e*q+a,-Math.cos(d)*f*u-Math.sin(d)*f*q+f*u+b,c,1]):(v.ed(a,b,c),a=new M,a.Cd(e,f,1),v.da(v,a));this.c.cc(v);this.Za===l&&(this.Za=new N(this.c),j?fd(this.Za,[0,0,0,0,0,o,0,0,1,0,o,r,0,1,
1,0,r,0,0,1]):fd(this.Za,[0,0,0,0,1,o,0,0,1,1,o,r,0,1,0,0,r,0,0,0]),gd(this.Za,[0,1,2,0,2,3],"TRIANGLES"),this.Za.dc(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>k&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Za.ha(l,l,l,l,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Pc()}};t.k=function(){this.g.Qd=l;this.c.b.deleteTexture(this.g);this.g=l;this.Sh=this.Db=n;this.Za&&(this.Za.k(),this.Za=l);od(this)};t.fg=function(){this.Qm&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Xb),this.b.viewport(0,0,this.Xb.width,this.Xb.height))};t.ll=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};
t.ba=function(a){this.g=a.g;this.Db=a.Db;this.Sh=a.Sh;this.height=this.width=this.Za=a.Za};z("Texture",O);O.prototype.CopyFrom=O.prototype.ba;O.prototype.Blit=O.prototype.B;O.prototype._EnableRenderToTexture=O.prototype.fg;O.prototype._DisableRenderToTexture=O.prototype.ll;function R(a,b,c){this.H=new Float32Array([a,b,c])}R.prototype.t=function(a,b,c){this.H[0]=a;this.H[1]=b;this.H[2]=c};R.prototype.ma=function(a){var b=Math.sin(K(this.H[1])),c=Math.cos(K(this.H[1])),d=Math.sin(K(this.H[0])),e=Hc/Math.sqrt(1-Ic*b*b);a[0]=(e+this.H[2])*c*Math.cos(K(this.H[0]));a[1]=(e+this.H[2])*c*d;a[2]=(0.993305620011365*e+this.H[2])*b;a[0]*=1.1920930376163766E-7;a[1]*=1.1920930376163766E-7;a[2]*=1.1920930376163766E-7};
R.prototype.Nc=function(a,b,c){for(var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0,a=8388607*a,b=8388607*b,c=8388607*c,k=0;10>k;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Hc/Math.sqrt(1-Ic*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Ic/(g+f));this.H[0]=Kc(d);this.H[1]=Kc(e);this.H[2]=f};R.prototype.Xe=function(){return" Longitude: "+this.H[0].toPrecision(17)+" Latitude: "+this.H[1].toPrecision(17)+" Elevation: "+this.H[2].toPrecision(17)};z("GeoCoord",R);
R.prototype.FromCartesian=R.prototype.Nc;R.prototype.ToCartesian=R.prototype.ma;R.prototype.ToString=R.prototype.Xe;function pd(a){this.c=a;this.b=a.b;this.la=this.V=this.yd=l;this.vd=new M;this.ak=[];this.xi=this.Gg=this.pa=0}t=pd.prototype;t.sh=function(a){this.Gg+=a.length/7;0==this.xi&&(this.xi=70*this.Gg);this.yd=l;this.yd=new Float32Array(a);this.Gd()};t.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.V=this.yd=l};
t.ph=function(a,b,c){var d=new R(a,b,c),c=Array(3);d.ma(c);(new M).ed(c[0],c[1],c[2]);d=new M;d.Dk(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new M;b.Dd(a);a=new M;a.Cd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new M;c.da(b,a);a=new M;b=new M;b.da(c,a);this.la=b};
t.ha=function(){if(this.yd!=l){this.V||this.Gd();this.la&&(this.c.ac(),this.vd.da(this.la,this.c.vb),this.c.cc(this.vd));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12);var a=new M;a.Qe(this.c.ka);var b=this.c.Ta,c=this.c.ka;b.nc&&(b.b.useProgram(b.nc),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.nc,"matMVP"),n,c.Ca()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.nc,
"matInvMVP"),n,a.Ca()));this.b.drawArrays(this.b.POINTS,0,this.Gg);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.la&&this.c.Pc()}};t.Gd=function(){this.V===l?(this.V=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferData(this.b.ARRAY_BUFFER,this.xi,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.yd)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.pa,this.yd));this.pa+=4*this.yd.length};function qd(){}var rd=0;t=qd.prototype;t.key=0;t.zf=n;t.wl=n;t.Tc=function(a,b,c,d,e,f){pa(a)?this.Pl=i:a&&a.handleEvent&&pa(a.handleEvent)?this.Pl=n:aa(Error("Invalid listener argument"));this.zg=a;this.vm=b;this.src=c;this.type=d;this.capture=!!e;this.Lj=f;this.wl=n;this.key=++rd;this.zf=n};t.handleEvent=function(a){return this.Pl?this.zg.call(this.Lj||this.src,a):this.zg.handleEvent.call(this.zg,a)};var sd=!Cb||Sb(),td=!Cb||Sb(),ud=Cb&&!Qb("8");!Eb||Qb("528");Db&&Qb("1.9b")||Cb&&Qb("8")||Bb&&Qb("9.5")||Eb&&Qb("528");Db&&!Qb("8")||Cb&&Qb("9");var vd="dblclick",wd="mousedown",xd="mouseup",yd="mousemove",zd="keydown",Ad="keyup";function Bd(){}Bd.prototype.Hl=n;Bd.prototype.re=function(){this.Hl||(this.Hl=i,this.Rc())};Bd.prototype.Rc=function(){this.En&&Cd.apply(l,this.En)};function Cd(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ja(d)?Cd.apply(l,d):d&&"function"==typeof d.re&&d.re()}};function Dd(a,b){this.type=a;this.currentTarget=this.target=b}Ba(Dd,Bd);t=Dd.prototype;t.Rc=function(){delete this.type;delete this.target;delete this.currentTarget};t.He=n;t.Ng=i;t.stopPropagation=function(){this.He=i};t.preventDefault=function(){this.Ng=n};function Ed(a){Ed[" "](a);return a}Ed[" "]=p();function Fd(a,b){a&&this.Tc(a,b)}Ba(Fd,Dd);var Gd=0,Hd=1,Id=2,Jd=[1,4,2];t=Fd.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=n;t.altKey=n;t.shiftKey=n;t.metaKey=n;t.qd=l;
t.Tc=function(a,b){var c=this.type=a.type;Dd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Db){var e;a:{try{Ed(d.nodeName);e=i;break a}catch(f){}e=n}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Eb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Eb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.qd=a;delete this.Ng;delete this.He};function Kd(a,b){return sd?a.qd.button==b:"click"==a.type?b==Gd:!!(a.qd.button&Jd[b])}
t.stopPropagation=function(){Fd.Me.stopPropagation.call(this);this.qd.stopPropagation?this.qd.stopPropagation():this.qd.cancelBubble=i};t.preventDefault=function(){Fd.Me.preventDefault.call(this);var a=this.qd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=n,ud)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.Rc=function(){Fd.Me.Rc.call(this);this.relatedTarget=this.currentTarget=this.target=this.qd=l};var Ld={},Md={},Nd={},Od={};
function T(a,b,c,d,e){if(b){if(ia(b)){for(var f=0;f<b.length;f++)T(a,b[f],c,d,e);return l}var d=!!d,g=Md;b in g||(g[b]={ua:0,oc:0});g=g[b];d in g||(g[d]={ua:0,oc:0},g.ua++);var g=g[d],j=ua(a),k;g.oc++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.zg==c&&g.Lj==e){if(g.zf)break;return k[f].key}}else k=g[j]=[],g.ua++;f=Pd();f.src=a;g=new qd;g.Tc(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Ld[c]=g;Nd[j]||(Nd[j]=[]);Nd[j].push(g);a.addEventListener?(a==w||!a.Dl)&&a.addEventListener(b,f,d):a.attachEvent(b in
Od?Od[b]:Od[b]="on"+b,f);return c}aa(Error("Invalid event type"))}function Pd(){var a=Qd,b=td?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Rd(a,b,c,d,e){if(ia(b))for(var f=0;f<b.length;f++)Rd(a,b[f],c,d,e);else{d=!!d;a:{f=Md;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ua(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].zg==c&&a[f].capture==d&&a[f].Lj==e){Sd(a[f].key);break}}}
function Sd(a){if(Ld[a]){var b=Ld[a];if(!b.zf){var c=b.src,d=b.type,e=b.vm,f=b.capture;c.removeEventListener?(c==w||!c.Dl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Od?Od[d]:Od[d]="on"+d,e);c=ua(c);e=Md[d][f][c];if(Nd[c]){var g=Nd[c],j=ac(g,b);0<=j&&$b.splice.call(g,j,1);0==g.length&&delete Nd[c]}b.zf=i;e.nm=i;Td(d,f,c,e);delete Ld[a]}}}
function Td(a,b,c,d){if(!d.ai&&d.nm){for(var e=0,f=0;e<d.length;e++)d[e].zf?d[e].vm.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.nm=n;0==f&&(delete Md[a][b][c],Md[a][b].ua--,0==Md[a][b].ua&&(delete Md[a][b],Md[a].ua--),0==Md[a].ua&&delete Md[a])}}function Ud(a){var b,c=0,d=b==l;b=!!b;if(a==l)Tb(Nd,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Sd(f.key),c++}});else if(a=ua(a),Nd[a])for(var a=Nd[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Sd(f.key),c++}}
function Vd(a,b,c,d,e){var f=1,b=ua(b);if(a[b]){a.oc--;a=a[b];a.ai?a.ai++:a.ai=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.zf&&(f&=Wd(k,e)!==n)}}finally{a.ai--,Td(c,d,b,a)}}return Boolean(f)}function Wd(a,b){var c=a.handleEvent(b);a.wl&&Sd(a.key);return c}
function Qd(a,b){if(!Ld[a])return i;var c=Ld[a],d=c.type,e=Md;if(!(d in e))return i;var e=e[d],f,g;if(!td){f=b||fa("window.event");var j=i in e,k=n in e;if(j){if(0>f.keyCode||f.returnValue!=h)return i;a:{var m=n;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(o){m=i}if(m||f.returnValue==h)f.returnValue=i}}m=new Fd;m.Tc(f,this);f=i;try{if(j){for(var r=[],q=m.currentTarget;q;q=q.parentNode)r.push(q);g=e[i];g.oc=g.ua;for(var u=r.length-1;!m.He&&0<=u&&g.oc;u--)m.currentTarget=r[u],f&=Vd(g,r[u],d,i,m);
if(k){g=e[n];g.oc=g.ua;for(u=0;!m.He&&u<r.length&&g.oc;u++)m.currentTarget=r[u],f&=Vd(g,r[u],d,n,m)}}else f=Wd(c,m)}finally{r&&(r.length=0),m.re()}return f}d=new Fd(b,this);try{f=Wd(c,d)}finally{d.re()}return f};function Xd(a,b){this.Vl=b;this.tg=[];a>this.Vl&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.tg.push(this.Nh())}Ba(Xd,Bd);t=Xd.prototype;t.Al=l;t.Gl=l;function Yd(a,b){a.tg.length<a.Vl?a.tg.push(b):a.vj(b)}t.Nh=function(){return this.Al?this.Al():{}};t.vj=function(a){if(this.Gl)this.Gl(a);else if(qa(a))if(pa(a.re))a.re();else for(var b in a)delete a[b]};t.Rc=function(){Xd.Me.Rc.call(this);for(var a=this.tg;a.length;)this.vj(a.pop());delete this.tg};function Zd(){this.sg=[];this.Yj=new jc;this.Km=this.Lm=this.Mm=this.Cm=0;this.Yc=new jc;this.yl=this.Jm=0;this.Sn=1;this.wj=new Xd(0,4E3);this.wj.Nh=function(){return new $d};this.Dm=new Xd(0,50);this.Dm.Nh=function(){return new ae};var a=this;this.Nj=new Xd(0,2E3);this.Nj.Nh=function(){return""+a.Sn++};this.Nj.vj=p()}function ae(){this.kk=this.time=this.count=0}
ae.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.kk&&a.push(" [VarAlloc = ",this.kk,"]");return a.join("")};function $d(){}function be(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ce(a.Il-c));e.push(" ",de(a.Il-b));0==a.xj?e.push(" Start        "):1==a.xj?(e.push(" Done "),e.push(ce(a.Ho-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.io&&e.push("[VarAlloc ",a.io,"] ");return e.join("")}
$d.prototype.toString=function(){return this.type==l?this.An:"["+this.type+"] "+this.An};Zd.prototype.reset=function(){for(var a=0;a<this.sg.length;a++){var b=this.wj.id;b&&Yd(this.Nj,b);Yd(this.wj,this.sg[a])}this.sg.length=0;this.Yj.clear();this.Cm=Aa();this.yl=this.Jm=this.Km=this.Lm=this.Mm=0;b=this.Yc.Wh();for(a=0;a<b.length;a++){var c=this.Yc.get(b[a]);c.count=0;c.time=0;c.kk=0;Yd(this.Dm,c)}this.Yc.clear()};
Zd.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.sg.length;d++){var e=this.sg[d];1==e.xj&&c.pop();a.push(" ",be(e,this.Cm,b,c.join("")));b=e.Il;a.push("\n");0==e.xj&&c.push("|  ")}if(0!=this.Yj.se()){var f=Aa();a.push(" Unstopped timers:\n");ic(this.Yj,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",de(b.startTime),")\n")})}b=this.Yc.Wh();for(d=0;d<b.length;d++)c=this.Yc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Jm,"\n","Total comments created ",
this.yl,"\n","Overhead start: ",this.Mm," ms\n","Overhead end: ",this.Lm," ms\n","Overhead comment: ",this.Km," ms\n");return a.join("")};function ce(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function de(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Zd;var ee=0;function fe(){ee++;this.bd=p();this.cd=p();this.ad=p();this.Te=p();this.Se=p();this.Ue=p();this.Ve=p();this.c=l}function ge(a){a.Ue(a.c.Z);a.Te()}fe.prototype.Bd=function(){this.Se()};function he(){}Ba(he,Bd);t=he.prototype;t.Dl=i;t.Zj=l;t.addEventListener=function(a,b,c,d){T(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Rd(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=Md;if(b in c){if(oa(a))a=new Dd(a,this);else if(a instanceof Dd)a.target=a.target||this;else{var d=a,a=new Dd(b,this);Wb(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.Zj)e.push(f);f=c[i];f.oc=f.ua;for(var g=e.length-1;!a.He&&0<=g&&f.oc;g--)a.currentTarget=e[g],d&=Vd(f,e[g],a.type,i,a)&&a.Ng!=n}if(n in c)if(f=c[n],f.oc=f.ua,b)for(g=0;!a.He&&g<e.length&&f.oc;g++)a.currentTarget=e[g],d&=Vd(f,e[g],a.type,n,a)&&a.Ng!=n;else for(e=this;!a.He&&
e&&f.oc;e=e.Zj)a.currentTarget=e,d&=Vd(f,e,a.type,n,a)&&a.Ng!=n;a=Boolean(d)}else a=i;return a};t.Rc=function(){he.Me.Rc.call(this);Ud(this);this.Zj=l};function ie(){this.ki=this.ui=this.si=this.ti=this.ri=this.pi=this.qi=this.oi=this.mi=this.ni=this.li=this.Cf=this.Df=this.Oe=this.Bf=this.Mh=this.Lh=l;this.Vj=this.Uj=0;this.Nb=n;this.elevation=this.latitude=this.longitude=this.La=0;this.Xc=-1;this.Ha=this.Ra=0;this.R=je;this.nf=0;this.Ac=48;this.Zb=this.ji=this.Lc=this.lb=this.Lf=this.fb=this.xb=this.Ia=0;this.tl=n;this.Cl=this.Bl=0;this.ic=new Zc(0.7,0.9,1,1);this.ad=p();this.Lb=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;return a};this.bd=
function(){if(0==this.Xc)this.Nb&&(this.Mh.B(this.Uj-64,this.Vj-64,0,this.La,1,1,i,n),this.Lh.B(this.Uj-64,this.Vj-64,0,0,1,1,i,n)),this.c.Ad("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.Xc){this.tl&&this.ki.B(this.Bl-16,this.Cl-16,0,0,1,1,i,n,0.75);var a=this.c.width-1-64-this.nf,b=this.c.height-1-this.Ac,c=this.Lb(this.Lf+this.ji);this.R==ke?this.Cf.B(a-64,b-64,0,c,1,1,i,n,1,this.ic):this.R==le?this.Cf.B(a-
64,b-64,0,c,1,1,i,n,1,this.ic):this.Cf.B(a-64,b-64,0,c,1,1,i,n);this.R==me?(this.Df.B(a-32,b-32,0,0,1,1,i,n),this.Oe.B(a-32,b-32,0,this.fb,1,1,i,n,0.5)):this.R==ne?(this.Df.B(a-32,b-32,0,0,1,1,i,n),this.Oe.B(a-32,b-32,0,this.fb,1,1,i,n,0.5)):this.Df.B(a-32,b-32,0,0,1,1,i,n);b=this.c.height-1-82-this.Ac;this.R==oe?(this.Bf.B(a-32,b-32,0,0,1,1,i),this.Oe.B(a-32,b-32,0,this.Ia,1,1,i,n,0.5)):this.R==pe?(this.Bf.B(a-32,b-32,0,0,1,1,i),this.Oe.B(a-32,b-32,0,this.Ia,1,1,i,n,0.5)):this.Bf.B(a-32,b-32,0,0,
1,1,i,n);b=this.c.height-1-82-128-this.Ac;this.ui.B(a-8,b-64,0,0,1,1,i,n);b=this.c.height-1-82-64-this.Ac;this.R==qe?this.qi.B(a-16,b-16,0,0,1,1,i,n):this.R==re?this.pi.B(a-16,b-16,0,0,1,1,i,n):this.oi.B(a-16,b-16,0,0,1,1,i,n);b=this.c.height-1-82-128-64-this.Ac;this.R==se?this.ni.B(a-16,b-16,0,0,1,1,i,n):this.R==te?this.mi.B(a-16,b-16,0,0,1,1,i,n):this.li.B(a-16,b-16,0,0,1,1,i,n);b=this.c.height-1-82-128-this.Zb-this.Ac;this.R==ue?this.ti.B(a-16,b-16,0,0,1,1,i,n):this.R==ve?this.si.B(a-16,b-16,0,
0,1,1,i,n):this.ri.B(a-16,b-16,0,0,1,1,i,n)}};this.cd=function(a){this.Xc=a.Xc;this.La=57.29577951308232*a.zl;this.longitude=a.Pb.longitude;this.latitude=a.Pb.latitude;this.elevation=a.Pb.elevation;this.tl=a.ff;this.Bl=a.zc[0];this.Cl=this.c.height-a.zc[1]-1;this.R!=ke&&(this.ji=this.La,this.Lf=0);this.R==re?(a.cb=Sc,a.Ea=1):this.R==te?(a.cb=Tc,a.Ea=1):this.R==ve?0<this.Zb?(a.cb=Tc,a.Ea=Math.sqrt(this.Zb)/4):0>this.Zb&&(a.Ea=Math.sqrt(-this.Zb)/4,a.cb=Sc):this.R==pe?(a.cb=Uc,a.Ea=this.xb):this.R==
ke?(a.cb=Vc,a.Ea=this.ji+this.Lf,a.Ea=this.Lb(a.Ea),a.Ea*=Math.PI/180):this.R==me?(a.cb=Wc,a.Ea=Math.PI*this.fb/180):a.cb=Rc;a.mm=this.R==je?0:1};this.Te=function(){this.Lh=new O(this.c);Q(this.Lh,md+"flightnavigation/cmpbg.png");this.Mh=new O(this.c);Q(this.Mh,md+"flightnavigation/cmpr.png");this.Bf=new O(this.c);Q(this.Bf,md+"globenavigation/MoveWheel.png");this.Df=new O(this.c);Q(this.Df,md+"globenavigation/YawPitchWheel.png");this.Cf=new O(this.c);Q(this.Cf,md+"globenavigation/yaw_pitch_adjust.png");
this.Oe=new O(this.c);Q(this.Oe,md+"globenavigation/movewheel_marker.png",l,l,i);this.li=new O(this.c);Q(this.li,md+"globenavigation/minus.png");this.ni=new O(this.c);Q(this.ni,md+"globenavigation/minus_over.png");this.mi=new O(this.c);Q(this.mi,md+"globenavigation/minus_clicked.png");this.oi=new O(this.c);Q(this.oi,md+"globenavigation/plus.png");this.qi=new O(this.c);Q(this.qi,md+"globenavigation/plus_over.png");this.pi=new O(this.c);Q(this.pi,md+"globenavigation/plus_clicked.png");this.ri=new O(this.c);
Q(this.ri,md+"globenavigation/slider.png");this.ti=new O(this.c);Q(this.ti,md+"globenavigation/slider_over.png");this.si=new O(this.c);Q(this.si,md+"globenavigation/slider_clicked.png");this.ui=new O(this.c);Q(this.ui,md+"globenavigation/slider_rail.png");this.ki=new O(this.c);Q(this.ki,md+"globenavigation/crosshair.png")};this.Se=function(){this.Lh.k();this.Mh.k();this.Bf.k();this.Df.k();this.Cf.k();this.Oe.k();this.li.k();this.ni.k();this.mi.k();this.oi.k();this.qi.k();this.pi.k();this.ri.k();this.ti.k();
this.si.k();this.ui.k();this.ki.k()};this.Ue=function(a){T(a,wd,this.Vf,n,this);T(a,xd,this.Xf,n,this);T(a,yd,this.Wf,n,this);T(a,vd,this.Ri,n,this)};this.Vf=function(a){if(Kd(a,Gd)){var b=a.offsetX-this.c.Z.offsetLeft,a=a.offsetY-this.c.Z.offsetTop;this.Uj=b;this.Vj=this.c.height-a-1;this.Ra=b;this.Ha=this.c.height-a-1;this.Nb=i;1==this.Xc&&this.Ii(0)}};this.Xf=function(a){if(Kd(a,Gd)){var b=a.offsetY-this.c.Z.offsetTop;this.Ra=a.offsetX-this.c.Z.offsetLeft;this.Ha=this.c.height-b-1;this.Nb=n;1==
this.Xc&&this.Ii(0);this.Zb=0}};this.Wf=function(a){var b=a.offsetY-this.c.Z.offsetTop,c=this.c.height-b-1-this.Ha;this.Ra=a.offsetX-this.c.Z.offsetLeft;this.Ha=this.c.height-b-1;1==this.Xc&&this.Ii(c)};this.Ri=function(){this.R==le&&we(this.c.Pa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Ii=function(a){var b=this.c.width-1-64-this.nf-8,c=this.c.height-1-82-64-this.Ac+8,d=this.c.width-1-64-this.nf-8,e=this.c.height-1-82-128-64-this.Ac+8,f=this.c.width-1-64-this.nf-8,g=this.c.height-
1-82-128-this.Zb-this.Ac+8,j=this.c.width-1-64-this.nf,k=this.c.height-1-82-this.Ac,m=Math.abs(this.Ra-j),o=Math.abs(this.Ha-k),r=this.c.width-1-64-this.nf,q=this.c.height-1-this.Ac,u=Math.abs(this.Ra-r),u=u*u,v=Math.abs(this.Ha-q),v=v*v;this.Nb&&this.R==ve?(this.Zb-=a,-40>this.Zb?this.Zb=-40:40<this.Zb&&(this.Zb=40)):this.Nb&&this.R==pe?(a=this.Ra-j,k=this.Ha-k,this.xb=this.Ia=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ia=360-this.Ia:this.xb=360-this.xb,this.Ia+=90,this.xb+=90,this.Ia=this.Lb(this.Ia),
this.xb=this.Lb(this.xb)):this.Nb&&this.R==ke?(a=this.Ra-r,k=this.Ha-q,this.lb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.lb=360-this.lb),this.lb-=90,this.lb=this.Lb(this.lb),this.Lf=this.Lb(this.lb-this.Lc)):this.Nb&&this.R==me?(a=this.Ra-r,k=this.Ha-q,this.fb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.fb=360-this.fb),this.fb+=90,this.fb=this.Lb(this.fb)):(this.R=0,this.Ra>b&&this.Ha>c-16&&this.Ra<b+16&&this.Ha<c&&(this.R=this.Nb?re:qe),this.Ra>d&&this.Ha>e-16&&this.Ra<d+16&&this.Ha<
e&&(this.R=this.Nb?te:se),this.Ra>f&&this.Ha>g-16&&this.Ra<f+16&&this.Ha<g&&(this.R=this.Nb?ve:ue),729>=m*m+o*o?this.Nb?this.R=pe:(this.R=oe,a=this.Ra-j,k=this.Ha-k,this.xb=this.Ia=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ia=360-this.Ia:this.xb=360-this.xb,this.Ia+=90,this.xb+=90,this.Ia=this.Lb(this.Ia),this.xb=this.Lb(this.xb)):this.Ia=0,625>=u+v)?(this.R=this.Nb?me:ne,a=this.Ra-r,k=this.Ha-q,this.fb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.fb=360-this.fb),this.fb+=90,this.fb=this.Lb(this.fb)):
1600>=u+v&&(this.Nb?(this.R=ke,a=this.Ra-r,k=this.Ha-q,this.lb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.lb=360-this.lb),this.lb-=90,this.lb=this.Lb(this.lb),this.Lf=this.Lb(this.lb-this.Lc),this.ji=this.La):(this.R=le,a=this.Ra-r,k=this.Ha-q,this.Lc=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.Lc=360-this.Lc),this.Lc-=90,this.Lc-=this.Lf,this.Lc=this.Lb(this.Lc)))}}var je=0,qe=1,re=2,se=3,te=4,ue=5,ve=6,oe=7,pe=8,le=9,ke=10,ne=11,me=12;ie.prototype=new fe;function xe(){this.name="ogAoeImage";this.type=$a;this.wa=-1;this.F=n;this.options=l;this.ve=-1;this.we=-180;this.ue=-90;this.qf=180;this.pf=90;this.Db=n;this.g=l;this.sf=[];this.kf=[]}xe.prototype=new F;t=xe.prototype;t.ya=function(a){this.options=a;this.we=a.longitude0;this.ue=a.latitude0;this.qf=a.longitude1;this.pf=a.latitude1;this.On=a.url;a=this.parent.parent.c;new O(a,i,256,256);this.g=new O(a);this.g.parent=this;Q(this.g,this.On,ye,ze,i);this.wa=Ae(this).zi(this)};t.Oa=function(){Ae(this).Ui(this.wa)};
function Ae(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.lj);return b}t.ca=p();t.ea=p();
t.Wa=function(){var a=this.parent.parent.c;if(this.Db!=n){var b=a.f.G.Qa.C.length,c,d,e,f,g=l;this.kf=l;this.kf=[];for(var j=0;j<b;j++)if(g=a.f.G.Qa.C[j],!(1>g.i.length)&&!g.wo&&(c=g.we,d=g.ue,e=g.qf,f=g.pf,!(this.we>e|this.qf<c|this.ue>f|this.pf<d)&&(this.kf[g.i]=this.sf[g.i],!this.sf[g.i]))){var k=new N(g.c);k.ba(g.o);var m=g.g,o=new O(g.c,i,256,256),r=o;a.ge.push(r);r.fg();m.B(0,0,0,0,1,1,i,i,1);this.g.B(256*(this.we-c)/(e-c),256*(this.ue-d)/(f-d),0,0,(this.qf-this.we)/this.g.width/((e-c)/256),
(this.pf-this.ue)/this.g.height/((f-d)/256),i,i,1);Be(a);k.dc(o);k.ko=g.X[0];k.lo=g.X[1];k.mo=g.X[2];this.sf[g.i]=k;this.kf[g.i]=k}}for(var q in this.kf)a=this.kf[q],b=new M,b.ba(a.c.vb),b.a[12]+=a.ko,b.a[13]+=a.lo,b.a[14]+=a.mo,a.c.ac(),a.c.cc(b),a.ha(),a.c.Pc()};function ye(a){a.parent.Db=i;a.J&&a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function ze(a){a.I&&a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Ce(a){this.c=a;this.jg=[]}Ce.prototype.Wa=function(){for(var a=0;a<this.jg.length;a++)this.jg[a].Wa()};Ce.prototype.zi=function(a){this.jg.push(a);return this.jg.length-1};Ce.prototype.Ui=function(a){this.jg.splice(a,1)};function De(a){this.c=a;this.Aa=[];this.Od=new Ee}De.prototype.Wa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Od.xh(b);for(var k=0;k<this.Aa.length;k++){var m=this.Aa[k];m.F||(this.Od.wh(m.Ee,m.Fe,m.Ge,m.Ee+0.0010,m.Fe+0.0010,m.Ge+0.0010),f=m.Ee-c,g=m.Fe-d,j=m.Ge-e,f=f*f+g*g+j*j,g=m.ok*m.ok,m.nk*m.nk>f&&g<f&&m.ha())}};De.prototype.$f=function(a,b){for(var c=0;c<this.Aa.length;c++)if(this.Aa[c].Yf(a,b))return this.Aa[c];return l};function Fe(a){this.c=a;this.Da=[]}Fe.prototype.Wa=function(){for(var a=0;a<this.Da.length;a++){var b=this.Da[a];b.F||b.ha()}};Fe.prototype.Ai=function(a){this.Da.push(a)};Fe.prototype.Vi=function(a){for(var b=0;b<this.Da.length;b++)if(this.Da[b]==a){this.Da.splice(b,1);break}};Fe.prototype.Zf=function(a,b){for(var c=0;c<this.Da.length;c++){var d=this.Da[c].Yf(a,b);if(d)return d}return l};function Ge(){this.n=this.y=this.x=0}function Ee(){this.D=Array(6);this.D[0]=new He;this.D[1]=new He;this.D[2]=new He;this.D[3]=new He;this.D[4]=new He;this.D[5]=new He;this.O=Array(8);this.O[0]=new Ge;this.O[1]=new Ge;this.O[2]=new Ge;this.O[3]=new Ge;this.O[4]=new Ge;this.O[5]=new Ge;this.O[6]=new Ge;this.O[7]=new Ge}function He(){this.Fc=this.Ec=this.Dc=this.$c=0}
He.prototype.vc=function(){var a=Math.sqrt(this.Dc*this.Dc+this.Ec*this.Ec+this.Fc*this.Fc);this.Dc/=a;this.Ec/=a;this.Fc/=a;this.$c/=a};
Ee.prototype.wh=function(a,b,c,d,e,f){this.O[0].x=a;this.O[0].y=b;this.O[0].n=c;this.O[1].x=d;this.O[1].y=b;this.O[1].n=c;this.O[2].x=d;this.O[2].y=e;this.O[2].n=c;this.O[3].x=a;this.O[3].y=e;this.O[3].n=c;this.O[4].x=a;this.O[4].y=b;this.O[4].n=f;this.O[5].x=a;this.O[5].y=e;this.O[5].n=f;this.O[6].x=d;this.O[6].y=e;this.O[6].n=f;this.O[7].x=d;this.O[7].y=b;this.O[7].n=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.D[a].Dc*this.O[c].x+this.D[a].Ec*this.O[c].y+this.D[a].Fc*this.O[c].n+this.D[a].$c&&
--b;if(0==b)return n}return i};
Ee.prototype.xh=function(a){this.ib=a.a;this.am=this.ib[0];this.em=this.ib[1];this.im=this.ib[2];this.tf=this.ib[3];this.bm=this.ib[4];this.fm=this.ib[5];this.jm=this.ib[6];this.uf=this.ib[7];this.cm=this.ib[8];this.gm=this.ib[9];this.km=this.ib[10];this.vf=this.ib[11];this.dm=this.ib[12];this.hm=this.ib[13];this.lm=this.ib[14];this.wf=this.ib[15];this.D[0].Dc=this.tf+this.am;this.D[0].Ec=this.uf+this.bm;this.D[0].Fc=this.vf+this.cm;this.D[0].$c=this.wf+this.dm;this.D[0].vc();this.D[1].Dc=this.tf-
this.am;this.D[1].Ec=this.uf-this.bm;this.D[1].Fc=this.vf-this.cm;this.D[1].$c=this.wf-this.dm;this.D[1].vc();this.D[2].Dc=this.tf-this.em;this.D[2].Ec=this.uf-this.fm;this.D[2].Fc=this.vf-this.gm;this.D[2].$c=this.wf-this.hm;this.D[2].vc();this.D[3].Dc=this.tf+this.em;this.D[3].Ec=this.uf+this.fm;this.D[3].Fc=this.vf+this.gm;this.D[3].$c=this.wf+this.hm;this.D[3].vc();this.D[4].Dc=this.tf+this.im;this.D[4].Ec=this.uf+this.jm;this.D[4].Fc=this.vf+this.km;this.D[4].$c=this.wf+this.lm;this.D[4].vc();
this.D[5].Dc=this.tf-this.im;this.D[5].Ec=this.uf-this.jm;this.D[5].Fc=this.vf-this.km;this.D[5].$c=this.wf-this.lm;this.D[5].vc()};z("ViewFrustum",Ee);Ee.prototype.TestBox=Ee.prototype.wh;Ee.prototype.Update=Ee.prototype.xh;function Ie(){this.kg=this.lg=n;this.version=this.Ud=this.Je=this.bb=this.Va=l}
Ie.prototype.Qf=function(a){this.N=new XMLHttpRequest;this.N.open("GET",a,i);var b=this;this.N.onreadystatechange=function(){a:if(4==b.N.readyState)if(200==b.N.status){var a=b.N.responseText,d;try{d=$c(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.Go=d.name,b.bb=d.maxlod,b.Qn=256,a=d.extent,b.Va=a,b.jo=[b.bb,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.Je="image/png",b.Ud=".png"):"jpg"==d.format?(b.Je="image/jpg",b.Ud=".jpg"):b.Je="image/png":"elevation"==d.type&&(b.Ud=".json")):
(b.version=0,b.Fo=d.layer,b.Eo=d.copyright,b.Ao=d.srs,b.Va=d.boundingbox,b.bb=d.levelofdetail,b.zo=d.imagewidth,b.yo=d.imageheight,b.Qn=d.tilesize,b.Jo=d.tilelayout,b.Je=d.tileformat,b.jo=d.bounds,b.Io=d.center,"image/png"==b.Je?b.Ud=".png":"image/jpg"==b.Je?b.Ud=".jpg":"elevation/json"==b.Je&&(b.Ud=".json"));b.lg=i}else I(J("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.kg=i};this.N.send()};z("DatasetInfo",Ie);Ie.prototype.Download=Ie.prototype.Qf;function Je(){}t=Je.prototype;t.ag=function(a,b){this.Ti(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};t.Ti=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
t.bc=function(a,b){b.x=0;b.y=0;b.gb=a.length;for(var c,d=b.gb;0<d;d--)switch(c=1<<d-1,a[b.gb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};t.Vk=function(a,b){var c={x:l,y:l,gb:l};this.bc(a,c);var d=4.007501668E7/Math.pow(2,c.gb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
t.Wk=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Ti(a,d);var f=256*d[0]*Math.pow(2,c),g=256*(1-d[1])*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI,k=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI;b[0]=d;b[1]=k;b[2]=e;b[3]=360*c};z("MercatorQuadtree",Je);Je.prototype.QuadKeyToMercatorCoord=Je.prototype.ag;
Je.prototype.QuadKeyToNormalizedCoord=Je.prototype.Ti;Je.prototype.QuadKeyToTileCoord=Je.prototype.bc;Je.prototype.QuadKeyToMercator=Je.prototype.Vk;Je.prototype.QuadKeyToWGS84=Je.prototype.Wk;var Ke={Oi:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&0<c&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};z("GlobeUtils",Ke);z("GlobeUtils.MakeHierarchicalFilename",Ke.Oi);function Le(){this.qa=s(n);this.tc=s(n);this.Gb=p();this.Kb=s(0);this.Yd=this.Zd=-1;this.sc=s(n)};function Me(){this.u=new Ie;this.j=this.Yb=l;this.fa=new Je;this.coords=Array(4);this.kb=1;this.qa=function(){return this.u.lg};this.tc=function(){return this.u.kg};this.Gb=function(a,b,c,d,e,f){if(this.qa()){var g=this.Yb+"/"+this.j+"/"+Ke.Oi(b+this.u.Ud),a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,Ne,Oe,i)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.sc=function(a){if(a.length>this.u.bb)return n;this.fa.ag(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[2],j=this.u.Va[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?n:i};this.Na=function(a,b,c){this.kb=c==l?1:c;this.Yb=a;this.j=b;this.u.Qf(a+"/"+b+".json")}}Me.prototype=new Le;function Ne(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Oe(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}z("i3dImageLayer",Me);Me.prototype.Failed=Me.prototype.tc;Me.prototype.Ready=Me.prototype.qa;Me.prototype.RequestTile=Me.prototype.Gb;
Me.prototype.Setup=Me.prototype.Na;function Pe(){this.j=this.Sa=l;this.fa=new Je;this.na=0;this.qa=s(i);this.tc=s(n);this.Gb=function(a,b,c,d,e,f){var g={};this.fa.bc(b,g);g=this.Sa[this.na]+"/"+g.gb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,Qe,Re,i);this.na++;this.na>=this.Sa.length&&(this.na=0)};this.Kb=s(16);this.sc=function(a){return 17>a.length?i:n};this.Na=ca("Sa")}Pe.prototype=new Le;function Qe(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}
function Re(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Se(){this.qa=s(n);this.tc=s(n);this.Gb=p();this.Kb=s(0);this.sc=s(n)};function Te(){this.u=new Ie;this.j=this.Yb=l;this.fa=new Je;this.coords=Array(4);this.qa=function(){return this.u.lg};this.tc=function(){return this.u.kg};this.Gb=function(a,b,c,d,e,f){if(this.qa()){var g=this.Yb+"/"+this.j+"_JSON/"+(Ke.Oi(b+".jso")+"n"),a=new N(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;jd(a,g,Ue,Ve)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.sc=function(a){if(a.length>this.u.bb)return n;this.fa.ag(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],d=this.coords[3],
e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[2],j=this.u.Va[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?n:i};this.Na=function(a,b){this.Yb=a;this.j=b;this.u.Qf(a+"/"+b+".json")}}Te.prototype=new Se;function Ue(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Ve(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function We(){this.version=this.style=this.mf=this.j=this.Yb=l;this.kb=1;this.Xa=l;this.fa=new Je;this.qa=s(i);this.tc=s(n);this.Gb=function(a,b,c,d,e,f){-1==this.Yb.indexOf("?",this.Yb.length-1)&&(this.Yb+="?");var g=Array(4);"EPSG%3A4326"==this.Xa?this.fa.Wk(b,g):this.fa.Vk(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Yb+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.Xa+"&LAYERS="+this.j+"&STYLES="+this.style+"&FORMAT="+this.mf+"&VERSION="+this.version+"&BBOX="+g;a=new O(a);
a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;"image/png"==this.mf&&(a.kb=this.kb);Q(a,g,Xe,Ye,i)};this.Kb=s(30);this.sc=function(a){return 31>a.length?i:n};this.Na=function(a,b,c,d,e,f,g){this.Yb=a;this.j=b;this.mf=d;this.style=e;this.version=f;this.kb=g;this.Xa=c;this.mf==l&&(this.mf="image/png");this.style==l&&(this.style="");this.version==l&&(this.version="1.1.1");this.Xa==l&&(this.Xa="EPSG%3A900913");"EPSG:900913"==this.Xa&&(this.Xa="EPSG%3A900913");"ESRI:102100"==this.Xa&&(this.Xa="ESRI%3A102100");"ESRI:102113"==
this.Xa&&(this.Xa="ESRI%3A102113");"EPSG:3785"==this.Xa&&(this.Xa="EPSG%3A3785");"EPSG:3857"==this.Xa&&(this.Xa="EPSG%3A3857");"EPSG:4326"==this.Xa&&(this.Xa="EPSG%3A4326")}}We.prototype=new Le;function Xe(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Ye(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Ze(){this.j=this.Sa=l;this.fa=new Je;this.na=0;this.qa=s(i);this.tc=s(n);this.Gb=function(a,b,c,d,e,f){var g={};this.fa.bc(b,g);var j=Math.pow(2,g.gb),g=this.Sa[this.na]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.gb)+"&key=[KEY]",a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,$e,af,i);this.na++;this.na>=this.Sa.length&&(this.na=0)};this.Kb=s(16);this.sc=function(a){return 17>a.length?i:n};this.Na=ca("Sa")}Pe.prototype=new Le;
function $e(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function af(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function bf(){this.u=new Ie;this.j=this.Yb=l;this.fa=new Je;this.coords=Array(4);this.na=0;this.qa=function(){return this.u.lg};this.tc=function(){return this.u.kg};this.Gb=function(a,b,c,d,e,f){if(this.qa()){var g={};this.fa.bc(b,g);g=this.Sa[this.na]+"/"+this.j+"/tiles/"+g.gb+"/"+g.x+"/"+g.y+".json";a=new N(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;jd(a,g,cf,df);this.na++;this.na>=this.Sa.length&&(this.na=0)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.sc=function(a){if(a.length>this.u.bb)return n;
for(var b=a,c=a,d=0;d<this.u.bb-a.length;d++)b+="0",c+="3";d={};this.fa.bc(b,d);b=d.x;a=d.y;this.fa.bc(c,d);var c=d.x,d=d.y,e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[3];return!(b>this.u.Va[2]||c<e||a>g||d<f)};this.Na=function(a,b){this.Sa=a;this.j=b;this.u.Qf(a[0]+"/"+b+"/layersettings.json")}}bf.prototype=new Se;function cf(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function df(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function ef(){this.j=this.Sa=l;this.fa=new Je;this.sub=this.na=0;this.ho="Galile,Galil,Gali,Gal,Ga,G".split(",");this.qa=s(i);this.tc=s(n);this.Gb=function(a,b,c,d,e,f){var g={};this.fa.bc(b,g);g=this.Sa[this.na]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.gb+"&s="+this.ho[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,Qe,Re,i);this.na++;this.na>=this.Sa.length&&(this.na=0)};this.Kb=s(19);this.sc=function(a){return 20>a.length?i:n};this.Na=ca("Sa")}
ef.prototype=new Pe;function ff(a,b){this.ye=a||-1;this.Bn=b||n;this.Td={};this.ua=0;this.wm=Math.round(0.75*this.ye);this.Yc={};this.Yc.hits=0;this.Yc.misses=0;gf(this,"Initialized cache with size "+a)}ff.prototype.getItem=function(a){var b=this.Td[a];b!=l&&(hf(b)?(jf(this,a),b=l):b.$h=(new Date).getTime());(b=b?b.value:l)?(this.Yc.hits++,gf(this,"Cache HIT for key "+a)):(this.Yc.misses++,gf(this,"Cache MISS for key "+a));return b};
ff.prototype.setItem=function(a,b,c){this.Td[a]!=l&&jf(this,a);kf(this,new function(a,b,c){(a==l||""==a)&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});c.Rh!=l&&(c.Rh=c.Rh.getTime());c.Mg==l&&(c.Mg=2);this.options=c;this.$h=(new Date).getTime()}(a,b,c));gf(this,"Setting key "+a);if(0<this.ye&&this.ua>this.ye){var d=this;setTimeout(function(){d.Zn.call(d)},0)}};ff.prototype.clear=function(){for(var a in this.Td)jf(this,a);gf(this,"Cache cleared")};
ff.prototype.Zn=function(){var a=[],b;for(b in this.Td){var c=this.Td[b];hf(c)?jf(this,b):a.push(c)}if(a.length>this.wm)for(a=a.sort(function(a,b){return a.options.Mg!=b.options.Mg?b.options.Mg-a.options.Mg:b.$h-a.$h});a.length>this.wm;)jf(this,a.pop().key);gf(this,"Purged cached")};function kf(a,b){a.Td[b.key]=b;a.ua++}
function jf(a,b){var c=a.Td[b];delete a.Td[b];a.ua--;gf(a,"removed key "+b);c.options.xn!=l&&setTimeout(function(){c.options.xn.call(l,c.key,c.value)},0);c.k!=l&&setTimeout(function(){c.k()},0)}function hf(a){var b=(new Date).getTime(),c=n;a.options.Rh&&a.options.Rh<b&&(c=i);!c&&a.options.In&&a.$h+1E3*a.options.In<b&&(c=i);return c}function gf(a,b){a.Bn&&J("owg.Cache").info(b)};function lf(a,b,c){a=K(a)-0;b=Math.log(Math.tan(Math.PI/4+K(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function mf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Kc(b);for(a=Kc(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function nf(a,b,c){this.c=a;this.i=b;this.fa=c;this.g=l;this.gc=n;this.o=l;this.Ll=i;this.X=[];this.Ja=Array(5);this.Ja[0]=new L;this.Ja[1]=new L;this.Ja[2]=new L;this.Ja[3]=new L;this.Ja[4]=new L;this.Rd=0;this.images=l;this.mj=n;this.lf=0;this.Eh=new L;this.jb=new M;this.we=-180;this.ue=-90;this.qf=180;this.pf=90;var d=Array(4),e=Array(2);this.fa.ag(this.i,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new R;f=d[0];g=d[1];mf(f,g,e);f=e[0];g=e[1];this.we=f;this.pf=g;j.t(f,g,0);j.ma(a);f=d[2];g=d[1];
mf(f,g,e);f=e[0];g=e[1];j.t(f,g,0);j.ma(b);f=d[2];g=d[3];mf(f,g,e);f=e[0];g=e[1];this.qf=f;this.ue=g;j.t(f,g,0);j.ma(c);d=new L;e=new L;d.t(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.t(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Pc(this.Eh,d,e);this.Eh.vc()}var of=0;
function pf(a){if(0==a.Rd&&0==a.lf){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);0==b?(a.g=a.c.Xj,a.o===l&&qf(a),a.o.dc(a.g),a.gc=i,a.images=l):1==b?(a.g=a.images[c],a.o===l&&qf(a),a.o.dc(a.g),a.gc=i,a.images=l):(a.mj=i,a.o===l&&qf(a),a.gc=i)}}function rf(a,b,c){a=b.caller;a.images[c]=b;a.Rd-=1;pf(a);of--}function sf(a,b,c){0<=c?(b.images[c]=l,b.Rd-=1):(b.images=l,b.Rd=0);pf(b);of--}
function tf(a,b){var c=b.caller;c.o=b;c.o.gb=c.i.length;c.X=b.pa;c.Ja[0].t(b.Q[0],b.Q[1],b.Q[2]);c.Ja[1].t(b.ia[0],b.Q[1],b.Q[2]);c.Ja[2].t(b.ia[0],b.ia[1],b.Q[2]);c.Ja[3].t(b.Q[0],b.ia[1],b.Q[2]);c.Ja[4].t(0.5*(b.ia[0]-b.Q[0]),0.5*(b.ia[1]-b.Q[1]),0.5*(b.ia[2]-b.Q[2]));c.lf-=1;pf(c);of--}function uf(a,b){b.o=l;b.lf-=1;pf(b);of--}nf.prototype.k=function(){this.g&&this.g.k();this.o&&this.o.k()};
function qf(a){a.Ll=n;a.o=new N(a.c);a.o.gb=a.i.length;var b;b=3>a.i.length?2:6>a.i.length?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),m=Array(3);a.fa.ag(a.i,d);g=d[0];j=d[1];for(var o=(d[3]-j)/(b-1),r=(d[2]-g)/(b-1),q,u,v,y=new R,d=0;d<b;d++)for(e=0;e<b;e++)q=g+e*r,u=j+d*o,mf(q,u,k),y.t(k[0],k[1],0),y.ma(m),q=m[0],u=m[1],v=m[2],0==e&&0==d&&(a.X=[q,u,v]),0==e&&0==d?a.Ja[0].t(q,u,v):e==b-1&&0==d?a.Ja[1].t(q,
u,v):e==b-1&&d==b-1?a.Ja[2].t(q,u,v):0==e&&d==b-1?a.Ja[3].t(q,u,v):e==(b-1)/2&&d==(b-1)/2&&a.Ja[4].t(q,u,v),f.push(q-a.X[0]),f.push(u-a.X[1]),f.push(v-a.X[2]);g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],B,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,B=e+1,o=0==j%2?m=b-1-d:m=d,B+=o*b,c[f++]=k+m*b,c[f++]=B;c[f++]=B;j+=1}dd(a.o,g);gd(a.o,c,"TRIANGLESTRIP");a.o.dc(a.g);a.o.pa=a.X;kd(a.o)}
nf.prototype.Wa=function(a){if(!(3>this.i.length)){if(a){if(this.jb.ba(this.c.vb),this.jb.a[12]+=this.X[0],this.jb.a[13]+=this.X[1],this.jb.a[14]+=this.X[2],this.c.ac(),this.c.cc(this.jb),a=this.o,a.qa){a.V==l&&a.Gd();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.V);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.ub);a.la&&(a.c.ac(),a.vd.da(a.la,a.c.vb),a.c.cc(a.vd));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,12,0);hd(a.c.Ta,a.c.ka,a.zd);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,n,32,24);hd(a.c.Ta,a.c.ka,a.zd);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,n,28,12);hd(a.c.Ta,a.c.ka,a.zd);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,
3,a.b.FLOAT,n,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,n,20,12);hd(a.c.Ta,a.c.ka,a.zd);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,n,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,n,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,n,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,n,48,40),hd(a.c.Ta,a.c.ka,a.zd)}switch(a.rd){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.Ib,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.Ib,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.mj){this.mj=n;a=this.g=new O(this.c,i,256,256);this.c.ge.push(a);a.fg();for(a=0;a<this.images.length;a++)this.images[a]!=l&&(1>this.images[a].kb?this.images[a].B(0,0,0,0,1,1,i,i,this.images[a].kb):this.images[a].B(0,0,0,0,1,1,i,i,1));Be(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].k();this.images=l;this.o.dc(this.g)}this.jb.ba(this.c.vb);this.jb.a[12]+=this.X[0];this.jb.a[13]+=this.X[1];this.jb.a[14]+=this.X[2];this.c.ac();this.c.cc(this.jb);this.c.f.G.Qa.dk==vf?this.o.mode="pt":this.c.f.G.Qa.dk==wf&&(this.o.mode="pt_chroma");this.o.ha()}this.c.Pc()}};function xf(a,b,c,d,e){this.c=a;this.ja=b;this.tb=c;this.fa=d;this.Ih=new ff(e,n);this.hk={};this.hk.om=0}xf.prototype.k=function(){this.fa=this.tb=this.ja=this.c=l;this.Ih.clear();this.Ih=l};xf.prototype.Qk=function(){if(!this.ja||0==this.ja.length)return n;for(var a=0;a<this.ja.length;a++)if(!this.ja[a].qa())return n;if(this.tb)for(a=0;a<this.tb.length;a++)if(!this.tb[a].qa())return n;return i};
xf.prototype.dd=function(a){var b=this.Ih.getItem(a);if(b==l){this.hk.om++;var c=b=new nf(this.c,a,this.fa),d=this.ja,e=this.tb;if(3>c.i.length)sf(0,c,-1);else{if(0<d.length){c.Rd=d.length;c.images=Array(c.Rd);for(var f=0;f<d.length;f++){c.images[f]=l;var g=c.i.length,g=(g<=d[f].Yd||-1==d[f].Yd)&&(g>=d[f].Zd||-1==d[f].Zd);d[f].sc(c.i)&&g?(d[f].Gb(c.c,c.i,f,rf,sf,c),of++):sf(0,c,f)}}e&&0<e.length&&8<c.i.length&&e[0].sc(c.i)&&(c.lf=1,e[0].Gb(c.c,c.i,0,tf,uf,c),of++)}this.Ih.setItem(a,b)}return b};
xf.prototype.Kb=function(){var a=0,b=0;if(0<this.tb.length)for(var c=0;c<this.tb.length;c++)b=Math.max(b,this.tb[c].Kb());for(c=0;c<this.ja.length;c++)a=Math.max(a,this.ja[c].Kb());return 0<b?Math.min(b,a):a};z("GlobeCache",xf);xf.prototype.IsReady=xf.prototype.Qk;xf.prototype.RequestBlock=xf.prototype.dd;function yf(){this.u=new Ie;this.j=l;this.fa=new Je;this.coords=Array(4);this.kb=1;this.na=0;this.qa=function(){return this.u.lg};this.tc=function(){return this.u.kg};this.Gb=function(a,b,c,d,e,f){if(this.qa()){var g={};this.fa.bc(b,g);g=this.Sa[this.na]+"/"+this.j+"/tiles/"+g.gb+"/"+g.x+"/"+g.y+this.u.Ud;a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,zf,Af,i);this.na++;this.na>=this.Sa.length&&(this.na=0)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.sc=function(a){if(a.length>
this.u.bb)return n;for(var b=a,c=a,d=0;d<this.u.bb-a.length;d++)b+="0",c+="3";d={};this.fa.bc(b,d);b=d.x;a=d.y;this.fa.bc(c,d);var c=d.x,d=d.y,e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[3];return!(b>this.u.Va[2]||c<e||a>g||d<f)};this.Na=function(a,b,c){this.kb=c==l?1:c;this.Sa=a;this.j=b;this.u.Qf(a[0]+"/"+b+"/layersettings.json")}}yf.prototype=new Le;function zf(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Af(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}
z("owgImageLayer",yf);yf.prototype.Failed=yf.prototype.tc;yf.prototype.Ready=yf.prototype.qa;yf.prototype.RequestTile=yf.prototype.Gb;yf.prototype.Setup=yf.prototype.Na;function Bf(){this.kb=1;this.Gb=function(a,b,c,d,e,f){var g={};this.fa.bc(b,g);g.y=Math.pow(2,g.gb)-1-g.y;g=this.Sa[this.na]+"/"+g.gb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,Qe,Re,i)}}Bf.prototype=new Pe;function Cf(a){this.c=a;this.ja=[];this.tb=[];this.fa=new Je;this.wn=1E3;this.Ga=l;this.C=[];this.Rl=0;this.xg={};this.xg.Kh=0;this.mg=l;this.Sj=0;this.xm=1;this.Od=new Ee;this.aa=Array(3);this.Rj=new M;this.Ae=new N(this.c);this.Ke=new N(this.c);this.Be=[8/255,24/255,58/255];this.Le=[1,1,1];this.ck=1;this.dk=vf}t=Cf.prototype;t.k=function(){this.Ga&&(this.Ga.k(),this.Ga=l);this.Ae&&(this.Ae.k(),this.Ae=l);this.Ke&&(this.Ke.k(),this.Ke=l)};
t.Ci=function(a){var b=-1;if(x(a.service))if("i3d"==a.service){if(x(a.url)&&x(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new Me;x(a.minlod)&&(d.Zd=a.minlod);x(a.maxlod)&&(d.Yd=a.maxlod);d.Na(b,c,a.transparency);b=this.ja.length;this.ja.push(d);Df(this)}}else"osm"==a.service?x(a.url)&&0<a.url.length&&(d=new Pe,x(a.minlod)&&(d.Zd=a.minlod),x(a.maxlod)&&(d.Yd=a.maxlod),d.Na(a.url),b=this.ja.length,this.ja.push(d),Df(this)):"tms"==a.service?x(a.url)&&0<a.url.length&&(d=new Bf,x(a.minlod)&&(d.Zd=
a.minlod),x(a.maxlod)&&(d.Yd=a.maxlod),d.Na(a.url),b=this.ja.length,this.ja.push(d),Df(this)):"wms"==a.service?x(a.url)&&0<a.url.length&&x(a.layer)&&0<a.layer.length&&(d=new We,x(a.format)&&(d.mf=a.format),x(a.style)&&(d.style=a.style),x(a.version)&&(d.version=a.version),d.Na(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.ja.length,this.ja.push(d),Df(this)):"owg"==a.service?x(a.url)&&0<a.url.length&&(c=a.layer,d=new yf,x(a.minlod)&&(d.Zd=a.minlod),x(a.maxlod)&&(d.Yd=a.maxlod),
d.Na(a.url,c,a.transparency),b=this.ja.length,this.ja.push(d),Df(this)):"goo"==a.service?x(a.url)&&0<a.url.length&&(d=new ef,x(a.minlod)&&(d.Zd=a.minlod),x(a.maxlod)&&(d.Yd=a.maxlod),d.Na(a.url),b=this.ja.length,this.ja.push(d),Df(this)):"oym"==a.service&&x(a.url)&&0<a.url.length&&(d=new Ze,x(a.minlod)&&(d.Zd=a.minlod),x(a.maxlod)&&(d.Yd=a.maxlod),d.Na(a.url),b=this.ja.length,this.ja.push(d),Df(this));return b};
t.Bi=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new Te;c.Na(a.url[0],b);b=this.tb.length;this.tb.push(c);Df(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new bf;c.Na(d,b);b=this.tb.length;this.tb.push(c);Df(this)}return b};t.nh=function(a){0>a||a>=this.ja.length||(this.ja.splice(a,1),Df(this))};function Df(a){a.Ga&&(a.Ga.k(),a.Ga=l);a.Ga=new xf(a.c,a.ja,a.tb,a.fa,a.wn)}
t.Wa=function(a,b){this.Ga.hk.om=0;this.Rj.ba(b);this.Od.xh(b);this.mg=a;if(this.Ga&&this.Ga.Qk()){this.Sj=this.Ga.Kb();var c=this.Ga.dd("0"),d=this.Ga.dd("1"),e=this.Ga.dd("2"),f=this.Ga.dd("3");if(c.gc&&d.gc&&e.gc&&f.gc){this.C=[];this.C.push(c);this.C.push(d);this.C.push(e);this.C.push(f);for(this.xg.Kh=0;this.xg.Kh!=this.C.length;)a:{c=this.xg.Kh;if(this.C[c].i.length!=this.Sj&&this.C[c].gc&&Ef(this,c)){var g=this.C[c].i,d=this.Ga.dd(g+"0"),e=this.Ga.dd(g+"1"),f=this.Ga.dd(g+"2"),g=this.Ga.dd(g+
"3");if(d.gc&&e.gc&&f.gc&&g.gc){this.C.splice(c,1);this.C.push(d);this.C.push(e);this.C.push(f);this.C.push(g);break a}}this.xg.Kh++}for(c=0;c<this.C.length;)e=this.C[c],d=e.Ja[4].a,e=e.Eh.a,f=this.mg.a,this.aa[0]=f[0]-d[0],this.aa[1]=f[1]-d[1],this.aa[2]=f[2]-d[2],0.4<=(this.aa[0]*e[0]+this.aa[1]*e[1]+this.aa[2]*e[2])/Math.sqrt(this.aa[0]*this.aa[0]+this.aa[1]*this.aa[1]+this.aa[2]*this.aa[2])?this.C.splice(c,1):c++;for(c=0;c<this.C.length;c++)this.C[c].Wa(n);d=[];e=[];for(c=0;c<this.C.length;c++){var f=
this.C[c].i,g=0,j=f.charAt(0);if("0"==j||"1"==j)g=1;if("2"==j||"3"==j)g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if(("0"==j||"1"==j)&&"2"==g){g=0;break}if(("2"==j||"3"==j)&&"1"==g){g=0;break}}1==g&&d.push(this.C[c]);2==g&&e.push(this.C[c])}3<d.length&&Ff(this,d);3<e.length&&Gf(this,e)}}};
function Ef(a,b){var c=i,d=a.C[b],e=d.i.length;if(e>a.Sj)return n;if(3>e)return i;c=a.Od.wh(d.o.Q[0],d.o.Q[1],d.o.Q[2],d.o.ia[0],d.o.ia[1],d.o.ia[2]);if(!c)return n;var f=d.Ja[4].a,g=d.Eh.a,e=a.mg.a;a.aa[0]=e[0]-f[0];a.aa[1]=e[1]-f[1];a.aa[2]=e[2]-f[2];f=Math.sqrt(a.aa[0]*a.aa[0]+a.aa[1]*a.aa[1]+a.aa[2]*a.aa[2]);0<f&&(a.aa[0]/=f,a.aa[1]/=f,a.aa[2]/=f);0.4<a.aa[0]*g[0]+a.aa[1]*g[1]+a.aa[2]*g[2]&&(c=n);if(!c)return n;for(var c=[0,0,0],g=0,f=1.0E20,j=d.o.r.length/d.o.M,k=0;k<j;k++)c[0]=e[0]-(d.o.r[5*
k]+d.X[0]),c[1]=e[1]-(d.o.r[5*k+1]+d.X[1]),c[2]=e[2]-(d.o.r[5*k+2]+d.X[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.xm;g=d.Ja[0].Mf();g.$i(d.Ja[1]);return 1<c*g.Li()/e}
t.ee=function(a,b,c){for(var b=this.c.ce(a,b,this.Rj,i),d=[],e=a=0;e<this.C.length;e++){var f=this.C[e].o.Q,g=this.C[e].o.ia;this.C[e].o.Fh.Tf(b.x,b.y,b.n,b.nd,b.od,b.pd,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.C[e])}f=1.0E20;c.hit=n;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].o.Fd(b.x,b.y,b.n,b.nd,b.od,b.pd))&&g.w<f)c.hit=i,f=g.w,a=d[e].Ll?0:1;c.tmin=f;c.hit&&(c.x=b.x+f*b.nd,c.y=b.y+f*b.od,c.z=b.n+f*b.pd,b=new R(0,0,0),b.Nc(c.x,c.y,c.z),c.lng=b.H[0],c.lat=b.H[1],c.elv=b.H[2],1==a&&(c.elv=
0))};t.mh=function(a,b,c,d){if(d)if(d={},this.ee(a,b,d),d.hit)this.ck=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.ce(a,b,this.Rj,i);c.hit=n;var f=e.x,b=e.y,a=e.n,g=e.nd,d=e.od,e=e.pd,j=g*g+d*d+e*e,k=f*g+b*d+a*e,m=k*k-j*(f*f+b*b+a*a-this.ck*this.ck);0>=m||(j=(0-k-Math.sqrt(m))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=i,c.x=f*d,c.y=b*d,c.z=a*d,a=new R(0,0,0),a.Nc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
t.dh=function(a,b){var c={hasvalue:n,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new R(a,b,0);f.ma(e);f.t(a,b,-1);f.ma(d);var g,j,f=d[0];g=d[1];j=d[2];for(var k=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+m*m+d*d),k=k/e,m=m/e,d=d/e,e=[],o=0;o<this.C.length;o++){var r=this.C[o].o.Q,q=this.C[o].o.ia;this.C[o].o.Fh.Tf(f,g,j,k,m,d,r[0],r[1],r[2],q[0],q[1],q[2])&&e.push(this.C[o])}r=1.0E20;for(o=0;o<e.length;o++)if((q=e[o].o.Fd(f,g,j,k,m,d))&&q.w<r)c.hasvalue=i,c.lod=e[o].o.gb,r=q.w;c.hasvalue&&(c.x=
f+r*k,c.y=g+r*m,c.z=j+r*d,f=new R(0,0,0),f.Nc(c.x,c.y,c.z),c.lng=f.H[0],c.lat=f.H[1],c.elevation=f.H[2]);return c};
function Ff(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++)for(b[d].yb=b[d].i;b[d].yb.length<c;)b[d].yb+="0";b.sort(function(a,b){return parseInt(a.yb,2)-parseInt(b.yb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Be[0],a.Be[1],a.Be[2],1],e=[],d=0;d<b.length;d++)for(var f=2;0==b[d].o.r[f];)c.push(b[d].X[0]+b[d].o.r[f-2]),c.push(b[d].X[1]+b[d].o.r[f-1]),c.push(b[d].X[2]+b[d].o.r[f]),c.push(a.Be[0]),c.push(a.Be[1]),c.push(a.Be[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Ae.k();a.Ae=new N(a.c);a.Ae.Mc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Ae.ha()}
function Gf(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++){b[d].yb=b[d].i;b[d].yb=b[d].yb.replace(/2/g,"0");for(b[d].yb=b[d].yb.replace(/3/g,"1");b[d].yb.length<c;)b[d].yb+="0"}b.sort(function(a,b){return parseInt(b.yb,2)-parseInt(a.yb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Le[0],a.Le[1],a.Le[2],1],e=[],d=0;d<b.length;d++)for(var f=b[d].o.r.length,f=f-1;0==b[d].o.r[f];)c.push(b[d].X[0]+b[d].o.r[f-4]),c.push(b[d].X[1]+b[d].o.r[f-
3]),c.push(b[d].X[2]+b[d].o.r[f-2]),c.push(a.Le[0]),c.push(a.Le[1]),c.push(a.Le[2]),c.push(1),f-=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Ke.k();a.Ke=new N(a.c);a.Ke.Mc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Ke.ha()}
t.$g=function(){if(!this.mg)return NaN;var a=[],b=this.mg.a,c=new L;if(0==this.tb.length)return c=new R,c.Nc(b[0],b[1],b[2]),c.H[2];c.t(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.C.length;d++){var e=this.C[d].o.Q,f=this.C[d].o.ia;this.C[d].o.Fh.Tf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.C[d])}e=1.0E20;f=n;for(d=0;d<a.length;d++){var g=a[d].o.Fd(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.w<e&&(f=i,e=g.w)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=8388607*Math.sqrt(b*b+a*a+c*
c),0>e&&(b=-b),this.Rl=b):this.Rl};t.th=ca("dk");var vf=0,wf=1;function Hf(a){this.c=a;this.W=[]}
Hf.prototype.Wa=function(){for(var a=0;a<this.W.length;a++){var b=new M;b.ba(this.c.vb);b.a[12]+=this.W[a].X[0];b.a[13]+=this.W[a].X[1];b.a[14]+=this.W[a].X[2];this.c.ac();this.c.cc(b);var b=this.W[a],c=this.W[a],d=this.c.b;d.colorMask(n,n,n,n);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(n);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ha();d.stencilOp(d.KEEP,d.KEEP,d.DECR);
d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ha();d.depthMask(i);d.colorMask(i,i,i,i);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(i);for(e=0;e<c.length;e++)c[e].ha();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ha();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Pc()}};
Hf.prototype.Ck=function(a){this.W.push(a);return this.W.length-1};Hf.prototype.oh=function(a){this.W.splice(a,1)};function If(){this.name="ogGeometry";this.type=Na;this.wb=[];this.sf=[];this.wa=-1;this.F=n;this.sd="";this.options=this.yc=this.ld=l;this.ve=-1;this.qm=this.xd=l}If.prototype=new F;t=If.prototype;t.ya=function(a){this.options=a;a.url&&Jf(this,a.url);a.jsonobject&&this.Mc(a.jsonobject);"EarthPolyline"==a.type&&(this.qm=X(bb,this,this.options),this.wa=Kf(this).ae(this.qm.Nd))};t.Oa=function(){Kf(this).Wi(this.wa);if(this.xd!=l)G(this.xd);else{for(var a=0;a<this.wb.length;a++)G(this.wb[a]);this.$=l}};
function Kf(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.Vh);return b}t.Ed=function(a,b,c,d,e,f){for(var g=0;g<this.wb.length;g++)this.wb[g].Ed(a,b,c,d,e,f)};t.cg=function(a,b,c,d){for(var e=0;e<this.wb.length;e++)this.wb[e].cg(a,b,c,d)};t.ca=function(){if(this.xd!=l)this.xd.ca();else for(var a=0;a<this.wb.length;a++)this.wb[a].ca()};t.ea=function(){if(this.xd!=l)this.xd.ea();else for(var a=0;a<this.wb.length;a++)this.wb[a].ea()};
t.he=function(a,b,c,d){if(this.xd==l)for(var e=0;e<this.wb.length;e++)this.wb[e].he(a,b,c,d)};t.dj=function(){4==this.N.readyState&&(404==this.N.status?this.yc&&this.yc(this.id):this.Mc($c(this.N.responseText)))};
t.Mc=function(a){if("pointcloud"==a.Type)this.options=a,this.xd=X(ab,this,this.options),a=Kf(this),this.wa=a.ae(this.xd.Gc);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(Oa,this,this.options);this.wb.push(c);this.sf.push(c.Jc)}this.ld&&this.ld(this.id);a=Kf(this);this.wa=a.ae(this.sf)}};function Jf(a,b){b==l?alert("invalid json-url"):(a.sd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.sd,i),a.N.onreadystatechange=function(){a.dj()},a.N.send())};function Lf(a){this.c=a;this.$=[];this.Od=new Ee}
Lf.prototype.Wa=function(a,b){this.Od.xh(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.$.length;f++)if(this.$[f]instanceof pd){var g=this.$[f];g.F||g.ha()}else if(this.$[f]instanceof Mf)g=this.$[f],g.F||g.ha();else for(var g=this.$[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var o=k[m];if(!o.F){var r=o.Q[0]-c,q=o.Q[1]-d,u=o.Q[2]-e,r=r*r+q*q+u*u,q=o.Tm*o.Tm;this.Od.wh(o.Q[0],o.Q[1],o.Q[2],o.ia[0],o.ia[1],o.ia[2])&&!(r>q)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),o.ha(),this.c.b.disable(this.c.b.BLEND))}}};Lf.prototype.ae=function(a){this.$.push(a);return this.$.length-1};Lf.prototype.Wi=function(a){this.$.splice(a,1)};
Lf.prototype.fe=function(a,b){for(var c=this.c.ce(a,b,this.c.ka,i),d=1E4,e=l,f=0;f<this.$.length;f++)for(var g=this.$[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var o=k[m];if(!o.F){o.kl(c.x,c.y,c.n,c.nd,c.od,c.pd);var r=o.Fd(c.x,c.y,c.n,c.nd,c.od,c.pd);r&&r.w<d&&(d=r.w,e=o)}}return e?e.Un:-1};function Nf(){this.Qa=l;this.qb=new L;this.lk=this.lj=this.Hh=this.Vh=this.gi=l;this.nj=i;this.g=l;this.elevation=this.ik=0;this.ad=p();this.bd=function(){if(this.nj){var a=this.g;this.c.ge.push(a);a.fg();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}this.Qa.Wa(this.qb,this.c.ka);this.lk.Wa(this.qb,this.c.ka);this.gi.Wa(this.qb,this.c.ka);this.Vh.Wa(this.qb,this.c.ka);this.Hh.Wa(this.qb,this.c.ka);
this.lj.Wa(this.qb,this.c.ka);if(this.nj){Be(this.c);var a=this.g.width/(this.g.width+10),b=this.g.height/(this.g.height+10);0==this.ik?(1E4<this.elevation&&this.g.B(10,10,0,0,a,b,i,i,1),this.g.B(0,0,0,0,1,1,i,i,1)):1==this.ik?(this.g.B(10,this.g.height/2+5,0,0,a,b/2,i,i,1),this.g.B(0,this.g.height/2,0,0,1,0.5,i,i,1)):2==this.ik&&(this.g.B(10,5,0,0,a,b/2,i,i,1),this.g.B(0,0,0,0,1,0.5,i,i,1))}};this.cd=function(a){var b=a.de();this.qb.t(b.x,b.y,b.n);this.elevation=a.Pb.elevation};this.Te=function(){this.Qa=
new Cf(this.c);this.lk=new Hf(this.c);this.gi=new De(this.c);this.Vh=new Lf(this.c);this.Hh=new Fe(this.c);this.lj=new Ce(this.c)};this.Se=function(){this.Qa.k();this.Qa=l};this.Lk=function(a,b){this.nj&&(this.g==l?this.g=new O(this.c,i,a,b,i):nd(this.g,a,b,i))};this.Ue=p()}Nf.prototype=new fe;function Of(a){this.Fn=a;this.Tl=T(this.Fn,Db?"DOMMouseScroll":"mousewheel",this)}Ba(Of,he);var Pf="mousewheel";
Of.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.qd;if("mousewheel"==a.type){c=1;if(Cb||Eb&&(Hb||Qb("532.0")))c=40;d=Eb&&xb&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;x(a.wheelDeltaX)?(b=Eb&&xb&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Eb&&xb&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),x(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.Wl&&Math.min(Math.max(b,-this.Wl),this.Wl);"number"==typeof this.Xl&&
(c=Math.min(Math.max(c,-this.Xl),this.Xl));b=new Qf(d,a,0,c);try{this.dispatchEvent(b)}finally{b.re()}};Of.prototype.Rc=function(){Of.Me.Rc.call(this);Sd(this.Tl);delete this.Tl};function Qf(a,b,c,d){b&&this.Tc(b,h);this.type=Pf;this.detail=a;this.Ph=d}Ba(Qf,Fd);function Rf(){this.hb=new M;this.ig=new L;this.ig.t(1,0,0);this.Y=0;this.U=-0.03;this.wc=0;this.T=7.616;this.S=45.9088;this.A=17E3;this.bf=this.af=this.Ch=this.Dh=0;this.ej=this.hg=this.ol=this.nl=this.fd=1;this.ec=this.fc=0;this.je=n;this.pb=this.ob=0;this.cf=new L;this.kj=this.jj=0;this.zh=this.ie=n;this.ga=Array(3);this.De=new R(0,0,0);this.rf=new M;this.Dg=new M;this.Bg=new M;this.xe=new M;this.hb=new M;this.ud=new M;this.Cg=new M;this.xe.ah();this.Wc=100;this.zb=l;this.Ni=ca("zh");this.ad=function(){this.c.Zi(this.hb)};
this.bd=p();this.cd=function(a){a.Xc=0;this.De.t(this.T,this.S,this.A);this.De.ma(this.ga);this.ig.t(this.ga[0],this.ga[1],this.ga[2]);this.Dg.ed(this.ga[0],this.ga[1],this.ga[2]);this.Bg.be(this.T,this.S);this.rf.Di(this.Y,this.U,this.wc);this.ud.da(this.Dg,this.Bg);this.Cg.da(this.ud,this.rf);this.ud.da(this.Cg,this.xe);this.hb.Qe(this.ud);a.zl=this.Y;a.ta(this.ga[0],this.ga[1],this.ga[2]);var b=this.S,c=this.A;a.Pb.longitude=this.T;a.Pb.latitude=b;a.Pb.elevation=c;this.zb&&(this.zb.Vc=this.T,this.zb.Uc=
this.S,this.zb.Sc=this.A,this.zb.pitch=57.29577951308232*this.U,this.zb.La=57.29577951308232*this.Y,this.zb.pc=57.29577951308232*this.wc)};this.Te=p();this.Se=p();this.Ue=function(a){T(window,zd,this.Pi,n,this);T(window,Ad,this.Qi,n,this);T(a,wd,this.Vf,n,this);T(a,xd,this.Xf,n,this);T(a,yd,this.Wf,n,this);a=new Of(a);T(a,Pf,this.Si,n,this)};this.Si=function(a){0<a.Ph?0<this.ec?this.fc=this.ec=0:this.fc+=0.05:0<this.fc?this.ec=this.fc=0:this.ec+=0.05};this.Pi=function(a){81==a.keyCode?this.bf=this.fd*
this.ej:65==a.keyCode?this.bf=-this.fd*this.ej:83==a.keyCode?this.af=0.5*this.hg:88==a.keyCode&&(this.af=-0.5*this.hg)};this.Qi=function(a){81==a.keyCode?this.bf=0:65==a.keyCode?this.bf=0:83==a.keyCode?this.af=0:88==a.keyCode&&(this.af=0)};this.Vf=function(a){Kd(a,Gd)&&(this.cf.t(0,0,0),this.jj=a.offsetX,this.kj=a.offsetY,this.ie=i);this.ob=a.offsetX;this.pb=a.offsetY;if(Kd(a,Hd))return n};this.Xf=function(a){Kd(a,Gd)&&(this.ie=n);this.ob=a.offsetX;this.pb=a.offsetY;this.Dh=this.Ch=0;if(Kd(a,Hd))return n};
this.Wf=function(a){this.ob=a.offsetX;this.pb=a.offsetY;if(this.ie){var b=(this.jj-a.offsetX)/this.c.width,c=(this.kj-a.offsetY)/this.c.height,b=b*b,c=c*c;this.cf.t(a.offsetX-this.jj,this.c.height-1-a.offsetY-(this.c.height-1-this.kj),0);this.cf.vc();var a=this.cf.a[0],d=this.cf.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);this.Ch=this.fd*this.nl*c*f;this.Dh=this.ol*b*e}};this.Ve=function(a){var b=this.af*a/500,c=this.Dh*a/500,d=this.bf*a,e=0,e=0,f=this.A/5E5*(this.A/5E5);10<f?f=10:0.0010>
f&&(f=0.0010);var g=f*this.Ch*a/250;if(0<this.fc){var j=0.5*this.hg*a/1E3;this.U+=j;this.fc-=j;0>this.fc&&(this.U+=this.fc,this.fc=0);this.je=i}0<this.ec&&(j=0.5*this.hg*a/1E3,this.U-=j,this.ec-=j,0>this.ec&&(this.U-=this.ec,this.ec=0),this.je=i);b&&(this.U+=b,this.je=i);c&&(this.Y+=c,this.Y>2*Math.PI&&(this.Y-=2*Math.PI),0>this.Y&&(this.Y=2*Math.PI-this.Y),this.je=i);this.je&&(e=this.c.$g(),isNaN(e)&&(e=this.Wc));d&&(a=1E3*d*f,this.A+=a,e+=a,7E6<this.A&&(this.A=7E6));if(g){a=0.017453292519943295*
this.S;d=Math.sin(a);f=Math.cos(a);c=this.Y;b=0.017453292519943295*this.T;d=Hc/Math.sqrt(1-Ic*d*d);f=Hc/(d/(1+Jc*f*f))*g*Math.cos(c);j=Hc/d*g*Math.sin(c)/Math.cos(a);g=Hc/d*g*Math.sin(c)*Math.tan(a)+c;this.T=57.29577951308232*(j+b);this.S=57.29577951308232*(f+a);for(this.Y=g;180<this.T;)this.T-=360;for(;-180>this.T;)this.T+=360;for(;90<this.S;)this.S=180-this.S;for(;-90>this.S;)this.S=-180-this.S;this.je=i}e<this.Wc&&this.je&&(this.A+=this.Wc-e);this.zb&&(this.zb.Vc=this.T,this.zb.Uc=this.S,this.zb.Sc=
this.A,this.zb.pitch=57.29577951308232*this.U,this.zb.La=57.29577951308232*this.Y,this.zb.pc=57.29577951308232*this.wc)}}Rf.prototype=new fe;t=Rf.prototype;t.ta=function(a,b,c){this.T=a;this.S=b;this.A=c};t.de=function(){return{longitude:this.T,latitude:this.S,elevation:this.A}};t.We=function(a,b,c){this.Y=a;this.U=b;this.wc=c};t.rh=p();t.Sf=function(){return{La:this.Y,pitch:this.U,pc:this.wc}};function Sf(){this.hb=new M;this.zh=this.Hd=n;this.ig=new L;this.ig.t(1,0,0);this.Y=0;this.U=-1.5707963267948966;this.wc=0;this.T=7.77442050946391;this.S=47.472720418012834;this.A=75E5;this.Id=Tf;this.bf=this.af=this.Ch=this.Dh=this.hj=this.ij=this.gj=this.fj=this.v=0;this.ej=this.hg=this.ol=this.nl=this.fd=1;this.ec=this.fc=0;new M;this.pb=this.ob=0;this.cf=new L;this.cj=this.Ah=this.ie=n;this.ga=Array(3);this.De=new R(0,0,0);this.rf=new M;this.Dg=new M;this.Bg=new M;this.xe=new M;this.hb=new M;
this.ud=new M;this.Cg=new M;this.xe.ah();this.Bh=n;this.sl=this.rl=this.ql=0;this.pl=1;this.$e=n;this.nb={};this.mb={};this.bj=new M;this.ml=new M;this.yh=new M;new M;new M;this.Wc=50;this.ci=1E7;this.cb=Rc;this.Ea=0;this.ff=n;this.zc=[0,0];this.md=0;this.Gh=this.Qc=n;this.Ni=function(a){a||(this.Hd=n);this.zh=a};this.ad=function(){this.c.Zi(this.hb)};this.bd=p();this.cd=function(a){2E3>this.A?(this.c.f.Qb.Wj=1.0E-7,this.c.f.Qb.Aj=1.2):(this.c.f.Qb.Wj=1.0E-5,this.c.f.Qb.Aj=10);this.cb=a.cb;this.Ea=
a.Ea;a.ff=this.ff;a.zc[0]=this.zc[0];a.zc[1]=this.zc[1];a.Xc=1;this.Hd=this.zh?i:0!=a.mm?i:n;if(this.Id==Uf&&!this.Hd&&!this.c.Pa.Sd&&(this.Ah&&(this.Ah=n,this.vn(this.ob,this.pb)),this.ie&&this.cj))this.cj=n,this.un(this.ob,this.pb);this.De.t(this.T,this.S,this.A);this.De.ma(this.ga);this.ig.t(this.ga[0],this.ga[1],this.ga[2]);this.Dg.ed(this.ga[0],this.ga[1],this.ga[2]);this.Bg.be(this.T,this.S);this.Bh?(this.rf.bh(this.ql,this.rl,this.sl,this.pl),this.xe.Ek()):this.rf.Di(this.Y,this.U,this.wc);
this.ud.da(this.Dg,this.Bg);this.Cg.da(this.ud,this.rf);this.ud.da(this.Cg,this.xe);this.hb.Qe(this.ud);a.zl=this.Y;a.ta(this.ga[0],this.ga[1],this.ga[2]);var b=this.S,c=this.A;a.Pb.longitude=this.T;a.Pb.latitude=b;a.Pb.elevation=c};this.Te=p();this.Se=p();this.Ue=function(a){T(window,zd,this.Pi,n,this);T(window,Ad,this.Qi,n,this);T(a,wd,this.Vf,n,this);T(a,yd,this.Wf,n,this);T(a,xd,this.Xf,n,this);T(a,vd,this.Ri,n,this);a=new Of(a);T(a,Pf,this.Si,n,this)};this.gg=function(){var a=Tf;(this.v&Vf)==
Wf&&(0==(this.v&Xf)?a=Uf:(this.v&Xf)==Yf?a=Zf:(this.v&Xf)==$f&&(a=ag));(this.v&Vf)==bg&&(a=ag);if(a!=this.Id&&(this.Id==ag&&(this.Y=this.ij+45*Math.PI*this.fd*(this.ob-this.fj)/(180*this.c.height),this.U=this.hj+45*Math.PI*this.fd*(this.gj-this.pb)/(180*this.c.height)),this.Id=a,this.Id==ag))this.fj=this.ob,this.gj=this.pb,this.ij=this.Y,this.hj=this.U;this.Id==ag&&(this.Y=this.ij+45*Math.PI*this.fd*(this.ob-this.fj)/(180*this.c.height),this.U=this.hj+45*Math.PI*this.fd*(this.gj-this.pb)/(180*this.c.height))};
this.Si=function(a){if(this.Hd||this.c.Pa.Sd)this.md=0;else{if(this.Id==Tf)if(0==(this.v&Xf)){var b={},c,d;0<this.md?(c=this.zc[0],d=this.zc[1]):(c=this.ob,d=this.pb);this.c.ee(c,d,b);if(b.hit){this.zc=[c,d];this.md=500;this.De.t(this.T,this.S,this.A);this.De.ma(this.ga);c=this.ga[0]-b.x;d=this.ga[1]-b.y;b=this.ga[2]-b.z;0<a.Ph?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new R(0,0,0);e.Nc(this.ga[0]+c,this.ga[1]+d,this.ga[2]+b);this.T=e.H[0];this.S=e.H[1];this.Gh?e.H[2]>this.A&&(this.A=
e.H[2]):this.A=e.H[2];this.Qc=i;this.A<this.Wc?(this.A=this.Wc,this.Qc=i):this.A>this.ci&&(this.A=this.ci,this.Qc=i)}}else(this.v&Xf)==Yf&&(this.U+=5*a.Ph*Math.PI*this.fd/180);return this.Ya(a)}};this.Pi=function(a){if(!this.Hd&&!this.c.Pa.Sd){66==a.keyCode&&(this.Bh=n);if(16==a.keyCode)return this.v|=Yf,this.Ya(a);if(17==a.keyCode)return this.v|=$f,this.Ya(a);if(37==a.keyCode||65==a.keyCode)return this.v|=cg,this.Ya(a);if(38==a.keyCode||87==a.keyCode)return this.v|=dg,this.Ya(a);if(39==a.keyCode||
68==a.keyCode)return this.v|=eg,this.Ya(a);if(40==a.keyCode||83==a.keyCode)return this.v|=fg,this.Ya(a);this.gg();return i}};this.Qi=function(a){if(16==a.keyCode)return this.v&=~Yf,this.Ya(a);if(17==a.keyCode)return this.v&=~$f,this.Ya(a);if(37==a.keyCode||65==a.keyCode)return this.v&=~cg,this.Ya(a);if(38==a.keyCode||87==a.keyCode)return this.v&=~dg,this.Ya(a);if(39==a.keyCode||68==a.keyCode)return this.v&=~eg,this.Ya(a);if(40==a.keyCode||83==a.keyCode)return this.v&=~fg,this.Ya(a);this.gg();return i};
this.Ri=function(a){if(!this.Hd&&!this.c.Pa.Sd){var b={};this.c.ee(this.ob,this.pb,b);if(b.hit){this.c.qh(2E3);var c=this.A;1E6<c?we(this.c.Pa,b.lng,b.lat,1E6,h,h,h):25E4<c?we(this.c.Pa,b.lng,b.lat,25E4,h,h,h):5E4<c?we(this.c.Pa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,we(this.c.Pa,b.lng,b.lat,c,0,-90,0));this.zc=[this.ob,this.pb];this.md=2500}return this.Ya(a)}};this.Vf=function(a){if(!this.Hd&&!this.c.Pa.Sd){this.ob=a.offsetX-this.c.Z.offsetLeft;this.pb=a.offsetY-this.c.Z.offsetTop;if(Kd(a,Gd))this.v|=
Wf,document.body.style.cursor="move",this.Ah=i;else{if(Kd(a,Hd))return n;Kd(a,Id)&&(this.v|=bg)}this.gg();return this.Ya(a)}};this.Xf=function(a){this.ie=i;this.ob=a.offsetX-this.c.Z.offsetLeft;this.pb=a.offsetY-this.c.Z.offsetTop;if(Kd(a,Gd))this.v&=~Wf,this.$e=n,document.body.style.cursor="default",this.Ah=n;else{if(Kd(a,Hd))return n;Kd(a,Id)&&(this.v&=~bg)}this.gg();return this.Ya(a)};this.Wf=function(a){if(!this.Hd&&!this.c.Pa.Sd)return this.ie=this.Id==Uf,this.cj=i,this.ob=a.offsetX-this.c.Z.offsetLeft,
this.pb=a.offsetY-this.c.Z.offsetTop,this.gg(),this.Ya(a)};this.Ve=function(a){if(this.cb==Sc){var b=this.Ea*this.A/5E3;this.Gh||(this.A-=a*b);this.A<this.Wc&&(this.A=this.Wc);this.Qc=i}else this.cb==Tc?(b=this.Ea*this.A/5E3,this.A+=a*b,this.A>this.ci&&(this.A=this.ci),this.Qc=i):this.cb==Vc?this.Y=this.Ea:this.cb==Wc&&(b=Math.sin(this.Ea),this.U+=a/5E3*-Math.cos(this.Ea),this.Y+=a/5E3*b,this.U<-Math.PI/2?this.U=-Math.PI/2:0<this.U&&(this.U=0));0<this.md&&(this.ff=i,this.md-=a,0>=this.md&&(this.md=
0,this.ff=n));if((this.v&gg||this.cb==Uc)&&0==(this.v&Xf)){b=0;this.v&dg&&(b+=1);this.v&fg&&(b-=1);var c=0;this.v&cg&&(c-=1);this.v&eg&&(c+=1);var d;d=this.cb==Uc?Math.PI*this.Ea/180:Math.atan2(c,b);b=this.A/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.S/180,e=Math.sin(b),c=Math.cos(b),f=this.Y+d;d=Math.PI*this.T/180;var g=Hc/Math.sqrt(1-Ic*e*e),e=Hc/g*a*Math.sin(f)/Math.cos(b),a=Hc/(g/(1+Jc*c*c))*a*Math.cos(f)+b;this.T=180*(e+d)/Math.PI;this.S=180*a/Math.PI}for(;180<this.T;)this.T-=
180;for(;-180>this.T;)this.T+=180;for(;90<this.S;)this.S-=180;for(;-90>this.S;)this.S+=180;this.Qc&&(this.Qc=n,a=this.c.dh(this.T,this.S),a.hasvalue?(this.A-this.Wc<a.elevation&&(this.A=a.elevation+this.Wc,this.Qc=i),this.Gh=n):5E3>this.A&&(this.Qc=this.Gh=i))};this.We=function(a,b,c){this.Bh=n;this.xe.ah();this.Y=a;this.U=b;this.wc=c};this.rh=function(a,b,c,d){this.Bh=i;this.ql=a;this.rl=b;this.sl=c;this.pl=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.Y=2*Math.atan2(a,d),this.U=Math.PI/2,this.wc=
0;else if(-0.499>e)this.Y=-2*Math.atan2(a,d),this.U=-Math.PI/2,this.wc=0;else{var f=c*c;this.Y=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.U=Math.asin(2*e);this.wc=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.vn=function(a,b){this.bj.ba(this.yh);var c={};this.c.mh(a,b,c,i);c.hit?(this.nb.x=c.x,this.nb.y=c.y,this.nb.n=c.z,this.$e=i):this.$e=n};this.un=function(a,b){if(this.$e){var c={};this.c.mh(a,b,c,n);if(c.hit)if(this.mb.x=c.x,this.mb.y=c.y,this.mb.n=c.z,this.$e=i,this.mb.x==this.nb.x&&this.mb.y==this.nb.y&&
this.mb.n==this.nb.n)this.yh.ba(this.bj);else{var d=this.nb.x*this.mb.x+this.nb.y*this.mb.y+this.nb.n*this.mb.n,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.nb.y*this.mb.n-this.nb.n*this.mb.y;f=this.mb.x*this.nb.n-this.nb.x*this.mb.n;g=this.nb.x*this.mb.y-this.nb.y*this.mb.x;c/=Math.sqrt(e*e+f*f+g*g);this.ml.bh(e*c,f*c,g*c,d);this.yh.da(this.bj,this.ml);c=[];(new R(this.T,this.S,this.A)).ma(c);c=this.yh.Ma(new L(c[0],c[1],c[2]));d=new R(0,0,0);d.Nc(c.a[0],c.a[1],c.a[2]);this.T=d.H[0];
this.S=d.H[1];this.Qc=i}else this.$e=n}};this.Ya=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=i;a.cancel=i;return a.returnValue=n}}Ba(Sf,Rf);var Wf=1,bg=4,Vf=7,cg=16,dg=32,eg=64,fg=128,gg=240,Yf=256,$f=512,Xf=768,Tf=0,Uf=1,ag=2,Zf=3;function hg(){this.Cc=new M;this.Wj=1.0E-5;this.Aj=10;this.Ln=45;this.ad=function(){this.c.gl(this.Cc)};this.bd=p();this.cd=function(a){this.Cc.Uk(this.Ln,this.c.width/this.c.height,this.Wj,this.Aj);a.Re[a.Re.length-1].ba(this.Cc)};this.Te=p();this.Se=p();this.Ue=p()}hg.prototype=new fe;function ig(a){this.c=a;this.navigation=new Sf;this.navigation.c=a;ge(this.navigation);this.Hb=this.navigation;this.Qb=new hg;this.G=new Nf;this.wd=new ie;this.Qb.c=a;ge(this.Qb);this.G.c=a;ge(this.G);this.wd.c=a;ge(this.wd);this.Zc=new Qc;this.vb=new M;this.hb=new M;this.Pn=new M}ig.prototype.Wa=function(){this.Hb.ad();this.Hb.bd();this.Qb.ad();this.Qb.bd();this.G.ad();this.G.bd();this.wd.ad();this.wd.bd()};
ig.prototype.k=function(){this.Hb&&(this.Hb.Bd(),this.Hb=l);this.Qb&&(this.Qb.Bd(),this.Qb=l);this.G&&(this.G.Bd(),this.G=l);this.wd&&(this.wd.Bd(),this.wd=l)};function jg(a){this.b=a;this.Tc=n;this.Jj=this.xk=this.Vb=this.Hj=this.vk=this.nc=this.Gj=this.uk=this.mc=this.Bj=this.pk=this.kc=this.Ej=this.sk=this.Tb=this.Ij=this.wk=this.Ub=this.Dj=this.rk=this.lc=this.Fj=this.tk=this.Ab=this.Cj=this.qk=this.Hc=l}function hd(a,b,c){a.Hc&&(a.b.useProgram(a.Hc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Hc,"matMVP"),n,b.Ca()),a.b.uniform4fv(a.b.getUniformLocation(a.Hc,"uColor"),c.Ca()))}
function id(a,b,c){a.lc&&(a.b.useProgram(a.lc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.lc,"matMVP"),n,b.Ca()),a.b.uniform4fv(a.b.getUniformLocation(a.lc,"uColor"),c.Ca()))}
function kg(a){a.Tc=i;a.qk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.Cj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");a.qk&&a.Cj&&(a.Hc=a.b.createProgram(),a.b.attachShader(a.Hc,a.qk),a.b.attachShader(a.Hc,a.Cj),a.b.bindAttribLocation(a.Hc,0,"aPosition"),a.b.linkProgram(a.Hc),a.b.getProgramParameter(a.Hc,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.Hc)));a.tk=lg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Fj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");a.tk&&a.Fj&&(a.Ab=a.b.createProgram(),a.b.attachShader(a.Ab,a.tk),a.b.attachShader(a.Ab,a.Fj),a.b.bindAttribLocation(a.Ab,0,"aPosition"),
a.b.bindAttribLocation(a.Ab,1,"aNormal"),a.b.bindAttribLocation(a.Ab,2,"aTexCoord"),a.b.linkProgram(a.Ab),a.b.getProgramParameter(a.Ab,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ab)));a.rk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Dj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
a.rk&&a.Dj&&(a.lc=a.b.createProgram(),a.b.attachShader(a.lc,a.rk),a.b.attachShader(a.lc,a.Dj),a.b.bindAttribLocation(a.lc,0,"aPosition"),a.b.bindAttribLocation(a.lc,1,"aColor"),a.b.linkProgram(a.lc),a.b.getProgramParameter(a.lc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.lc)));a.wk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Ij=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");a.wk&&a.Ij&&(a.Ub=a.b.createProgram(),a.b.attachShader(a.Ub,a.wk),a.b.attachShader(a.Ub,a.Ij),a.b.bindAttribLocation(a.Ub,0,"aPosition"),a.b.bindAttribLocation(a.Ub,1,"aTexCoord"),a.b.linkProgram(a.Ub),a.b.getProgramParameter(a.Ub,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ub)));
a.sk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Ej=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
a.sk&&a.Ej&&(a.Tb=a.b.createProgram(),a.b.attachShader(a.Tb,a.sk),a.b.attachShader(a.Tb,a.Ej),a.b.bindAttribLocation(a.Tb,0,"aPosition"),a.b.bindAttribLocation(a.Tb,1,"aNormal"),a.b.bindAttribLocation(a.Tb,2,"aTexCoord"),a.b.bindAttribLocation(a.Tb,3,"aColor"),a.b.linkProgram(a.Tb),a.b.getProgramParameter(a.Tb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Tb)));a.pk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Bj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");a.pk&&a.Bj&&(a.kc=a.b.createProgram(),a.b.attachShader(a.kc,a.pk),a.b.attachShader(a.kc,a.Bj),a.b.bindAttribLocation(a.kc,0,"aPosition"),a.b.bindAttribLocation(a.kc,1,"aTexCoord"),a.b.linkProgram(a.kc),a.b.getProgramParameter(a.kc,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.kc)));a.uk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Gj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
a.uk&&a.Gj&&(a.mc=a.b.createProgram(),a.b.attachShader(a.mc,a.uk),a.b.attachShader(a.mc,a.Gj),a.b.bindAttribLocation(a.mc,0,"aPosition"),a.b.bindAttribLocation(a.mc,1,"aTexCoord"),a.b.linkProgram(a.mc),a.b.getProgramParameter(a.mc,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.mc)));a.vk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Hj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");a.vk&&a.Hj&&(a.nc=a.b.createProgram(),a.b.attachShader(a.nc,a.vk),a.b.attachShader(a.nc,a.Hj),a.b.bindAttribLocation(a.nc,0,"aPosition"),a.b.bindAttribLocation(a.nc,1,"aColor"),a.b.linkProgram(a.nc),a.b.getProgramParameter(a.nc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.nc)));a.xk=lg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Jj=lg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
a.xk&&a.Jj&&(a.Vb=a.b.createProgram(),a.b.attachShader(a.Vb,a.xk),a.b.attachShader(a.Vb,a.Jj),a.b.bindAttribLocation(a.Vb,0,"aPosition"),a.b.bindAttribLocation(a.Vb,1,"aTexCoord"),a.b.linkProgram(a.Vb),a.b.getProgramParameter(a.Vb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Vb)))}
function lg(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l):d};function mg(a){this.c=a;this.wi=[];this.Eb=[]}z("TextureManager",mg);mg.prototype.Ik=function(a,b,c,d){var e=this.wi[a];e?(this.Eb[a]+=1,b(e)):(e=new O(this.c),Q(e,a,b,c,d),this.Eb[a]=1,this.wi[a]=e);return e};mg.prototype.CreateTexture=mg.prototype.Ik;mg.prototype.Kk=function(a){this.Eb[a]-=1;0==this.Eb[a]&&(this.wi[a].k(),delete this.wi[a],delete this.Eb[a])};mg.prototype.DestroyTexture=mg.prototype.Kk;var ng=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function og(a){this.c=a;this.b=a.b;var b=0,c=0;this.Uh=new N(this.c);for(var a=[],d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Uh;0==a.length%5&&(c.r=new Float32Array(a),c.mode="font",c.M=5);gd(this.Uh,d,"TRIANGLES");a=new O(this.c);Q(a,md+"font.png");this.Uh.dc(a);new M}
og.prototype.Ad=function(a,b,c,d,e){d==l&&(d=1);this.c.ac();this.c.Yi();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new M,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=ng[g]/2*d,f.Cd(d,d,1),f.Tk(f,b+j,c,0),this.c.cc(f),this.Uh.ha(i,6,12*g,e),j+=ng[g]/2*d;this.c.Pc();this.c.b.disable(this.c.b.BLEND)};og.prototype.Nk=function(a){for(var b=0,c=0;c<a.length;c++)b+=ng[a.charCodeAt(c)];return b};
og.prototype.hn=s(32);z("Font",og);og.prototype.DrawText=og.prototype.Ad;og.prototype.GetStringHeight=og.prototype.hn;og.prototype.GetStringWidth=og.prototype.Nk;function pg(a){this.c=a;this.b=a.b;this.Ce=n;this.mk=this.Sb=this.q=l;this.p=this.m=0}
pg.prototype.Pf=function(a,b){this.Ne=document.createElement("canvas");this.K=this.Ne.getContext("2d");this.Fa=new O(this.c);this.Fa.g=this.b.createTexture();this.text=a;this.K.save();this.K.font=b.fontString;this.K.textAlign="left";this.K.textBaseline="top";this.K.lineWidth=b.lineWidth;this.K.strokeStyle=b.strokeStyle;var c=this.K.measureText(this.text),c=Math.round(c.width);this.K.restore();this.m=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.p=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.rc=Lc(this.m);this.qc=Lc(this.p);this.Fa.width=this.rc;this.Fa.height=this.qc;this.K.canvas.width=this.rc;this.K.canvas.height=this.qc;this.K.fillStyle=b.backgroundColor;this.K.fillRect(0,0,this.m,this.p);this.K.shadowOffsetX=b.shadowOffsetX;this.K.shadowOffsetY=b.shadowOffsetY;this.K.shadowBlur=b.shadowBlur;this.K.shadowColor=b.shadowColor;this.K.fillStyle=b.fontColor;this.K.font=b.fontString;this.K.textAlign=
"left";this.K.textBaseline="middle";this.K.lineWidth=b.lineWidth;this.K.strokeStyle=b.strokeStyle;this.K.strokeText(a,b.lineWidth,this.p/2);this.K.fillText(a,b.lineWidth,this.p/2);this.eg();this.q=new N(this.c);this.q.dc(this.Fa);c=[];c.push(-this.m/2,this.p/2,0,0,0);c.push(-this.m/2,-this.p/2,0,0,1/this.qc*this.p);c.push(this.m/2,-this.p/2,0,1/this.rc*this.m,1/this.qc*this.p);c.push(this.m/2,this.p/2,0,1/this.rc*this.m,0);fd(this.q,c);gd(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.m=this.m;this.q.p=
this.p;return this.q};
pg.prototype.Nf=function(a,b){this.Ne=document.createElement("canvas");this.K=this.Ne.getContext("2d");this.Fa=new O(this.c);this.Fa.g=this.b.createTexture();qg(this,a,b);this.q=new N(this.c);this.q.dc(this.Fa);var c=[];c.push(-this.m/2,this.p/2,0,0,0);c.push(-this.m/2,-this.p/2,0,0,1/this.qc*this.p);c.push(this.m/2,-this.p/2,0,1/this.rc*this.m,1/this.qc*this.p);c.push(this.m/2,this.p/2,0,1/this.rc*this.m,0);fd(this.q,c);gd(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.Q=[-this.m/2,-this.p/2,0];this.q.ia=
[this.m/2,this.p/2,0];this.q.m=this.m;this.q.p=this.p;return this.q};
function qg(a,b,c){a.m=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.p=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.rc=Lc(a.m);a.qc=Lc(a.p);a.Fa.width=a.rc;a.Fa.height=a.qc;a.K.canvas.width=a.rc;a.K.canvas.height=a.qc;a.K.fillStyle=c.backgroundColor;a.K.fillRect(0,0,a.m,a.p);a.K.shadowOffsetX=c.shadowOffsetX;a.K.shadowOffsetY=c.shadowOffsetY;a.K.shadowBlur=c.shadowBlur;a.K.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.K.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.eg()};d.src=b}
pg.prototype.eg=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Fa.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Ne);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.Fa.Db=i};pg.prototype.k=function(){this.q&&(this.q.k(),this.q=l);this.Sb&&(this.Sb.k(),this.Sb=l);this.mk&&(this.mk.k(),this.mk=l);this.Fa&&(this.Fa.k(),this.Fa=l);this.Ne&&(document.removeChild(this.Ne),this.Ne=l)};function rg(a){this.c=a;this.b=a.b;this.Sc=this.Vc=this.Uc=0;this.Ce=n;this.Ba=this.va=this.Sb=l;this.scale=20;this.text=this.of="";this.ng=new pg(a);this.Ig=this.Lg=0;this.tm=this.um=1;this.sm=0;this.rm=1;this.ok=0;this.nk=Infinity;this.$j=new Zc(1,1,1,1);this.Yh={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Qg={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",fontColor:"rgba(255,255,255,1.0)",
lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}t=rg.prototype;t.pn=function(a,b,c,d){this.of=c?c:"";b&&(this.Qg=b);this.text=a;d&&(this.Yh=d);c&&(this.va=this.ng.Nf(this.of,this.Yh));this.ng=new pg(this.c);a&&(this.Ba=this.ng.Pf(a,this.Qg))};
t.ta=function(a,b,c,d){this.va&&this.Ba?(this.Lg=this.va.m+this.Ba.m,this.Ig=this.va.p):this.va?(this.Lg=this.va.m,this.Ig=this.va.p):this.Ba&&(this.Lg=this.Ba.m,this.Ig=this.Ba.p);this.va&&this.va.bg(a,b,c,1.1920930376163766E-7*-(this.va.m/2+(this.Lg/2-this.va.m))*this.scale,1.1920930376163766E-7*(this.Ig/2)*this.scale,0);this.Ba&&this.Ba.bg(a,b,c,1.1920930376163766E-7*(this.Ba.m/2+(this.Lg/2-this.Ba.m))*this.scale,1.1920930376163766E-7*(this.Ig/2)*this.scale,0);this.Ee=a;this.Fe=b;this.Ge=c;if(d!=
l){this.Ce=i;var d=this.ng,e=this.um,f=this.tm,g=this.sm,j=this.rm;d.Sb=new N(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);cd(d.Sb,k);gd(d.Sb,[0,1],"LINES");this.Sb=d.Sb}};
t.ha=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Ce&&this.Sb.ha();this.va&&ld(this.va);this.Ba&&ld(this.Ba);this.c.ac();var a=new M;a.Cd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.cc(a);this.va&&this.va.ha(n,0,0,l,this.$j);this.Ba&&this.Ba.ha(n,0,0,l,this.$j);this.c.Pc();this.c.b.disable(this.c.b.BLEND)};
t.uh=function(a){this.scale=a;this.Ce?this.ta(this.Ee,this.Fe,this.Ge,0):this.ta(this.Ee,this.Fe,this.Ge,l)};t.Yf=function(a,b){var c=n,d=n;if(this.va)var e=this.c.ce(a,b,this.c.ka,i),c=this.va.Fd(e.x,e.y,e.n,e.nd,e.od,e.pd);this.Ba&&(e=this.c.ce(a,b,this.c.ka,i),d=this.Ba.Fd(e.x,e.y,e.n,e.nd,e.od,e.pd));return c||d};t.k=function(){this.ng=l;this.Sc=this.Vc=this.Uc=0;this.va&&this.va.k();this.Ba&&this.Ba.k();this.Sb&&this.Sb.k();this.Ce=n;this.Sb=l;this.scale=0};z("Poi",rg);rg.prototype.Draw=rg.prototype.ha;
rg.prototype.SetContent=rg.prototype.pn;rg.prototype.SetPosition=rg.prototype.ta;rg.prototype.SetSize=rg.prototype.uh;rg.prototype.Destroy=rg.prototype.k;function sg(a){this.c=a;this.Jg=[];this.Eb=[];this.df=l;this.Kg=[];this.Ie=[]}t=sg.prototype;t.Hk=function(a,b,c,d){var e=new rg(this.c);b&&(e.Qg=b);e.text=a;d&&(e.Yh=d);c&&(e.of=c,e.va=this.Nf(c,e.Yh));a&&(e.Ba=this.Pf(a,e.Qg));return e};t.Jk=function(a){a.va&&tg(this,a.of);a.Ba&&ug(this,a.text,a.Qg)};t.Nf=function(a,b){var c=this.Jg[a];if(c){this.Eb[a]+=1;var d=new N(this.c);d.ba(c);d.m=c.m;d.p=c.p;this.Jg[a]=d}else this.df=new pg(this.c),d=this.df.Nf(a,b),this.Eb[a]=1,this.Jg[a]=d,this.df=l;return d};
function tg(a,b){a.Eb[b]-=1;0==a.Eb[b]&&(a.Jg[b].g.k(),delete a.Jg[b],delete a.Eb[b])}t.Pf=function(a,b){var c=this.Kg[a+b.id];if(c){this.Ie[a+b.id]+=1;var d=new N(this.c);d.ba(c);d.m=c.m;d.p=c.p;this.Kg[a+b.id]=d}else this.df=new pg(this.c),d=this.df.Pf(a,b),this.Ie[a+b.id]=1,this.Kg[a+b.id]=d,this.df=l;return d};function ug(a,b,c){a.Ie[b+c.id]-=1;0==a.Ie[b+c.id]&&(a.Kg[b+c.id].g.k(),delete a.Kg[b+c.id],delete a.Ie[b+c.id])}
t.Fk=function(a,b,c){a.va=this.Nf(b,c);a.ta(a.Ee,a.Fe,a.Ge,l);tg(this,a.of);a.of=b};t.Gk=function(a,b,c){a.Ba=this.Pf(b,c);a.ta(a.Ee,a.Fe,a.Ge,l);ug(this,a.text,c);a.text=b};z("PoiManager",sg);sg.prototype.CreatePoi=sg.prototype.Hk;sg.prototype.DestroyPoi=sg.prototype.Jk;sg.prototype.ChangePoiIcon=sg.prototype.Fk;sg.prototype.ChangePoiText=sg.prototype.Gk;var vg=new Date,wg=new Date,xg=[],yg=0,zg=l,Ag=l;function Bg(){for(var a=0;a<xg.length;a++){var b=xg[a];b.ul&&(0<b.yk&&0<b.Mj?(b.Z.width=window.innerWidth-b.yk,b.Z.height=window.innerHeight-b.Mj):(b.Z.width=window.innerWidth,b.Z.height=window.innerHeight));Cg(b,b.Z.width,b.Z.height)}}
function Y(){this.kd=this.jd=this.Kd=this.Ld=this.Jd=l;this.Tc=n;this.height=this.width=0;this.ul=n;this.Ta=this.Z=this.b=l;this.rj=0.670588;this.qj=0.921569;this.oj=this.pj=1;this.Um=this.Vm=this.Xm=this.Wm=0;this.Zg=this.Yg=20;this.vb=new M;this.hb=new M;this.Cc=new M;this.Ag=new M;this.ka=new M;this.Qj=new M;this.ge=[];this.Ze=new Qc;this.Rm=[];this.Sm=[];xg[yg]=this;yg++;this.Xj=this.f=this.Af=l;this.$d=1;this.Pa=this.vi=this.yf=l;this.Mj=this.yk=0}
function Dg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c=Eg(a);c===l&&b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function Eg(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b.length;++d){try{c=a.getContext(b[d],{antialias:n})}catch(e){}if(c)break}return c}t=Y.prototype;
t.Ok=function(a,b){var c=document.getElementById(a);if(this.b=Dg(c)){this.Z=c;b&&(this.Zg=this.Yg=0,c.width=window.innerWidth-this.Yg,c.height=window.innerHeight-this.Zg,this.ul=i);for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(Cg(this,this.Z.width,this.Z.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Ta=new jg(this.b),kg(this.Ta),
this.Af=new og(this),this.Xj=new O(this),Q(this.Xj,md+"nodata.png"),this.yf=new sg(this),this.vi=new mg(this),this.Pa=new Fg(this),this.Jd&&this.Jd(this),T(window,"resize",Bg,n,this),wg=new Date,"undefined"!=typeof window&&window.zm(Gg,this.Z),this.Z.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return n},T(window,"unload",this.Bd,n,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
t.Bd=function(){this.kd=this.jd=this.Kd=this.Ld=this.Jd=l;this.f&&(this.f.k(),this.f=l);this.Ta=this.Z=this.b=l;this.Rm=[];this.Sm=[];this.vi=this.yf=this.f=this.Af=l;Rd(window,"resize",l,n,this)};t.Zk=function(a,b,c,d){0<=a&&1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d&&(this.rj=a,this.qj=b,this.pj=c,this.oj=d)};t.gn=function(){return{Do:this.rj,uo:this.qj,po:this.pj,oo:this.oj}};t.Ei=function(){var a=this.b;a.clearColor(this.rj,this.qj,this.pj,this.oj);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)};
t.jl=function(a,b,c,d){this.Wm=a;this.Xm=b;this.Vm=c;this.Um=d;this.b.viewport(a,b,c,d)};t.jn=function(){return{x:this.Wm,y:this.Xm,Lo:this.Vm,vo:this.Um}};t.gl=function(a){this.Cc.ba(a);Hg(this)};t.Zi=function(a){this.hb.ba(a);Hg(this)};t.cc=function(a){this.vb.ba(a);Hg(this)};function Hg(a){a.Ag.da(a.hb,a.vb);a.ka.da(a.Cc,a.Ag);a.Qj.Qe(a.Ag);a.Qj.Ye()}t.ln=function(a){var b=new O(this);Q(b,a);this.Sm.push(b);return b};t.kn=function(a){var b=new N(this);jd(b,a);this.Rm.push(b);return b};
t.ac=function(){var a=this.Ze,b=this.hb,c=new M;c.ba(b);a.hh.push(c);a=this.Ze;b=this.vb;c=new M;c.ba(b);a.gh.push(c);a=this.Ze;b=this.Cc;c=new M;c.ba(b);a.Re.push(c)};t.Pc=function(){this.vb.ba(this.Ze.gh.pop());this.hb.ba(this.Ze.hh.pop());this.Cc.ba(this.Ze.Re.pop());Hg(this)};t.Yi=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.vb.fh();this.hb.fh();this.Cc.Sk(0,b,0,a);Hg(this)};
t.Of=function(){0==this.$d?I(J("owg.engine3d"),"** WARNING: not implemented"):1==this.$d?(this.f=new ig(this),this.f.G.Lk(this.width,this.height)):2==this.$d?I(J("owg.engine3d"),"** WARNING: not implemented"):3==this.$d&&I(J("owg.engine3d"),"** WARNING: not implemented")};t.Ad=function(a,b,c,d,e){this.Af&&this.Af.Ad(a,b,c,d,e)};t.Hi=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Af&&(b[0]=this.Af.Nk(a),b[1]=32);return b};
t.ce=function(a,b,c,d){var e=new M;e.Qe(c);var f=this.height-b-1,b=2*(a-0)/this.width-1,c=2*(f-0)/this.height-1,a=2*(a-0)/this.width-1,f=2*(f-0)/this.height-1,g=new L;g.t(b,c,-1);b=e.Ma(g);c=new L;c.t(a,f,1);c=e.Ma(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.n=d[2];b.nd=e;b.od=a;b.pd=c;return b};
"undefined"!=typeof window&&(window.zm=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function Gg(){vg=new Date;var a=vg.valueOf()-wg.valueOf();wg=vg;for(var b=0;b<xg.length;b++){var c=xg[b];if(c.f){var d=c.f,e=a;d.Hb.Ve(e);d.Qb.Ve(e);d.G.Ve(e);d.wd.Ve(e)}c.Ld&&c.Ld(a,c);c.jl(0,0,c.width,c.height);c.Ei();if(c.f){var d=c.f,e=d.Zc,f=d.vb,g=new M;g.ba(f);e.gh.push(g);e=d.Zc;f=d.hb;g=new M;g.ba(f);e.hh.push(g);e=d.Zc;f=d.Pn;g=new M;g.ba(f);e.Re.push(g);d.Hb.cd(d.Zc);d.Qb.cd(d.Zc);d.G.cd(d.Zc);d.wd.cd(d.Zc);d.Zc.gh.pop();d.Zc.hh.pop();d.Zc.Re.pop();c.f.Wa()}c.Kd&&c.Kd(c);typeof window!=
"undefined"&&window.zm(Gg,c.Z)}}function Cg(a,b,c){a.width=b;a.height=c;a.kd&&a.kd(b,c,a);a.f&&a.f.G.Lk(b,c)}t=Y.prototype;t.$k=ca("Jd");t.vh=ca("Ld");t.hl=ca("Kd");t.cl=function(a){if(this.oe){Sd(this.oe);this.oe=l}if(a)this.oe=T(this.Z,wd,function(b){a(b.button,b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},n,this)};t.el=function(a){if(this.qe){Sd(this.qe);this.qe=l}if(a)this.qe=T(this.Z,xd,function(b){a(b.button,b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},n,this)};
t.dl=function(a){if(this.pe){Sd(this.pe);this.pe=l}if(a)this.pe=T(this.Z,yd,function(b){a(b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},n,this)};t.fl=function(a){if(this.jd){Sd(this.jd);this.jd=l}if(a){var b=new Of(this.Z);this.jd=T(b,yd,function(b){b.preventDefault();a(b.Ph,this)},n,this)}};t.il=ca("kd");t.al=function(a){if(zg){Sd(zg);zg=l}a&&(zg=T(window,zd,function(b){a(b.keyCode,this)},n,this))};t.bl=function(a){if(Ag){Sd(Ag);Ag=l}a&&(Ag=T(window,Ad,function(b){a(b.keyCode,this)},n,this))};
t.ee=function(a,b,c){this.f&&this.f.G.Qa.ee(a,b,c)};t.mh=function(a,b,c,d){this.f&&this.f.G.Qa.mh(a,b,c,d)};t.$f=function(a,b){return this.f?this.f.G.gi.$f(a,b):l};t.fe=function(a,b){return this.f?this.f.G.Vh.fe(a,b):-1};t.Zf=function(a,b){return this.f?this.f.G.Hh.Zf(a,b):-1};t.$g=function(){return this.f?this.f.G.Qa.$g():0};t.$m=function(){return this.f?this.f.Hb.de().elevation:0};t.dh=function(a,b){return this.f?this.f.G.Qa.dh(a,b):{hasvalue:n,elevation:0,lod:-1}};
t.Gi=function(a,b,c,d,e,f,g){this.Pa.Gi(a,b,c,d,e,f,g)};t.qh=function(a){this.Pa.qh(a)};t.dg=function(){this.Pa.dg()};function Be(a){if(a.ge.length<1)Ig("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.ge.pop(),c=a.ge.length;c>0?a.ge[c-1].fg():b.ll()}}z("engine3d",Y);Y.prototype.AltitudeAboveEllipsoid=Y.prototype.$m;Y.prototype.AltitudeAboveGround=Y.prototype.$g;Y.prototype.Clear=Y.prototype.Ei;Y.prototype.CreateScene=Y.prototype.Of;
Y.prototype.DrawText=Y.prototype.Ad;Y.prototype.GetClearColor=Y.prototype.gn;Y.prototype.GetDirectionMousePos=Y.prototype.ce;Y.prototype.GetViewport=Y.prototype.jn;Y.prototype.InitEngine=Y.prototype.Ok;Y.prototype.LoadMesh=Y.prototype.kn;Y.prototype.LoadTexture=Y.prototype.ln;Y.prototype.PickGlobe=Y.prototype.ee;Y.prototype.PopMatrices=Y.prototype.Pc;Y.prototype.PushMatrices=Y.prototype.ac;Y.prototype.SetClearColor=Y.prototype.Zk;Y.prototype.SetInitCallback=Y.prototype.$k;
Y.prototype.SetKeyDownCallback=Y.prototype.al;Y.prototype.SetKeyUpCallback=Y.prototype.bl;Y.prototype.SetModelMatrix=Y.prototype.cc;Y.prototype.SetMouseDownCallback=Y.prototype.cl;Y.prototype.SetMouseMoveCallback=Y.prototype.dl;Y.prototype.SetMouseUpCallback=Y.prototype.el;Y.prototype.SetMouseWheelCallback=Y.prototype.fl;Y.prototype.SetOrtho2D=Y.prototype.Yi;Y.prototype.SetProjectionMatrix=Y.prototype.gl;Y.prototype.SetRenderCallback=Y.prototype.hl;Y.prototype.SetResizeCallback=Y.prototype.il;
Y.prototype.SetTimerCallback=Y.prototype.vh;Y.prototype.SetViewMatrix=Y.prototype.Zi;Y.prototype.SetViewport=Y.prototype.jl;Y.prototype.GetElevationAt=Y.prototype.dh;Y.prototype.OnDestroy=Y.prototype.Bd;function Jg(a){a=a.Jb;a.Jd&&a.Jd(a.id)}function Kg(a,b){var c=b.Jb;c.Ld&&c.Ld(c.id,a)}function Lg(a){a=a.Jb;a.Kd&&a.Kd(a.id)}function Mg(a,b,c,d){d=d.Jb;d.oe&&d.oe(d.id,a,b,c)}function Ng(a,b,c,d){a=d.Jb;a.qe&&a.qe(a.id)}function Og(a,b,c){c=c.Jb;c.pe&&c.pe(c.id,a,b)}function Pg(a,b){var c=b.Jb;c.jd&&c.jd(c.id,a)}function Qg(a,b,c){c=c.Jb;c.kd&&c.kd(c.id,a,b)}function Rg(a,b){var c=b.Jb;c.sj&&c.sj(c.id,a)}function Sg(a,b){var c=b.Jb;c.tj&&c.tj(c.id,a)}
function Tg(a){var b=a.Jb;b.me&&b.me(a.Jb.id)}function Ug(a){var b=a.Jb;b.ne&&b.ne(a.Jb.id)}function Vg(){this.name="ogContext";this.type=A;this.Kl=n;this.f=this.c=l;this.fontcolor=new Zc(1,1,1,1);this.ne=this.me=this.Jd=this.Ld=this.Kd=this.kd=this.tj=this.sj=this.pe=this.jd=this.qe=this.oe=l}Vg.prototype=new F;
Vg.prototype.ya=function(a){this.Jd=a.cbfInit;this.kd=a.cbfResize;a.fullscreen&&(this.Kl=i);this.c=new Y;this.c.Jb=this;a.canvas?this.c.Ok(a.canvas,this.Kl):I(J("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.$k(Jg);this.c.vh(Kg);this.c.hl(Lg);this.c.cl(Mg);this.c.el(Ng);this.c.dl(Og);this.c.fl(Pg);this.c.il(Qg);this.c.al(Rg);this.c.bl(Sg);this.c.Pa.me=Tg;this.c.Pa.ne=Ug};Vg.prototype.Ad=function(a,b,c){this.c&&this.c.Ad(a,b,c,1,this.fontcolor)};
Vg.prototype.Hi=function(a){return this.c?this.c.Hi(a):l};Vg.prototype.Oa=function(){this.c.Bd();this.c=l};function Wg(){this.name="ogWorld";this.type=Ca}Wg.prototype=new F;Wg.prototype.ya=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;a.scenetype==db?(b.$d=1,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==eb?(b.$d=2,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==fb?(b.$d=3,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==gb&&(b.$d=0,b.Of(),b.f&&(b.f.Kf=this))}};
Wg.prototype.th=function(a){var b=this.parent.parent.c.f.G.Qa;switch(a){case 0:b.th(vf);break;case 1:b.th(wf)}};function Xg(){this.name="ogScene";this.type=D;this.ke=this.Kf=l;this.Jh=[];this.Ic=db}Xg.prototype=new F;t=Xg.prototype;t.ya=function(a){a==l?I(J("owg.ogScene"),"** ERROR: no options for scene creation!"):a.type&&(this.Ic=a.type)};t.Yf=function(a,b){var c={};this.parent.c.ee(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};t.$f=function(a,b){var c=this.parent.c.$f(a,b);return c?c.Vn.id:-1};t.fe=function(a,b){return this.parent.c.fe(a,b)};
t.Zf=function(a,b){return this.parent.c.Zf(a,b)};function Yg(a,b){var c=E(b);if(c&&c.type==Ra){var d=Nc(c);d.ta(c.Vc,c.Uc,c.Sc);d.We(K(c.La),K(c.pitch),K(c.pc));d.zb=c}a.ke=c};function Zg(){this.name="ogPOI";this.type=Wa;this.F=n;this.j=this.sa=l}Zg.prototype=new F;
Zg.prototype.ya=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new R(e[0],e[1],e[2])).ma(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.Pe=a.textstyle);a.iconstyle&&(this.te=a.iconstyle);this.sa=this.parent.parent.c.yf.Hk(b,this.Pe,d,this.te);this.sa.F=n;a.flagpoleColor&&(b=this.sa,d=a.flagpoleColor,b.um=d[0],b.tm=d[1],b.sm=d[2],b.rm=d[3]);a.flagpole==i?this.sa.ta(f[0],f[1],f[2],0):this.sa.ta(f[0],f[1],f[2],l);this.sa.uh(c);this.sa.Vn=this;(c=$g(this))&&
c.Aa.push(this.sa);a.visibilityRange&&(c=this.sa,a=a.visibilityRange,c.ok=1.1920930376163766E-4*a[0],c.nk=1.1920930376163766E-4*a[1])};Zg.prototype.Oa=function(){var a=this.parent.parent,b=$g(this);if(b)for(var c=this.sa,d=0;d<b.Aa.length;d++)if(b.Aa[d]==c){b.Aa.splice(d,1);break}a.c.yf.Jk(this.sa)};Zg.prototype.ca=function(){this.F=i;this.sa.F=i};Zg.prototype.ea=function(){this.F=n;this.sa.F=n};function $g(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.gi);return b};function ah(){this.name="ogPOILayer";this.type=Ga;this.F=n;this.Aa=[];this.te=this.Pe=l;this.Dn={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Cn={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}ah.prototype=new F;
function bh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}ah.prototype.ya=function(a){a.textstyle?(bh(a.textstyle),this.Pe=a.textstyle):this.Pe=this.Dn;a.iconstyle?(bh(a.iconstyle),this.te=a.iconstyle):this.te=this.Cn};ah.prototype.Oa=function(){for(var a=0;a<this.Aa.length;a++)G(this.Aa[a])};ah.prototype.ca=function(){this.F=i;for(var a=0;a<this.Aa.length;a++)this.Aa[a].ca()};ah.prototype.ea=function(){this.F=n;for(var a=0;a<this.Aa.length;a++)this.Aa[a].ea()};function ch(){this.name="ogElevationLayer";this.type=Ea;this.yg=-1}ch.prototype=new F;ch.prototype.eh=function(){var a=l,b=this.parent.parent.parent.c;b.f&&b.f.G&&(a=b.f.G.Qa);return a};ch.prototype.Bi=function(a){var b=this.eh();b&&(this.yg=b.Bi(a))};ch.prototype.ya=function(a){this.Bi(a)};function Fg(a){this.c=a;this.b=a.b;this.ze=l;this.Ql=this.Sd=n;this.ih=[];this.jh=[];this.kh=[];this.lh=[];this.Nm=2E3;this.Mn=new R;this.ne=this.me=l}function dh(a,b,c,d){var e=a.ze.de(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.og=Hc*Math.acos(Math.sin(K(f[1]))*Math.sin(K(g[1]))+Math.cos(K(f[1]))*Math.cos(K(g[1]))*Math.cos(K(g[0]-f[0])));isNaN(a.og)&&(a.og=0);e=[e.longitude,e.latitude,e.elevation+a.og/4];b=[b,c,d+a.og/4];a.ih=f;a.jh=e;a.kh=b;a.lh=g;a.Ql=i}
function we(a,b,c,d,e,f,g){a.ze=a.c.f.Hb;var j=a.ze.Sf();a.gk=j.La;a.ek=j.pitch;a.fk=j.pc;e!=l&&f!=l&&g!=l?(a.Gm=K(e),a.Em=K(f),a.Fm=K(g)):(a.Gm=a.gk,a.Em=a.ek,a.Fm=a.fk);a.jf=a.Gm-a.gk;Math.abs(a.jf)>Math.PI&&(a.jf=0<a.jf?a.jf-2*Math.PI:a.jf+2*Math.PI);a.gf=a.Em-a.ek;Math.abs(a.gf)>Math.PI&&(a.gf=0<a.gf?a.gf-2*Math.PI:a.gf+2*Math.PI);a.hf=a.Fm-a.fk;Math.abs(a.hf)>Math.PI&&(a.hf=0<a.hf?a.hf-2*Math.PI:a.hf+2*Math.PI);dh(a,b,c,d);a.me&&a.me(a.c);a.c.vh(function(b){if(a.Ql){a.Tj=a.Tj+b;b=a.Tj/a.Nm;a.w=
0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;if(b>1){a.w=1;a.dg()}var b=Math.pow(1-a.w,3)*a.ih[0]+3*a.w*Math.pow(1-a.w,2)*a.jh[0]+3*a.w*a.w*(1-a.w)*a.kh[0]+Math.pow(a.w,3)*a.lh[0],c=Math.pow(1-a.w,3)*a.ih[1]+3*a.w*Math.pow(1-a.w,2)*a.jh[1]+3*a.w*a.w*(1-a.w)*a.kh[1]+Math.pow(a.w,3)*a.lh[1],d=Math.pow(1-a.w,3)*a.ih[2]+3*a.w*Math.pow(1-a.w,2)*a.jh[2]+3*a.w*a.w*(1-a.w)*a.kh[2]+Math.pow(a.w,3)*a.lh[2];a.Mn.Nc(b,c,d);a.ze.ta(b,c,d);a.ze.We(a.gk+a.w*a.jf,a.ek+a.w*a.gf,a.fk+a.w*a.hf);a.w==1&&a.dg()}});a.w=0;a.Tj=
0;a.Sd=i}Fg.prototype.dg=function(){this.c.vh(l);this.Sd=n;this.ne&&this.ne(this.c)};
Fg.prototype.Gi=function(a,b,c,d,e,f,g){this.ze=this.c.f.Hb;var d=1.1920930376163766E-7*d,j=new R(a,b,c),k=[];j.ma(k);var m=new M;m.be(a,b);a=new M;a.ed(k[0],k[1],k[2]);k=new M;k.da(a,m);m={};e!=l&&f!=l&&g!=l?(m.La=K(e),m.pitch=K(f),m.pc=K(g)):m=this.ze.Sf();a=m.pitch-Math.PI/2;d=new L(d*Math.sin(a)*Math.cos(m.La),d*Math.sin(a)*Math.sin(m.La),d*Math.cos(a));d=k.Ma(d).a;j.Nc(d[0],d[1],d[2]);d=j.H[1];k=j.H[0];j=j.H[2];j>c?we(this,k,d,j,e,f,g):we(this,k,d,-j,m.La,-Kc(m.pitch),m.pc)};
Fg.prototype.qh=ca("Nm");function Mf(a,b){this.c=a;this.b=a.b;this.la=this.ub=this.V=this.L=this.r=l;this.vd=new M;this.ak=[];this.options=b;this.ic=new Zc;this.ic.t(1,1,1,1)}
Mf.prototype.sh=function(a){this.ak=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];lf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];lf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,m=[];mf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,m);m[2]=k;k=new R(m[0],m[1],m[2]);m=[];k.ma(m);c.push(m[0]);c.push(m[1]);c.push(m[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new R(a[e][0],a[e][1],a[e][2]),m=[],k.ma(m),c.push(m[0]),c.push(m[1]),c.push(m[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Gg=e*this.options.segmentation;this.r=new Float32Array(c);this.L=new Uint16Array(d);
this.Ib=d.length;this.Gd()};Mf.prototype.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.ub&&(this.b.deleteBuffer(this.ub),this.V=l);this.V=this.yd=l};
Mf.prototype.ha=function(){this.ak!=l&&(this.V||this.Gd(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,n,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,n,28,12),id(this.c.Ta,this.c.ka,this.ic),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.Ib,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Mf.prototype.Gd=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.r,this.b.STATIC_DRAW);this.ub=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.L,this.b.STATIC_DRAW)};function eh(){this.name="ogEarthPolylineObject";this.type=bb;this.options=this.Nd=l}eh.prototype=new F;t=eh.prototype;t.ya=function(a){this.options=a;this.Nd=new Mf(this.parent.parent.parent.c,a);this.Nd.sh(a.coords)};t.Oa=function(){this.Nd&&(this.Nd.k(),this.Nd=l,this.status=3)};t.ca=function(){this.Nd.F=i};t.Ed=p();t.ea=function(){this.Nd.F=n};function fh(a){this.c=a;this.b=a.b;this.Sc=this.Vc=this.Uc=0;this.canvas=l;this.p=this.m=0;this.K=this.q=l;this.pm=-1}t=fh.prototype;
t.eg=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Fa.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.Fa.Db=i};t.ta=function(a,b,c){var d=[];(new R(a,b,c)).ma(d);this.q.bg(d[0],d[1],d[2],0,0,0)};
t.ha=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.q&&ld(this.q);this.c.ac();var a=new M;a.Cd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.cc(a);this.q&&this.q.ha(n,0,0,l,l);this.c.Pc();this.c.b.disable(this.c.b.BLEND)};t.uh=ca("scale");
t.Yf=function(a,b){if(this.q)var c=this.c.ce(a,b,this.c.ka,i),d=this.q.Fd(c.x,c.y,c.n,c.nd,c.od,c.pd);if(d){var e=c=0,f=d.$b,g=d.Kc,j=1-f-g;0==d.Om?(c=f*-this.m/2+g*this.m/2+j*-this.m/2/(f+g+j)+this.m/2,e=f*this.p/2+g*this.p/2+j*-this.p/2/(f+g+j)+this.p/2):1==d.Om&&(c=f*this.m/2+g*this.m/2+j*-this.m/2/(f+g+j)+this.m/2,e=f*this.p/2+g*-this.p/2+j*-this.p/2/(f+g+j)+this.p/2);c/=this.m;e/=this.p;d={};d.id=this.pm;d.x=c;d.y=e;return d}return l};t.k=function(){this.q&&(this.q.k(),this.Fa.k())};function gh(){this.name="ogBillboard";this.type=Xa;this.status=ib;this.j=-1;this.F=n}gh.prototype=new F;t=gh.prototype;
t.ya=function(a){if(a==l)I(J("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)I(J("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=D)I(J("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.hc=new fh(this.parent.parent.c);this.hc.pm=this.id;var b=this.hc,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.K=b.canvas.getContext("2d");b.m=b.K.canvas.width;b.p=b.K.canvas.height;
break;case "[object HTMLVideoElement]":b.m=c.videoWidth,b.p=c.videoHeight}b.Fa=new O(b.c);b.Fa.g=b.b.createTexture();b.q=new N(b.c);b.q.dc(b.Fa);b.rc=b.m;b.qc=b.p;c=[];c.push(-b.m/2,b.p/2,0,0,0);c.push(-b.m/2,-b.p/2,0,0,1/b.qc*b.p);c.push(b.m/2,-b.p/2,0,1/b.rc*b.m,1/b.qc*b.p);c.push(b.m/2,b.p/2,0,1/b.rc*b.m,0);fd(b.q,c);gd(b.q,[0,1,2,0,2,3],"TRIANGLES");b.q.Q=[-b.m/2,-b.p/2,0];b.q.ia=[b.m/2,b.p/2,0];b.q.m=b.m;b.q.p=b.p;b.eg();a=a.position;this.hc.ta(a[0],a[1],a[2]);hh(this).Ai(this.hc)}};
t.Oa=function(){this.hc&&(hh(this).Vi(this.hc),this.hc.k(),this.status=3)};t.ha=function(){this.hc.ha()};function hh(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.Hh);return b}t.ca=function(){this.F=i;this.hc.F=i};t.ea=function(){this.F=n;this.hc.F=n};function ih(){this.name="ogMeshObject";this.type=Oa;this.Fb=[];this.Jc=[]}ih.prototype=new F;t=ih.prototype;t.ya=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=X(Pa,this,this.options);this.Fb.push(c);this.Jc.push(c.q)}};t.Oa=function(){for(var a=0;a<this.Fb.length;a++)G(this.Fb[a]);this.Jc=this.Fb=l};t.ca=function(){for(var a=0;a<this.Fb.length;a++)this.Fb[a].ca()};
t.he=function(a,b,c,d){for(var e=0;e<this.Fb.length;e++)this.Fb[e].he(a,b,c,d)};t.Ed=function(a,b,c,d,e,f){for(var g=0;g<this.Fb.length;g++)this.Fb[g].Ed(a,b,c,d,e,f)};t.cg=function(a,b,c,d){for(var e=0;e<this.Fb.length;e++)this.Fb[e].cg(a,b,c,d)};t.ea=function(){for(var a=0;a<this.Fb.length;a++)this.Fb[a].ea()};function jh(){this.ym=Aa()}var kh=new jh;jh.prototype.set=ca("ym");jh.prototype.reset=function(){this.set(Aa())};jh.prototype.get=ea("ym");function lh(a){this.bk=a||"";this.fo=kh}lh.prototype.ao=i;lh.prototype.co=i;lh.prototype.bo=i;lh.prototype.Bm=n;function mh(a){return 10>a?"0"+a:""+a}function nh(a,b){var c=(a.Im-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function oh(a){lh.call(this,a)}Ba(oh,lh);oh.prototype.Bm=i;function ph(a){this.ye=a||100;this.le=[]}t=ph.prototype;t.Eg=0;t.add=function(a){this.le[this.Eg]=a;this.Eg=(this.Eg+1)%this.ye};t.get=function(a){a=qh(this,a);return this.le[a]};t.set=function(a,b){a=qh(this,a);this.le[a]=b};t.se=function(){return this.le.length};t.clear=function(){this.Eg=this.le.length=0};t.Kj=function(){for(var a=this.se(),b=[],c=this.se()-this.se();c<a;c++)b[c]=this.get(c);return b};t.Wh=function(){for(var a=[],b=this.se(),c=0;c<b;c++)a[c]=c;return a};
function qh(a,b){b>=a.le.length&&aa(Error("Out of bounds exception"));return a.le.length<a.ye?b:(a.Eg+Number(b))%a.ye};function rh(a,b){this.Pd=a||"";this.bk=b||"";this.xf=[];this.ii=new ph(sh);this.Yn=za(this.tn,this);this.Kn=new oh(this.bk);this.Jn={};if(i!=this.Ol){this.Ol=i;Fc();var c=Ec,d=this.Yn;c.vg||(c.vg=[]);c.vg.push(d)}this.Qh="1"==th(this.Pd,"enabled");w.setInterval(za(this.$n,this),7500)}var sh=500;t=rh.prototype;t.Ym="LOGGING";t.Gn=n;t.Ka=l;t.zk=n;t.Ol=n;t.vl=l;t.Oj=Aa();t.Tc=function(){this.Qh&&uh(this)};function vh(a,b){a.Qh=b;a.Qh&&uh(a);wh(a,"enabled",b?"1":"0")}
function xh(a){return!!a.Ka&&!a.Ka.closed}t.yn=function(){this.ii.clear();xh(this)&&this.Bk()};
t.tn=function(a){if(!this.Jn[a.Ul]){var b=this.Kn,c;switch(a.Bc.value){case uc.value:c="dbg-sh";break;case vc.value:c="dbg-sev";break;case wc.value:c="dbg-w";break;case xc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.bk," ");if(b.ao){var e=new Date(a.Im);d.push("[",mh(e.getFullYear()-2E3)+mh(e.getMonth()+1)+mh(e.getDate())+" "+mh(e.getHours())+":"+mh(e.getMinutes())+":"+mh(e.getSeconds())+"."+mh(Math.floor(e.getMilliseconds()/10)),"] ")}b.co&&d.push("[",sb(nh(a,b.fo.get())),"s] ");b.bo&&
d.push("[",mb(a.Ul),"] ");d.push('<span class="',c,'">',lb(sb(mb(a.$l))));b.Bm&&a.zj&&d.push("<br>",lb(sb(a.yj||"")));d.push("</span><br>");b=d.join("");this.Qh?(uh(this),this.ii.add(b),yh(this,b)):this.ii.add(b);this.Gn&&a.Bc.value>=vc.value&&vh(this,i)}};function yh(a,b){a.xf.push(b);w.clearTimeout(a.vl);750<Aa()-a.Oj?a.Ak():a.vl=w.setTimeout(za(a.Ak,a),250)}
t.Ak=function(){this.Oj=Aa();if(xh(this)){var a=this.Ka.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.Ka.document.write(this.xf.join(""));this.xf.length=0;a&&this.Ka.scrollTo(0,1E6)}};function zh(a){for(var b=a.ii.Kj(),c=0;c<b.length;c++)yh(a,b[c])}
function uh(a){if(!xh(a)&&!a.zk){var b=th(a.Pd,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.zk=i;a.Ka=window.open("",Cb?a.Pd.replace(/[\s\-\.\,]/g,"_"):a.Pd,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.Ka&&!a.eo&&(alert("Logger popup was blocked"),a.eo=i);a.zk=n;a.Ka&&a.Bk()}}t.Xh=s("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
t.Bk=function(){xh(this)||(this.Ka.document.open(),yh(this,"<style>"+this.Xh()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Ym+"<br><small>Logger: "+this.Pd+"</small></div><hr>"),zh(this))};function wh(a,b,c){b+=a.Pd;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Aa()+2592E6)).toUTCString()}
function th(a,b,c){var a=b+a,b=""+document.cookie,d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}t.$n=function(){xh(this)&&wh(this,"dbg",(this.Ka.screenX||this.Ka.screenLeft||0)+","+(this.Ka.screenY||this.Ka.screenTop||0)+","+(this.Ka.outerWidth||800)+","+(this.Ka.outerHeight||500))};function Ah(a,b){var c;c=a.className;c=oa(c)&&c.match(/\S+/g)||[];for(var d=ec(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=ac(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var Bh=!Cb||Sb();!Db&&!Cb||Cb&&Sb()||Db&&Qb("1.9.1");Cb&&Qb("9");function Ch(a,b){Tb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Dh?a.setAttribute(Dh[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Dh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Eh(a,b,c){function d(c){c&&b.appendChild(oa(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ja(f)&&!(qa(f)&&0<f.nodeType)?bc(Fh(f)?dc(f):f,d):d(f)}}function Fh(a){if(a&&"number"==typeof a.length){if(qa(a))return"function"==typeof a.item||"string"==typeof a.item;if(pa(a))return"function"==typeof a.item}return n}function Gh(a){this.pg=a||w.document||document}function Hh(a,b){return oa(b)?a.pg.getElementById(b):b}
Gh.prototype.ef=function(a,b,c){var d=this.pg,e=arguments,f=e[0],g=e[1];if(!Bh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',mb(g.name),'"');if(g.type){f.push(' type="',mb(g.type),'"');var j={};Wb(j,g);g=j;delete g.type}f.push(">");f=f.join("")}f=d.createElement(f);g&&(oa(g)?f.className=g:ia(g)?Ah.apply(l,[f].concat(g)):Ch(f,g));2<e.length&&Eh(d,f,e);return f};Gh.prototype.createElement=function(a){return this.pg.createElement(a)};Gh.prototype.createTextNode=function(a){return this.pg.createTextNode(a)};
Gh.prototype.appendChild=function(a,b){a.appendChild(b)};function Ih(a,b){if(Jh){var c=Kh(),d;for(d in c){var e=d.replace("fancywindow.sel.",""),e=J(e),f=e.Bc,g=window.localStorage.getItem(d).toString();(!f||f.toString()!=g)&&e.Pg(Bc(g))}}rh.call(this,a,b)}Ba(Ih,rh);var Jh;a:{try{Jh=!!window.localStorage.getItem;break a}catch(Lh){}Jh=n}t=Ih.prototype;
t.Ak=function(){this.Oj=Aa();if(xh(this)){for(var a=Hh(this.Ob,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.xf.length;c++){var d=this.Ob.ef("div","logmsg");d.innerHTML=this.xf[c];a.appendChild(d)}this.xf.length=0;this.Am();b&&(a.scrollTop=a.scrollHeight)}};
t.Bk=function(){if(xh(this)){var a=this.Ka.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Pd+"</title><style>"+this.Xh()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Pd+"</b></p><p>"+this.Ym+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(Cb?a.body:this.Ka).onresize=za(this.Am,this);this.Ob=new Gh(a);Hh(this.Ob,"openbutton").onclick=za(this.Wn,this);Hh(this.Ob,"closebutton").onclick=za(this.zn,this);Hh(this.Ob,"clearbutton").onclick=za(this.yn,this);Hh(this.Ob,"exitbutton").onclick=za(this.Hn,this);zh(this)}};
t.Wn=function(){var a=Hh(this.Ob,"optionsarea");a.innerHTML="";for(var b=Mh(),c=this.Ob,d=0;d<b.length;d++){var e=J(b[d]),e=c.ef("div",{},Nh(this,"sel"+b[d],e.Bc?e.Bc.name:"INHERIT"),c.ef("span",{},b[d]||"(root)"));a.appendChild(e)}Hh(this.Ob,"options").style.display="block";return n};
function Nh(a,b,c){for(var a=a.Ob,b=a.ef("select",{id:b}),d=0;d<zc.length;d++){var e=zc[d],f=a.ef("option",{},e.name);c==e.name&&(f.selected=i);b.appendChild(f)}b.appendChild(a.ef("option",{selected:"INHERIT"==c},"INHERIT"));return b}
t.zn=function(){Hh(this.Ob,"options").style.display="none";for(var a=Mh(),b=this.Ob,c=0;c<a.length;c++){var d=J(a[c]),e=Hh(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.Pg(l):d.Pg(Bc(e))}if(Jh){a=Mh();b=Kh();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=J(a[c]).Bc,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return n};
t.Am=function(){var a=this.Ob,b=Hh(a,"log"),c=Hh(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.pg.body.offsetHeight-c.offsetHeight-(Cb?4:0)+"px"};t.Hn=function(){vh(this,n);this.Ka&&this.Ka.close()};t.Xh=function(){return Ih.Me.Xh.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function Kh(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=l&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=i)}return a}function Mh(){var a=Ub(Dc);a.sort();return a};function Oh(a){this.y=this.x=l;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.rg=[]}t=Oh.prototype;t.set=function(a,b){this.x=a;this.y=b};t.add=function(a){this.x+=a.x;this.y+=a.y};t.sub=function(a){this.x-=a.x;this.y-=a.y};t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
t.h=function(a){return this.x==a.x&&this.y==a.y};function Ph(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function Qh(a){this.eb=this.za=l;2==arguments.length?arguments[0].y>arguments[1].y?(this.eb=arguments[0],this.za=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.eb=arguments[0],this.za=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.za=arguments[0],this.eb=arguments[1]):(this.za=arguments[0],this.eb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.eb.rg.push(this)}
function Rh(a,b,c){this.d=[l,l,l];this.xa=[l,l,l];this.Ml=n;this.oa=[n,n,n];this.ra=[n,n,n];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}t=Rh.prototype;t.Oc=function(a){return this.d[a]};t.Fi=function(a,b){for(var c=i,d=0;d<arguments.length;++d)c=c&&(arguments[d].h(this.d[0])||arguments[d].h(this.d[1])||arguments[d].h(this.d[2]));return c};t.Pk=function(){0!=arguments.length&&(this.Ml=arguments[0]);return this.Ml};
t.uc=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.h(this.d[2])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[2])?this.xa[0]=b:c.h(this.d[0])&&d.h(this.d[2])||c.h(this.d[2])&&d.h(this.d[0])?this.xa[1]=b:c.h(this.d[0])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[0])?this.xa[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.Fi(this.d[1],this.d[2])?(this.xa[0]=b,b.uc(this.d[1],this.d[2],this)):b.Fi(this.d[0],
this.d[2])?(this.xa[1]=b,b.uc(this.d[0],this.d[2],this)):b.Fi(this.d[0],this.d[1])&&(this.xa[2]=b,b.uc(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function Sh(a){a.xa[0]=l;a.xa[1]=l;a.xa[2]=l}function Th(a){a.ra[0]=n;a.ra[1]=n;a.ra[2]=n}function Uh(a,b){return b.h(a.d[0])?a.d[2]:b.h(a.d[1])?a.d[0]:b.h(a.d[2])?a.d[1]:l}function Vh(a,b){return b.h(a.d[0])?a.d[1]:b.h(a.d[1])?a.d[2]:b.h(a.d[2])?a.d[0]:l}
function Wh(a,b){return b.h(a.d[0])?a.xa[1]:b.h(a.d[1])?a.xa[2]:a.xa[0]}function Xh(a,b){return b.h(a.d[0])?a.xa[2]:b.h(a.d[1])?a.xa[0]:a.xa[1]}function Yh(a,b){return b.h(a.d[0])?a.oa[1]:b.h(a.d[1])?a.oa[2]:a.oa[0]}function Zh(a,b){return b.h(a.d[0])?a.oa[2]:b.h(a.d[1])?a.oa[0]:a.oa[1]}function $h(a,b,c){b.h(a.d[0])?a.oa[1]=c:b.h(a.d[1])?a.oa[2]=c:a.oa[0]=c}function ai(a,b,c){b.h(a.d[0])?a.oa[2]=c:b.h(a.d[1])?a.oa[0]=c:a.oa[1]=c}
function bi(a,b){return b.h(a.d[0])?a.ra[1]:b.h(a.d[1])?a.ra[2]:a.ra[0]}function ci(a,b){return b.h(a.d[0])?a.ra[2]:b.h(a.d[1])?a.ra[0]:a.ra[1]}function di(a,b,c){b.h(a.d[0])?a.ra[1]=c:b.h(a.d[1])?a.ra[2]=c:a.ra[0]=c}function ei(a,b,c){b.h(a.d[0])?a.ra[2]=c:b.h(a.d[1])?a.ra[0]=c:a.ra[1]=c}function fi(a,b){return b.h(a.d[0])?a.xa[0]:b.h(a.d[1])?a.xa[1]:a.xa[2]}
t.Ki=function(a){if(1==arguments.length)this.Ki(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.h(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.h(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.h(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function gi(a,b,c){if(b.h(a.d[0])){if(c.h(a.d[1]))return 2;if(c.h(a.d[2]))return 1}else if(b.h(a.d[1])){if(c.h(a.d[2]))return 0;if(c.h(a.d[0]))return 2}else if(b.h(a.d[2])){if(c.h(a.d[0]))return 1;if(c.h(a.d[1]))return 0}return-1}
t.Uf=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.oa[arguments[0]]=i:this.Uf(arguments[0].za,arguments[0].eb);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.h(this.d[0])&&b.h(this.d[1])||c.h(this.d[1])&&b.h(this.d[0]))this.oa[2]=i;else if(c.h(this.d[0])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[0]))this.oa[1]=i;else if(c.h(this.d[1])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[1]))this.oa[0]=i}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var hi=3*Math.PI/4,ii=Math.PI/2;function ji(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1.0E-16<a&&1.0E-16>a?0:0<a?-1:1}function ki(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;return 1.0E-16>=f*(b.y-d)-(b.x-e)*a?n:1.0E-16>=(c.x-e)*a-f*(c.y-d)?n:i}
function li(a){this.s=this.next=this.Xd=this.e=l;this.value=0;1==arguments.length?(this.e=arguments[0],this.value=this.e.x):2==arguments.length?(this.e=arguments[0],this.Xd=arguments[1],this.value=this.e.x):alert("Invalid poly2tri.Node constructor call!")}function mi(a,b){this.wg=a;this.jk=b;this.Og=a}mi.prototype.head=ea("wg");mi.prototype.Mi=function(a){var b=this.Og;if(a<b.value)for(;(b=b.s)!=l;){if(a>=b.value)return this.Og=b}else for(;(b=b.next)!=l;)if(a<b.value)return this.Og=b.s;return l};
function ni(){this.Wb=this.xc=this.td=l;this.width=0;this.Pj=n}ni.prototype.Ei=function(){this.Wb=this.xc=this.td=l;this.width=0;this.Pj=n};function oi(){this.oa=l;this.right=n}function pi(a){this.Pm=[];this.jc=[];this.d=a;this.rg=[];this.jk=this.wg=this.ug=l;this.P=new ni;this.qg=new oi;qi(this,this.d)}pi.prototype.head=ea("wg");function qi(a,b){for(var c=0;c<b.length;++c)a.rg.push(new Qh(b[c],b[(c+1)%b.length]))}pi.prototype.Oc=function(a){return this.d[a]};pi.prototype.Mi=function(a){return this.ug.Mi(a.x)};
function ri(a,b){for(var c=0;3>c;++c)if(b.xa[c]==l){var d;a:{d=a.ug;var e=Uh(b,b.Oc(c)),f=e.x,g=d.Og,j=g.e.x;if(f==j)if(e.h(g.s.e))g=g.s;else if(e.h(g.next.e))g=g.next;else{if(!e.h(g.e)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=l;break a}}else if(f<j)for(;(g=g.s)!=l&&!e.h(g.e););else for(;(g=g.next)!=l&&!e.h(g.e););g!=l&&(d.Og=g);d=g}d!=l&&(d.Xd=b)}}function si(a,b){if(b!=l&&!b.Pk()){b.Pk(i);a.Pm.push(b);for(var c=0;3>c;++c)b.oa[c]||si(a,b.xa[c])}}
function ti(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.qg.oa=c;b.qg.right=c.za.x>c.eb.x;if(!ui(d.Xd,c.za,c.eb)){var e=b;if(e.qg.right)for(var f=d;f.next.e.x<c.za.x;)-1==ji(c.eb,f.next.e,c.za)?vi(e,c,f):f=f.next;else for(f=d;f.s.e.x>c.za.x;)1==ji(c.eb,f.s.e,c.za)?wi(e,c,f):f=f.s;ti(b,c.za,c.eb,d.Xd,c.eb)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!ui(e,c,d)){var g=Vh(e,f),g=ji(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var j=Uh(e,f),j=ji(d,j,c);0==j?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==j?(e=1==g?Xh(e,f):Wh(e,f),ti(b,c,d,e,f)):xi(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function ui(a,b,c){var d=gi(a,b,c);return-1!=d?(a.Uf(d),a=a.xa[d],a!=l&&a.Uf(b,c),i):n}function yi(a,b){var c=new Rh(b.s.e,b.e,b.next.e);c.uc(b.s.Xd);c.uc(b.Xd);a.jc.push(c);b.s.next=b.next;b.next.s=b.s;zi(a,c)||ri(a,c)}
function Ai(a){var b=a.next.e.x-a.e.x,c=a.next.e.y-a.e.y,d=a.s.e.x-a.e.x,a=a.s.e.y-a.e.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function zi(a,b){for(var c=0;3>c;++c)if(!b.ra[c]){var d=b.xa[c];if(d!=l){var e=b.Oc(c),f=Uh(d,Uh(b,e)),g=f.h(d.d[0])?0:f.h(d.d[1])?1:f.h(d.d[2])?2:-1;if(d.oa[g]||d.ra[g])b.oa[c]=d.oa[g];else{var j;var k=Vh(b,e),m=Uh(b,e);j=e.x-f.x;var o=e.y-f.y,r=k.x-f.x,k=k.y-f.y,q=j*k-r*o;if(0>=q)j=n;else{var u=m.x-f.x,m=m.y-f.y,v=u*o-j*m;j=0>=v?n:0<(j*j+o*o)*(r*m-u*k)+(r*r+k*k)*v+(u*u+m*m)*q}if(j)return b.ra[c]=i,d.ra[g]=i,Bi(b,e,d,f),(e=!zi(a,b))&&ri(a,b),(e=!zi(a,d))&&ri(a,d),b.ra[c]=n,d.ra[g]=n,i}}}return n}
function Bi(a,b,c,d){var e,f,g,j;e=Xh(a,b);f=Wh(a,b);g=Xh(c,d);j=Wh(c,d);var k,m,o,r;k=Zh(a,b);m=Yh(a,b);o=Zh(c,d);r=Yh(c,d);var q,u,v,y;q=ci(a,b);u=bi(a,b);v=ci(c,d);y=bi(c,d);a.Ki(b,d);c.Ki(d,b);ei(c,b,q);di(a,b,u);ei(a,d,v);di(c,d,y);ai(c,b,k);$h(a,b,m);ai(a,d,o);$h(c,d,r);Sh(a);Sh(c);e&&c.uc(e);f&&a.uc(f);g&&a.uc(g);j&&c.uc(j);a.uc(c)}
function Ci(a,b){if(!(a.P.width>(a.P.Pj?a.P.td.e.y-b.e.y:a.P.Wb.e.y-b.e.y))){yi(a,b);var c;if(!(b.s==a.P.td&&b.next==a.P.Wb)){if(b.s==a.P.td){c=ji(b.e,b.next.e,b.next.next.e);if(1==c)return;b=b.next}else if(b.next==a.P.Wb){c=ji(b.e,b.s.e,b.s.s.e);if(-1==c)return;b=b.s}else b=b.s.e.y<b.next.e.y?b.s:b.next;Ci(a,b)}}}function vi(a,b,c){c.e.x<b.za.x&&(-1==ji(c.e,c.next.e,c.next.next.e)?Di(a,b,c):(Ei(a,b,c),vi(a,b,c)))}
function Di(a,b,c){yi(a,c.next);c.next.e!=b.za&&-1==ji(b.eb,c.next.e,b.za)&&-1==ji(c.e,c.next.e,c.next.next.e)&&Di(a,b,c)}function Ei(a,b,c){-1==ji(c.next.e,c.next.next.e,c.next.next.next.e)?Di(a,b,c.next):-1==ji(b.eb,c.next.next.e,b.za)&&Ei(a,b,c.next)}function wi(a,b,c){c.e.x>b.za.x&&(1==ji(c.e,c.s.e,c.s.s.e)?Fi(a,b,c):(Gi(a,b,c),wi(a,b,c)))}function Gi(a,b,c){1==ji(c.s.e,c.s.s.e,c.s.s.s.e)?Fi(a,b,c.s):1==ji(b.eb,c.s.s.e,b.za)&&Gi(a,b,c.s)}
function Fi(a,b,c){yi(a,c.s);c.s.e!=b.za&&1==ji(b.eb,c.s.e,b.za)&&1==ji(c.e,c.s.e,c.s.s.e)&&Fi(a,b,c)}
function xi(a,b,c,d,e){var f=fi(d,e);if(f==l)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Uh(f,Uh(d,e));ki(e,Vh(d,e),Uh(d,e),g)?(Bi(d,e,f,g),ri(a,d),ri(a,f),e==c&&g==b?c==a.qg.oa.eb&&b==a.qg.oa.za&&(d.Uf(b,c),f.Uf(b,c),zi(a,d),zi(a,f)):(-1==ji(c,g,b)?(g=gi(f,e,g),f.ra[g]=i,zi(a,f),Th(f)):(g=gi(d,e,g),d.ra[g]=i,zi(a,d),Th(d),d=f),xi(a,b,c,d,e))):(g=Hi(b,c,f,g),Ii(a,b,c,d,f,g),ti(a,b,c,d,e))}}
function Hi(a,b,c,d){a=ji(b,d,a);if(1==a)return Vh(c,d);if(-1==a)return Uh(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function Ii(a,b,c,d,e,f){var g=fi(e,f);g==l?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Uh(g,Uh(e,f)),ki(c,Vh(d,c),Uh(d,c),e)?xi(a,c,e,g,e):(e=Hi(b,c,g,e),Ii(a,b,c,d,g,e)))};function Ji(){this.name="ogGeometry";this.type=Na;this.sd="";this.options=this.yc=this.ld=l;this.Jc=[];this.Jc.X=[0,0,0];this.ve=this.wa=-1;this.color=[1,1,1,1];this.ic=[1,1,1,1];this.Sl=10;this.Zl=-1E3;this.Yl=9E3}Ji.prototype=new F;t=Ji.prototype;t.ya=function(a){this.options=a;a.url&&"GeoJSON"==a.type&&Ki(this,a.url)};t.Oa=function(){Li(this).oh(this.wa)};function Li(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.lk);return b}t.ca=p();t.ea=p();
t.dj=function(){4==this.N.readyState&&(404==this.N.status?this.yc&&this.yc(this.id):this.Mc($c(this.N.responseText)))};
function Mi(a,b,c,d){var e={Hg:n,og:0,Rb:[0,0,0],Xn:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],o=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],r=g*k-j*j;1.0E-14>r?(e.Hg=i,f=0,g=j>k?m/j:o/k):(f=(j*o-k*m)/r,g=(g*o-j*m)/r);e.Rb=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Xn=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function Ni(a,b,c,d,e,f,g,j,k,m,o){m.push(b[0]);m.push(b[1]);m.push(b[2]);b=a;a++;m.push(f[0]);m.push(f[1]);m.push(f[2]);f=a;a++;m.push(e[0]);m.push(e[1]);m.push(e[2]);e=a;a++;m.push(k[0]);m.push(k[1]);m.push(k[2]);k=a;a++;m.push(c[0]);m.push(c[1]);m.push(c[2]);c=a;a++;m.push(g[0]);m.push(g[1]);m.push(g[2]);g=a;a++;m.push(d[0]);m.push(d[1]);m.push(d[2]);d=a;a++;m.push(j[0]);m.push(j[1]);m.push(j[2]);j=a;a++;o.push(c);o.push(g);o.push(d);o.push(g);o.push(j);o.push(d);o.push(b);o.push(e);o.push(f);
o.push(f);o.push(e);o.push(k);o.push(b);o.push(f);o.push(c);o.push(f);o.push(g);o.push(c);o.push(e);o.push(d);o.push(j);o.push(k);o.push(e);o.push(j);o.push(b);o.push(c);o.push(e);o.push(c);o.push(d);o.push(e);o.push(f);o.push(j);o.push(g);o.push(f);o.push(k);o.push(j);return a}
function Oi(a,b,c){var d={VertexSemantic:"",Vertices:l,IndexSemantic:"",Indices:l,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new N(a.parent.parent.c);b.Mc(d,l,l,b);4==a.color.length?b.zd.t(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.zd.t(a.color[0],a.color[1],a.color[2],1);return b}
t.Mc=function(a){Pi("CreateFromJSONObject");var b=n;if("FeatureCollection"==a.type&&(Pi("[GeoJSON Parser] type = FeatureCollection"),x(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(x(a[d].type)&&"Feature"==a[d].type&&x(a[d].properties)&&x(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;x(e.color)&&(this.color=e.color);x(e.highlightcolor)&&(this.ic=e.highlightcolor);x(e.linewidth)&&(this.Sl=e.linewidth);x(e.minelv)&&(this.Zl=e.minelv);x(e.maxelv)&&(this.Yl=e.maxelv);if(x(f.type))if(e=
f.type,"LineString"==e)x(f.coordinates&&ia(f.coordinates))&&(b=Qi(this,f.coordinates));else if("MultiLineString"==e){if(x(f.coordinates&&ia(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)Qi(this,f[e])&&(b=i)}}else if("Polygon"==e){if(x(f.coordinates&&ia(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new R;var k=b.length;if(0==k)b=n;else{if(1<=k){for(var m=0;m<k;m++)if(0==m)for(var o=0;o<b[m].length;o++)g.push(new Oh(b[m][o][0],b[m][o][1],e)),j.push([b[m][o][0],b[m][o][1]]),e++;else{for(var r=
[],o=0;o<b[m].length;o++)r.push(new Oh(b[m][o][0],b[m][o][1]),e),j.push([b[m][o][0],b[m][o][1]]),e++;f.push(r)}b=new pi(g);e=h;for(e in f)for(k in g=b,j=f[e],qi(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;m=e.d[0].y;k=e.d[0].y;o=h;for(o in e.d)if(r=e.d[o],r.x>g&&(g=r.x),r.x<j&&(j=r.x),r.y>m&&(m=r.y),r.y<k)k=r.y;m=0.3*(m-k);e.wg=new Oh(g+0.3*(g-j),k-m);e.jk=new Oh(j-m,k-m);e.d.sort(Ph);e=f;k=j=g=h;k=new Rh(e.d[0],e.jk,e.wg);e.jc.push(k);g=new li(k.Oc(1),k);j=new li(k.Oc(0),k);k=new li(k.Oc(2));
e.ug=new mi(g,k);g.next=j;j.next=k;j.s=g;k.s=j;e=f;for(g=1;g<e.d.length;++g){var j=e.Oc(g),k=e,m=j,o=k.Mi(m),r=k,q=m,u=o,v=new Rh(q,u.e,u.next.e);v.uc(u.Xd);r.jc.push(v);q=new li(q);q.next=u.next;q.s=u;u.next.s=q;u.next=q;zi(r,v)||ri(r,v);r=q;m.x<=o.e.x+1.0E-16&&yi(k,o);m=r;o=m.next;for(u=h;o.next!=l;){u=Ai(o);if(u>ii||u<-ii)break;yi(k,o);o=o.next}for(o=m.s;o.s!=l;){u=Ai(o);if(u>ii||u<-ii)break;yi(k,o);o=o.s}if(m.next!=l&&m.next.next!=l&&(u=Math.atan2(m.e.y-m.next.next.e.y,m.e.x-m.next.next.e.x),
u<hi)){k.P.td=-1==ji(m.e,m.next.e,m.next.next.e)?m.next.next:m.next;for(k.P.xc=k.P.td;k.P.xc.next!=l&&k.P.xc.e.y>=k.P.xc.next.e.y;)k.P.xc=k.P.xc.next;if(k.P.xc!=k.P.td){for(k.P.Wb=k.P.xc;k.P.Wb.next!=l&&k.P.Wb.e.y<k.P.Wb.next.e.y;)k.P.Wb=k.P.Wb.next;k.P.Wb!=k.P.xc&&(k.P.width=k.P.Wb.e.x-k.P.td.e.x,k.P.Pj=k.P.td.e.y>k.P.Wb.e.y,Ci(k,k.P.xc))}}k=r;for(m=0;m<j.rg.length;++m)ti(e,j.rg[m],k)}e=f.ug.head().next.Xd;for(g=f.ug.head().next.e;!Yh(e,g);)e=Xh(e,g);si(f,e);b=b.Pm;f=[];for(e=0;e<b.length;e++)g=
b[e].Oc(1).index,j=b[e].Oc(2).index,f.push(b[e].Oc(0).index),f.push(g),f.push(j)}b=i}}}else"MultiPolygon"==e?Ig("MultiPolygon is not yet supported"):"Point"==e?Ig("Point is not yet supported"):"MultiPoint"==e&&Ig("MultiPoint is not yet supported")}b&&(this.wa=Li(this).Ck(this.Jc))};function Ri(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function Ki(a,b){b==l?alert("invalid json-url"):(a.sd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.sd,i),a.N.onreadystatechange=function(){a.dj()},a.N.send())}
function Qi(a,b){var c=new R,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var j=0;j<g;j++){var k=b[j][0],m=b[j][1];c.t(k,m,a.Yl);c.ma(d);c.t(k,m,a.Zl);c.ma(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return n;g=f.length;for(k=e=d=c=0;k<f.length;k++)c+=f[k][0]/g,d+=f[k][1]/g,e+=f[k][2]/g;a.Jc.X[0]=c;a.Jc.X[1]=d;a.Jc.X[2]=e;var g=[],k=[],o=5.960465188081883E-8*a.Sl,m=0,r,q,u,v,y,B,ka,da,S,la,ma,P,H,U,V,W,ra,sa,ta;if(4==f.length){j=f[0];r=f[1];q=f[2];u=f[3];var C=q[0]-j[0],Z=q[1]-j[1],
na=q[2]-j[2],$=r[0]-j[0],ha=r[1]-j[1],ba=r[2]-j[2],f=Z*ba-na*ha;H=na*$-C*ba;m=C*ha-Z*$;C=o/Math.sqrt(f*f+H*H+m*m);f*=C;H*=C;m*=C;B=[j[0]+f,j[1]+H,j[2]+m];ka=[r[0]+f,r[1]+H,r[2]+m];da=[q[0]+f,q[1]+H,q[2]+m];S=[u[0]+f,u[1]+H,u[2]+m];la=[j[0]-f,j[1]-H,j[2]-m];ma=[r[0]-f,r[1]-H,r[2]-m];P=[q[0]-f,q[1]-H,q[2]-m];H=[u[0]-f,u[1]-H,u[2]-m];Ni(0,B,la,P,da,ka,ma,H,S,k,g);Ri(k,[c,d,e]);a.Jc.push(Oi(a,k,g))}else if(6<=f.length){j=f[0];r=f[1];q=f[2];u=f[3];v=f[4];y=f[5];C=q[0]-j[0];Z=q[1]-j[1];na=q[2]-j[2];$=r[0]-
j[0];ha=r[1]-j[1];ba=r[2]-j[2];U=Z*ba-na*ha;V=na*$-C*ba;W=C*ha-Z*$;C=o/Math.sqrt(U*U+V*V+W*W);U*=C;V*=C;W*=C;B=[j[0]+U,j[1]+V,j[2]+W];ka=[r[0]+U,r[1]+V,r[2]+W];la=[j[0]-U,j[1]-V,j[2]-W];ma=[r[0]-U,r[1]-V,r[2]-W];for(j=4;j<f.length;j+=2)v=f[j],y=f[j+1],C=v[0]-q[0],Z=v[1]-q[1],na=v[2]-q[2],$=u[0]-q[0],ha=u[1]-q[1],ba=u[2]-q[2],ra=Z*ba-na*ha,sa=na*$-C*ba,ta=C*ha-Z*$,C=o/Math.sqrt(ra*ra+sa*sa+ta*ta),ra*=C,sa*=C,ta*=C,$=u[0]-r[0],ha=u[1]-r[1],ba=u[2]-r[2],S=Math.sqrt($*$+ha*ha+ba*ba),$/=S,ha/=S,ba/=S,
C=u[0]-y[0],Z=u[1]-y[1],na=u[2]-y[2],S=Math.sqrt(C*C+Z*Z+na*na),C/=S,Z/=S,P=[y[0]+ra,y[1]+sa,y[2]+ta],r=[y[0]-ra,y[1]-sa,y[2]-ta],H=[v[0]+ra,v[1]+sa,v[2]+ta],da=[v[0]-ra,v[1]-sa,v[2]-ta],S=Mi([ka[0],ka[1],ka[2]],[ka[0]+$,ka[1]+ha,ka[2]+ba],[P[0],P[1],P[2]],[P[0]+C,P[1]+Z,P[2]+ba]),P=Mi([ma[0],ma[1],ma[2]],[ma[0]+$,ma[1]+ha,ma[2]+ba],[r[0],r[1],P[2]],[r[0]+C,r[1]+Z,r[2]+ba]),r=Mi([B[0],B[1],B[2]],[B[0]+$,B[1]+ha,B[2]+ba],[H[0],H[1],H[2]],[H[0]+C,H[1]+Z,H[2]+ba]),C=Mi([la[0],la[1],la[2]],[la[0]+$,la[1]+
ha,la[2]+ba],[da[0],da[1],da[2]],[da[0]+C,da[1]+Z,da[2]+ba]),!S.Hg&&!P.Hg&&!r.Hg&&!C.Hg?(S=[S.Rb[0],S.Rb[1],S.Rb[2]],H=[P.Rb[0],P.Rb[1],P.Rb[2]],da=[r.Rb[0],r.Rb[1],r.Rb[2]],P=[C.Rb[0],C.Rb[1],C.Rb[2]]):(S=[u[0]+U,u[1]+V,u[2]+W],H=[u[0]-U,u[1]-V,u[2]-W],da=[q[0]+U,q[1]+V,q[2]+W],P=[q[0]-U,q[1]-V,q[2]-W]),m=Ni(m,B,la,P,da,ka,ma,H,S,k,g),U=ra,V=sa,W=ta,r=u,q=v,u=y,ka=S,ma=H,B=da,la=P;f=[y[0]+U,y[1]+V,y[2]+W];o=[y[0]-U,y[1]-V,y[2]-W];j=[v[0]+U,v[1]+V,v[2]+W];q=[v[0]-U,v[1]-V,v[2]-W];Ni(m,da,P,q,j,S,
H,o,f,k,g);Ri(k,[c,d,e]);a.Jc.push(Oi(a,k,g))}else return n;return i};function Si(){this.name="ogAoeImageLayer";this.type=Za;this.F=n;this.$a=[]}Si.prototype=new F;t=Si.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.$a.length;a++){for(var b=a;b<this.$a.length;b++)this.$a[a].wa-=1;G(this.$a[a])}};t.ca=function(){this.F=i;for(var a=0;a<this.$a.length;a++)this.$a[a].ca()};t.ea=function(){this.F=n;for(var a=0;a<this.$a.length;a++)this.$a[a].ea()};t.zi=function(a){this.$a.push(a);a.ve=this.id};
t.Ui=function(a){for(var b=0;b<this.$a.length;b++)if(this.$a[b]==a){for(var c=b+1;c<this.$a.length;c++)this.$a[c].wa-=1;G(this.$a[b]);this.$a.splice(b,1)}};function Ti(){this.name="ogVectorLayer";this.type=Ja;this.F=n;this.W=[]}Ti.prototype=new F;t=Ti.prototype;t.ya=p();t.oh=function(a){for(var b=0;b<this.W.length;b++)this.W[b]==a&&(G(this.W[b]),this.W.splice(b,1))};t.Oa=function(){Ui(this)};t.ca=function(){this.F=i;for(var a=0;a<this.W.length;a++)this.W[a].ca()};t.ea=function(){this.F=n;for(var a=0;a<this.W.length;a++)this.W[a].ea()};function Ui(a){for(var b=0;b<a.W.length;b++){for(var c=b;c<a.W.length;c++)a.W[b].wa-=1;G(a.W[b])}}
t.Ck=function(a){this.W.push(a);a.ve=this.id};t.oh=function(a){for(var b=0;b<this.W.length;b++)if(this.W[b]==a){for(var c=b+1;c<this.W.length;c++)this.W[c].wa-=1;G(this.W[b]);this.W.splice(b,1)}};function Vi(){this.name="ogImageLayer";this.type=Da;this.yg=-1}Vi.prototype=new F;Vi.prototype.eh=function(){var a=l,b=this.parent.parent.parent.c;b.f&&b.f.G&&(a=b.f.G.Qa);return a};Vi.prototype.Ci=function(a){var b=this.eh();b&&(this.yg=b.Ci(a))};Vi.prototype.nh=function(){var a=this.eh();a&&-1!=this.yg&&a.nh(this.yg)};Vi.prototype.ya=function(a){this.Ci(a)};function Wi(){this.name="ogBillboardLayer";this.type=Ya;this.F=n;this.Da=[]}Wi.prototype=new F;t=Wi.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.Da.length;a++)G(this.Da[a])};t.ca=function(){this.F=i;for(var a=0;a<this.Da.length;a++)this.Da[a].ca()};t.ea=function(){this.F=n;for(var a=0;a<this.Da.length;a++)this.Da[a].ea()};t.Vi=function(a){for(var b=0;b<this.Da.length;b++)this.Da[b]==a&&(G(this.Da[b]),this.Da.splice(b,1))};t.Ai=function(a){this.Da.push(a)};function Xi(){this.name="ogPointSpriteObject";this.type=ab;this.yd=this.options=this.Gc=l;this.ei=this.Oh=0}Xi.prototype=new F;t=Xi.prototype;t.ya=function(a){this.options=a;this.Gc=new pd(this.parent.parent.parent.c);a.Vertices&&this.Gc.sh(a.Vertices);a.PointUrl&&(Yi(this,a.PointUrl),this.Tn=a.NumberOfPoints,this.Gc.xi=this.Tn);this.Gc.ph(a.Center[0],a.Center[1],a.Center[2])};t.Oa=function(){this.Gc&&(this.Gc.k(),this.Gc=l,this.status=3)};t.ca=function(){this.Gc.F=i};t.Ed=p();
t.ea=function(){this.Gc.F=n};function Yi(a,b){b==l?alert("invalid xyzurl"):(a.no=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.no,i),a.N.onreadystatechange=function(){4==a.N.readyState&&(404==a.N.status?alert("xyz-file not found..."):Zi(a))},a.N.onprogress=function(){Zi(a)},a.N.send(),a.Oh=0,a.ei=0)}
function Zi(a){var b=a.N.responseText;a.Oh=b.lastIndexOf("\n");for(var b=b.substr(a.ei,a.Oh-a.ei-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Gc.sh(c);a.ei=a.Oh};function $i(){this.name="ogGeometryLayer";this.type=Ha;this.F=n;this.$=[]}$i.prototype=new F;t=$i.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.$.length;a++){for(var b=a;b<this.$.length;b++)this.$[a].wa-=1;G(this.$[a])}};t.ca=function(){this.F=i;for(var a=0;a<this.$.length;a++)this.$[a].ca()};t.ea=function(){this.F=n;for(var a=0;a<this.$.length;a++)this.$[a].ea()};t.ae=function(a){this.$.push(a);a.ve=this.id};
t.Wi=function(a){for(var b=0;b<this.$.length;b++)if(this.$[b]==a){for(var c=b+1;c<this.$.length;c++)this.$[c].wa-=1;G(this.$[b]);this.$.splice(b,1)}};function aj(){this.name="ogSurface";this.type=Pa;this.elevation=this.latitude=this.longitude=0;this.status=ib;this.q=l}aj.prototype=new F;t=aj.prototype;t.Ed=function(a,b,c,d,e,f){this.q.ph(a,b,c,d,e,f)};
t.cg=function(a,b,c,d){var e=this.q,f=new R(a,b,c),c=Array(3);f.ma(c);f=new M;f.be(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new M;c.Dd(a);a=new M;a.Dd([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Ye();b=new M;b.bh(d[0],d[1],d[2],d[3]);b.Ye();f=new M;f.da(a,b);d=new M;d.da(a,f);b=new M;b.Dd([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Ye();a=new M;a.da(b,d);d=new M;
d.da(c,a);c=new M;c.Cd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);a=new M;a.da(d,c);e.la=a;kd(e)};
t.ya=function(a){if(a==l)I(J("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)I(J("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Oa)I(J("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.q=new N(this.parent.parent.parent.parent.c);this.q.F=n;this.q.Un=this.id;var b=this;this.q.Mc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.Ed(b.longitude,b.latitude,b.elevation);b.status=hb;b.J&&b.J(b.id)},function(){b.status=
3;b.I&&b.I(b.id)});this.sd=a.url;this.q.Tm=a.jsonobject.VisibilityDistance?1.1920930376163766E-7*a.jsonobject.VisibilityDistance:0.005960465188081883}a.longitude&&a.latitude&&a.elevation&&(this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation)}};t.Oa=function(){this.q&&(this.q.k(),this.q=l,this.status=3)};t.ea=function(){this.q&&(this.q.F=n)};t.ca=function(){this.q&&(this.q.F=i)};t.he=function(a,b,c,d){this.q&&this.q.he(a,b,c,d)};var bj=-1;function X(a,b,c){var d=l;a==A?d=new Vg:a==D?d=new Xg:a==Ca?d=new Wg:a==Da?d=new Vi:a==Ea?d=new ch:a!=Fa&&(a==Ga?d=new ah:a==Ha?d=new $i:a!=Ia&&a!=Ka&&(a==La?d=new Gc:a==Wa?d=new Zg:a!=Ma&&(a==Na?d=new If:a==Oa?d=new ih:a==Pa?d=new aj:a==Ra?d=new Mc:a!=Sa&&a!=Ta&&a!=Ua&&a!=Va&&(a==Xa?d=new gh:a==Ya?d=new Wi:a==Za?d=new Si:a==$a?d=new xe:a==ab?d=new Xi:a==bb?d=new eh:a==Ja?d=new Ti:a==Qa&&(d=new Ji)))));d!=l&&(bj++,d.id=bj,d.parent=b,jb.push(d),d.ya(c));return d}z("_CreateObject",X);
z("ogGetObjectType",function(a){return(a=E(a))?a.type:cb});z("ogGetObjectName",function(a){return(a=E(a))?a.name:""});z("ogGetNumObjects",function(){return jb.length});z("ogGetObjectAt",function(a){a=0>a||a>jb.length-1?l:jb[a];return a==l?-1:a.id});z("ogGetParentObject",function(a){return(a=E(a))&&a.parent?a.parent.id:-1});z("ogSetObjectName",function(a,b){var c=E(a);c&&(c.name=b)});
z("ogGetObjectByName",function(a){a:{for(var b=0;b<jb.length;b++)if(jb[b].name==a){a=jb[b];break a}a=l}return a?a.id:-1});z("ogGetObjectStatus",function(a){return(a=E(a))?a.status:3});z("ogOnLoad",function(a,b){var c=E(a);c&&(c.status==hb?b(a):c.J=b)});z("ogOnFailure",function(a,b){var c=E(a);c&&(3==c.status?b(a):c.I=b)});function cj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=X(A,l,a);return a!=l?a.id:-1}z("ogCreateContext",cj);
z("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?i:n;f.canvas=a;return cj(f,c,d,e)});z("ogDestroyContext",function(a){(a=E(a))&&a.type==A&&G(a)});z("ogGetWidth",function(a){return(a=E(a))&&a.type==A?a.c?a.c.width:0:0});z("ogGetHeight",function(a){return(a=E(a))&&a.type==A?a.c?a.c.height:0:0});z("ogGetScene",function(a){return(a=E(a))&&a.type==A&&a.f?a.f.id:-1});z("ogSetBackgroundColor",function(a,b,c,d,e){(a=E(a))&&a.type==A&&a.c&&a.c.Zk(b,c,d,e)});
z("ogSetTextColor",function(a,b,c,d){(a=E(a))&&a.type==A&&a.fontcolor.t(b,c,d,1)});z("ogDrawText",function(a,b,c,d){(a=E(a))&&a.type==A&&a.Ad(b,c,d)});z("ogGetTextSize",function(a,b){var c=E(a);if(c&&c.type==A&&(c=c.Hi(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});z("ogSetMouseDownFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.oe=b)});z("ogSetMouseUpFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.qe=b)});z("ogSetMouseMoveFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.pe=b)});
z("ogSetMouseWheelFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.jd=b)});z("ogSetKeyDownFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.sj=b)});z("ogSetKeyUpFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.tj=b)});z("ogSetResizeFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.kd=b)});z("ogSetRenderFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.Kd=b)});z("ogSetTimerFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.Ld=b)});
z("ogSetRenderGeometryFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.so=b)});z("ogSetBeginRenderFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.qo=b)});z("ogSetEndRenderFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.ro=b)});z("ogSetFlyToStartedFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.me=b)});z("ogSetInPositionFunction",function(a,b){var c=E(a);c&&c.type==A&&(c.ne=b)});z("ogSetNumRenderPasses",function(a,b){var c=E(a);c&&c.type==A&&(c.Bo=b)});z("ogExec",p());
z("ogSetArtworkDirectory",function(a){md=a});function dj(a,b){var c=E(a);if(c&&c.type==A){var d={};d.type=b;if(b==db||b==eb||b==fb||b==gb)return d=X(D,c,d),c.f=d,d.id;I(J("owg.og"),"** WARNING: wrong scene type");return-1}I(J("owg.og"),"** WARNING: context is not valid");return-1}z("ogCreateScene",dj);z("ogGetContext",function(a){if((a=E(a))&&a.type==D)if(a=a.parent)return a.id;return-1});z("ogGetWorld",function(a){if((a=E(a))&&a.type==D)if(a=a.Kf)return a.id;return-1});
z("ogPickGlobe",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==db?a.Yf(b,c):[n,0,0,0,0,0,0]});z("ogToCartesian",function(a,b,c,d){if((a=E(a))&&a.type==D&&a.Ic==db){var e=[];(new R(b,c,d)).ma(e)}return e||l});z("ogToWGS84",function(a,b,c,d){if((a=E(a))&&a.type==D&&a.Ic==db){var e=new R;e.Nc(b,c,d);e=[e.H[0],e.H[1],e.H[2]]}return e||l});z("ogCreateCamera",function(a){if((a=E(a))&&a.type==D){var b=X(Ra,a,l);a.Jh.push(b);return b.id}return-1});z("ogDestroyCamera",function(a){(a=E(a))&&a.type==Ra&&G(a)});
z("ogSetPosition",function(a,b,c,d){(a=E(a))&&a.type==Ra&&a.ta(b,c,d)});function ej(a){return(a=E(a))&&a.type==D?(a=a.ke,Oc(a),a.de()):l}z("ogGetPosition",ej);function fj(a,b,c,d){return(a=E(a))&&a.type==Ra?(360<b&&(b-=360),0>b&&(b=360+b),a.We(b,c,d)):l}z("ogSetOrientation",fj);z("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=E(a))&&a.type==Ra?a.rh(b,c,d,e):l});function gj(a){return(a=E(a))&&a.type==D?(a=a.ke,Oc(a),a.Sf()):l}z("ogGetOrientation",gj);
function hj(a){return(a=E(a))&&a.type==D?a.ke.id:-1}z("ogGetActiveCamera",hj);z("ogSetActiveCamera",function(a){(a=E(a))&&a.type==Ra&&Yg(a.parent,a.id)});z("ogGetNumCameras",function(a){if((a=E(a))&&a.type==D)return a.Jh.length});z("ogGetCameraAt",function(a,b){var c=E(a);return c&&c.type==D?c.Jh[b].id:-1});
z("ogLookAt",function(a,b,c,d){var e=hj(a);Oc(E(e));var f=ej(a),g=[];(new R(f.longitude,f.latitude,f.elevation)).ma(g);var j=new L(g[0],g[1],g[2]),k=[];(new R(b,c,d)).ma(k);b=(new L(k[0],k[1],k[2])).Mf();b.$i(j);j=new M;j.be(f.longitude,f.latitude);f=new M;f.ed(g[0],g[1],g[2]);g=new M;g.da(f,j);g.Ye();g=g.Ma(b);g.vc();g=g.a;f=g[0];j=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>j&&0<f&&(g=360-g);0>j&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=
gj(a);fj(e,g,f,a.roll)});function ij(a){if((a=E(a))&&a.type==D){var b={};b.scenetype=a.Ic;b=X(Ca,a,b);a.Kf=b;return b.id}return-1}z("ogCreateWorld",ij);z("ogCreateGlobe",function(a){var b=dj(a,db),a=ij(b),b=E(b),c=X(Ra,b,l);Oc(c);Yg(b,c.id);b.Jh.push(c);return a});z("ogSetNorthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==Ca)a.parent.parent.c.f.G.Qa.Be=[b,c,d]});z("ogSetSouthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==Ca)a.parent.parent.c.f.G.Qa.Le=[b,c,d]});
z("ogSetRenderQuality",function(a,b){var c=E(a);c&&c.type==Ca&&(c=c.parent.parent.c.f.G.Qa,0<b&&3>=b&&(c.xm=b))});z("ogSetRenderEffect",function(a,b,c){(a=E(a))&&a.type==Ca&&a.th(b,c)});z("ogLoadTextureAsync",function(a,b){var c=E(a);if(c&&c.type==D){var d={};d.url=b;return X(La,c,d).id}return-1});z("ogDestroyTexture",function(a){(a=E(a))&&a.type==La&&G(a)});z("ogBlitTexture",function(a,b,c,d){(a=E(a))&&a.type==La&&a.B(b,c,d)});
z("ogAddImageLayer",function(a,b){var c=E(a);return c&&c.type==Ca?X(Da,c,b).id:-1});z("ogRemoveImageLayer",function(a){if((a=E(a))&&a.type==Da)a.nh(),G(a)});z("ogAddElevationLayer",function(a,b){var c=E(a);return c&&c.type==Ca?X(Ea,c,b).id:-1});z("ogRemoveElevationLayer",function(a){if((a=E(a))&&a.type==Ea)a.nh(),G(a)});z("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=E(a))&&a.type==Ca?X(Ga,a,e).id:-1});
z("ogRemovePOILayer",function(a){(a=E(a))&&a.type==Ga&&G(a)});z("ogHidePOILayer",function(a){(a=E(a))&&a.type==Ga&&a.ca()});z("ogShowPOILayer",function(a){(a=E(a))&&a.type==Ga&&a.ea()});z("ogAddVectorLayer",function(a,b){var c=E(a);return c&&c.type==Ca?X(Ja,c,b).id:-1});z("ogRemoveVectorLayer",function(a){if((a=E(a))&&a.type==Ja)Ui(a),G(a)});z("ogLoadVectorAsync",function(a,b){var c=E(a);if(c&&c.type==Ja){var d=X(Qa,c.parent.parent,{url:b,type:"GeoJSON"});c.W.push(d);d.Ko=c;c=d.id}else c=-1;return c});
z("ogDestroyVector",function(a){if((a=E(a))&&a.type==Qa)if(a.j){var b=a.j;b&&b.type==Ja&&b.oh(a)}else G(a);return-1});z("ogCreatePOI",function(a,b){var c=E(a);if(c&&c.type==Ga){b.textstyle=c.Pe;b.iconstyle=c.te;var d=X(Wa,c.parent.parent,b);c.Aa.push(d);d.Co=c;c=d.id}else c=-1;return c});z("ogDestroyPOI",function(a){if((a=E(a))&&a.type==Wa)if(a.j){var b=a.j;if(b&&b.type==Ga)for(var c=0;c<b.Aa.length;c++)b.Aa[c]==a&&(G(b.Aa[c]),b.Aa.splice(c,1))}else G(a);return-1});
z("ogChangePOIText",function(a,b){var c=E(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Pe&&d.c.yf.Gk(c.sa,b,c.Pe)}});z("ogChangePOIIcon",function(a,b){var c=E(a);if(c&&c.type==Wa){var d=c.parent.parent;c.te&&d.c.yf.Fk(c.sa,b,c.te)}});z("ogChangePOISize",function(a,b){var c=E(a);c&&c.type==Wa&&c.sa.uh(b)});z("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=E(a))&&a.type==Wa){var e=[];(new R(b,c,d)).ma(e);b=e[0];c=e[1];e=e[2];a.sa.Ce?a.sa.ta(b,c,e,0):a.sa.ta(b,c,e,l)}});
z("ogChangePOIPosition",function(a,b,c,d){(a=E(a))&&a.type==Wa&&(a.sa.Ce?a.sa.ta(b,c,d,0):a.sa.ta(b,c,d,l))});z("ogHidePOI",function(a){(a=E(a))&&a.type==Wa&&a.ca()});z("ogShowPOI",function(a){(a=E(a))&&a.type==Wa&&a.ea()});z("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=E(a))&&a.type==Wa)a.sa.$j=new Zc(b,c,d,e)});z("ogPickPOI",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==db?a.$f(b,c):-1});
z("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==Ca?X(Ha,d,c).id:-1});z("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==Ca?X(Za,d,c).id:-1});z("ogCreateAoeImage",function(a,b){var c=E(a);if(c&&c.type==Za){var d=X($a,c.parent.parent,b);c.zi(d);return d.id}return-1});z("ogDestroyAoeImage",function(a){if((a=E(a))&&a.type==$a){var b=E(a.ve);b&&b.type==Za&&b.Ui(a)}return-1});
z("ogHideGeometryLayer",function(a){(a=E(a))&&a.type==Ha&&a.ca()});z("ogShowGeometryLayer",function(a){(a=E(a))&&a.type==Ha&&a.ea()});z("ogRemoveGeometryLayer",function(a){(a=E(a))&&a.type==Ha&&G(a);return-1});z("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=E(a);return d&&d.type==Ha?(c=X(Na,d.parent.parent,c),d.ae(c),c.id):-1});z("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=E(a);return d&&d.type==Ha?(c=X(Na,d.parent.parent,c),d.ae(c),c.id):-1});
z("ogDestroyGeometry",function(a){if((a=E(a))&&a.type==Na){var b=E(a.ve);b&&b.type==Ha&&b.Wi(a)}return-1});z("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=E(a))&&a.type==Na?a.Ed(b,c,d,e,f,g):-1});z("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=E(a))&&a.type==Na?a.cg(b,c,d,e):-1});z("ogGetNumMeshes",function(a){return(a=E(a))&&a.type==Na?a.wb.length:-1});z("ogGetMeshAt",function(a,b){var c=E(a);return c&&c.type==Na?c.wb[b].id:-1});
z("ogHideGeometry",function(a){(a=E(a))&&a.type==Na&&a.ca()});z("ogShowGeometry",function(a){(a=E(a))&&a.type==Na&&a.ea()});z("ogHighlightGeometry",function(a,b,c,d,e){(a=E(a))&&a.type==Na&&a.he(b,c,d,e)});z("ogPickGeometry",function(a,b,c){if((a=E(a))&&a.type==D&&a.Ic==db)if(b=a.fe(b,c),b=E(b))return b.parent.parent.id;return-1});z("ogCreatePolylineWGS84",function(a,b,c){return(a=E(a))&&a.type==Ha?(c.coords=b,c.type="EarthPolyline",b=X(Na,a.parent.parent,c),a.ae(b),b.id):-1});
z("ogGetSurfaceAt",function(a,b){var c=E(a);return c&&c.type==Oa?c.Fb[b].id:-1});z("ogHideMesh",function(a){(a=E(a))&&a.type==Oa&&a.ca()});z("ogShowMesh",function(a){(a=E(a))&&a.type==Oa&&a.ea()});z("ogPickMesh",function(a,b,c){if((a=E(a))&&a.type==D&&a.Ic==db)if(b=a.fe(b,c),b=E(b))return b.parent.id;return-1});z("ogHideSurface",function(a){(a=E(a))&&a.type==Pa&&a.ca()});z("ogShowSurface",function(a){(a=E(a))&&a.type==Pa&&a.ea()});
z("ogPickSurface",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==db?a.fe(b,c):-1});z("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==Ca?X(Ya,d,c).id:-1});z("ogRemoveBillboardLayer",function(a){(a=E(a))&&a.type==Ya&&G(a)});z("ogHideBillboardLayer",function(a){(a=E(a))&&a.type==Ya&&a.ca()});z("ogShowBillboardLayer",function(a){(a=E(a))&&a.type==Ya&&a.ea()});
z("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=E(a))&&a.type==Ya){var f={};f.canvas=b;f.position=[c,d,e];b=X(Xa,a.parent.parent,f);a.Ai(b);b.j=a.id;return b.id}return-1});z("ogDestroyBillboard",function(a){if((a=E(a))&&a.type==Xa)if(a.j){var b=E(a.j);b&&b.type==Ya&&b.Vi(a)}else G(a);return-1});z("ogHideBillboard",function(a){(a=E(a))&&a.type==Xa&&a.ca();return-1});z("ogShowBillboard",function(a){(a=E(a))&&a.type==Xa&&a.ea();return-1});
z("ogPickBillboard",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==db?a.Zf(b,c):-1});z("ogUpdateBillboard",function(a,b){var c=E(a);c&&c.type==Xa?(c.hc.canvas=b,c.hc.eg(),c=h):c=-1;return c});z("ogFlyTo",function(a,b,c,d,e,f,g){(a=E(a).parent.c)&&we(a.Pa,b,c,d,e,f,g)});z("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=E(a).parent.c)&&a.Gi(b,c,d,e,f,g,j)});z("ogSetFlightDuration",function(a,b){var c=E(a).parent.c;c&&c.qh(b)});z("ogStopFlyTo",function(a){(a=E(a).parent.c)&&a.dg()});
z("ogLockNavigation",function(a){(a=E(a).parent.c)&&a.f.Hb.Ni(i)});z("ogUnlockNavigation",function(a){(a=E(a).parent.c)&&a.f.Hb.Ni(n)});z("ogSetCanvasSizeOffset",function(a,b,c){a=E(a).parent.c;a.yk=b;a.Mj=c;Bg()});z("ogDebug",function(){var a=new Ih;vh(a,i);a.Tc()});z("ogWarning",function(a){I(J("warning"),a)});function Ig(a){J("error").log(vc,a,h)}z("ogError",Ig);function Pi(a){J("message").info(a)}z("ogLog",Pi);
z("ogWorldToWindow",function(a,b,c,d){var e;if((a=E(a))&&a.type==D&&a.Ic==db)e=a.parent.c,a=new M,a.da(e.Cc,e.Ag),b=new L(b,c,d),d=a.Ma(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||l});z("ogCalcDistanceWGS84",function(a,b,c,d){a=Hc*Math.acos(Math.sin(K(b))*Math.sin(K(d))+Math.cos(K(b))*Math.cos(K(d))*Math.cos(K(c-a)));isNaN(a)&&(a=0);return a});
