function aa(a){throw a;}var h=void 0,i=!0,l=null,o=!1;function p(){return function(){}}function ba(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function s(a){return function(){return a}}var t,w=this;function ea(a){for(var a=a.split("."),b=w,c;c=a.shift();)if(b[c]!=l)b=b[c];else return l;return b}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function x(a){return a!==h}function ga(a){return"array"==fa(a)}function ha(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"string"==typeof a}function ma(a){return"function"==fa(a)}function na(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}function ra(a){return a[sa]||(a[sa]=++ta)}var sa="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ta=0;
function ua(a,b,c){return a.call.apply(a.bind,arguments)}function va(a,b,c){a||aa(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function wa(a,b,c){wa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ua:va;return wa.apply(l,arguments)}var xa=Date.now||function(){return+new Date};
function A(a,b){var c=a.split("."),d=w;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&x(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function ya(a,b){function c(){}c.prototype=b.prototype;a.Le=b.prototype;a.prototype=new c;a.prototype.constructor=a};var B=0,D=1,za=2,Aa=3,Ba=4,Ca=5,Da=6,Ea=7,Fa=8,Ga=9,Ha=10,Ia=11,Ja=12,Ka=13,La=14,Ma=15,Na=16,Oa=17,Pa=18,Qa=19,Ra=20,Sa=21,Ta=22,Ua=23,Va=24,Wa=65533,Xa=65534,Ya=25,Za=26,$a=65535;A("OG_OBJECT_CONTEXT",B);A("OG_OBJECT_SCENE",D);A("OG_OBJECT_WORLD",za);A("OG_OBJECT_IMAGELAYER",Aa);A("OG_OBJECT_ELEVATIONLAYER",Ba);A("OG_OBJECT_WAYPOINTLAYER",Ca);A("OG_OBJECT_GEOMETRYLAYER",Ea);A("OG_OBJECT_POILAYER",Da);A("OG_OBJECT_VOXELLAYER",Fa);A("OG_OBJECT_VECTORLAYER",Ga);A("OG_OBJECT_IMAGE",Ha);
A("OG_OBJECT_TEXTURE",Ia);A("OG_OBJECT_PIXELBUFFER",Ja);A("OG_OBJECT_GEOMETRY",Ka);A("OG_OBJECT_MESH",La);A("OG_OBJECT_SURFACE",Ma);A("OG_OBJECT_VECTOR",Na);A("OG_OBJECT_CAMERA",Oa);A("OG_OBJECT_TEXT",Pa);A("OG_OBJECT_BINARYDATA",Qa);A("OG_OBJECT_LIGHT",Ra);A("OG_OBJECT_NAVIGATIONCONTROLLER",Sa);A("OG_OBJECT_POI",Ta);A("OG_OBJECT_BILLBOARD",Ua);A("OG_OBJECT_BILLBOARDLAYER",Va);A("OG_OBJECT_AOEIMAGELAYER",Wa);A("OG_OBJECT_AOEIMAGE",Xa);A("OG_OBJECT_POINTSPRITE",Ya);A("OG_OBJECT_EARTHPOLYLINE",Za);
A("OG_OBJECT_INVALID",$a);A("OG_RENDEREFFECT_RGB",0);A("OG_RENDEREFFECT_CHROMADEPTH",1);var ab=1,bb=2,cb=3,db=4;A("OG_SCENE_3D_ELLIPSOID_WGS84",ab);A("OG_SCENE_3D_FLAT_CARTESIAN",bb);A("OG_SCENE_2D_SCREEN",cb);A("OG_SCENE_CUSTOM",db);var eb=1,fb=2;A("OG_OBJECT_READY",eb);A("OG_OBJECT_BUSY",fb);A("OG_OBJECT_FAILED",3);var gb=[];function E(a){if(-1==a)return l;for(var b=0;b<gb.length;b++)if(gb[b].id==a)return gb[b];return l}function F(){this.parent=l;this.name="ogObject";this.type=$a;this.id=-1;this.status=eb;this.I=this.J=l}F.prototype.Oa=p();function G(a){for(var a=a.id,b=0;b<gb.length;b++)if(gb[b].id==a){gb[b].Oa();gb.splice(b,1);break}}F.prototype.ya=p();function hb(a,b){for(var c=1;c<arguments.length;c++)var d=(""+arguments[c]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,d);return a}function ib(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function jb(a){if(!kb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(lb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(mb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(nb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ob,"&quot;"));return a}var lb=/&/g,mb=/</g,nb=/>/g,ob=/\"/g,kb=/[&<>\"]/;
function pb(a){return ib(a.replace(/  /g," &#160;"),h)};var qb,rb,sb,tb,ub;function vb(){return w.navigator?w.navigator.userAgent:l}tb=sb=rb=qb=o;var wb;if(wb=vb()){var xb=w.navigator;qb=0==wb.indexOf("Opera");rb=!qb&&-1!=wb.indexOf("MSIE");sb=!qb&&-1!=wb.indexOf("WebKit");tb=!qb&&!sb&&"Gecko"==xb.product}var yb=qb,zb=rb,Ab=tb,Bb=sb,Cb,Db=w.navigator;Cb=Db&&Db.platform||"";ub=-1!=Cb.indexOf("Mac");var Eb=-1!=Cb.indexOf("Win"),Fb;
a:{var Gb="",Hb;if(yb&&w.opera)var Ib=w.opera.version,Gb="function"==typeof Ib?Ib():Ib;else if(Ab?Hb=/rv\:([^\);]+)(\)|;)/:zb?Hb=/MSIE\s+([^\);]+)(\)|;)/:Bb&&(Hb=/WebKit\/(\S+)/),Hb)var Jb=Hb.exec(vb()),Gb=Jb?Jb[1]:"";if(zb){var Kb,Lb=w.document;Kb=Lb?Lb.documentMode:h;if(Kb>parseFloat(Gb)){Fb=""+Kb;break a}}Fb=Gb}var Mb={};
function Nb(a){var b;if(!(b=Mb[a])){b=0;for(var c=(""+Fb).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=(""+a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",j=d[f]||"",k=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=k.exec(g)||["","",""],r=m.exec(j)||["","",""];if(0==n[0].length&&0==r[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==r[1].length?0:parseInt(r[1],10))?-1:(0==n[1].length?0:parseInt(n[1],
10))>(0==r[1].length?0:parseInt(r[1],10))?1:0)||((0==n[2].length)<(0==r[2].length)?-1:(0==n[2].length)>(0==r[2].length)?1:0)||(n[2]<r[2]?-1:n[2]>r[2]?1:0)}while(0==b)}b=Mb[a]=0<=b}return b}var Ob={};function Pb(){return Ob[9]||(Ob[9]=zb&&!!document.documentMode&&9<=document.documentMode)};function Qb(a,b){for(var c in a)b.call(h,a[c],c,a)}function Rb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var Sb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Tb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Sb.length;f++)c=Sb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Ub(a){this.stack=Error().stack||"";a&&(this.message=""+a)}ya(Ub,Error);Ub.prototype.name="CustomError";function Vb(a,b){b.unshift(a);Ub.call(this,hb.apply(l,b));b.shift()}ya(Vb,Ub);Vb.prototype.name="AssertionError";function Wb(a,b){aa(new Vb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Xb=Array.prototype,Yb=Xb.indexOf?function(a,b,c){return Xb.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(la(a))return!la(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Zb=Xb.forEach?function(a,b,c){Xb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=la(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function $b(a){return Xb.concat.apply(Xb,arguments)}
function ac(a){if(ga(a))return $b(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function bc(a,b,c){return 2>=arguments.length?Xb.slice.call(a,b):Xb.slice.call(a,b,c)};var cc="StopIteration"in w?w.StopIteration:Error("StopIteration");function dc(){}dc.prototype.next=function(){aa(cc)};dc.prototype.aj=function(){return this};function ec(a){if(a instanceof dc)return a;if("function"==typeof a.aj)return a.aj(o);if(ha(a)){var b=0,c=new dc;c.next=function(){for(;;){b>=a.length&&aa(cc);if(b in a)return a[b++];b++}};return c}aa(Error("Not implemented"))}
function fc(a,b){if(ha(a))try{Zb(a,b,h)}catch(c){c!==cc&&aa(c)}else{a=ec(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==cc&&aa(d)}}};function gc(a,b){this.hc={};this.ab=[];var c=arguments.length;if(1<c){c%2&&aa(Error("Uneven number of arguments"));for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){if(a instanceof gc)c=a.Wh(),d=a.Kj();else{var c=Rb(a),e=[],f=0;for(d in a)e[f++]=a[d];d=e}for(e=0;e<c.length;e++)this.set(c[e],d[e])}}t=gc.prototype;t.ua=0;t.yi=0;t.re=da("ua");t.Kj=function(){hc(this);for(var a=[],b=0;b<this.ab.length;b++)a.push(this.hc[this.ab[b]]);return a};t.Wh=function(){hc(this);return this.ab.concat()};
t.h=function(a,b){if(this===a)return i;if(this.ua!=a.re())return o;var c=b||ic;hc(this);for(var d,e=0;d=this.ab[e];e++)if(!c(this.get(d),a.get(d)))return o;return i};function ic(a,b){return a===b}t.clear=function(){this.hc={};this.yi=this.ua=this.ab.length=0};
function hc(a){if(a.ua!=a.ab.length){for(var b=0,c=0;b<a.ab.length;){var d=a.ab[b];Object.prototype.hasOwnProperty.call(a.hc,d)&&(a.ab[c++]=d);b++}a.ab.length=c}if(a.ua!=a.ab.length){for(var e={},c=b=0;b<a.ab.length;)d=a.ab[b],Object.prototype.hasOwnProperty.call(e,d)||(a.ab[c++]=d,e[d]=1),b++;a.ab.length=c}}t.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.hc,a)?this.hc[a]:b};
t.set=function(a,b){Object.prototype.hasOwnProperty.call(this.hc,a)||(this.ua++,this.ab.push(a),this.yi++);this.hc[a]=b};t.aj=function(a){hc(this);var b=0,c=this.ab,d=this.hc,e=this.yi,f=this,g=new dc;g.next=function(){for(;;){e!=f.yi&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(cc);var g=c[b++];return a?g:d[g]}};return g};function jc(a){return kc(a||arguments.callee.caller,[])}
function kc(a,b){var c=[];if(0<=Yb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(lc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=""+f;break;case "boolean":f=f?"true":"false";break;case "function":f=(f=lc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(kc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function lc(a){if(mc[a])return mc[a];a=""+a;if(!mc[a]){var b=/function ([^\(]+)/.exec(a);mc[a]=b?b[1]:"[Anonymous]"}return mc[a]}var mc={};function nc(a,b,c,d,e){this.reset(a,b,c,d,e)}nc.prototype.zj=l;nc.prototype.yj=l;var oc=0;nc.prototype.reset=function(a,b,c,d,e){"number"==typeof e||oc++;this.Im=d||xa();this.Bc=a;this.$l=b;this.Ul=c;delete this.zj;delete this.yj};nc.prototype.Pg=ba("Bc");function pc(a){this.Rn=a}pc.prototype.fi=l;pc.prototype.Bc=l;pc.prototype.uj=l;pc.prototype.vg=l;function qc(a,b){this.name=a;this.value=b}qc.prototype.toString=da("name");var rc=new qc("SHOUT",1200),sc=new qc("SEVERE",1E3),tc=new qc("WARNING",900),uc=new qc("INFO",800),vc=new qc("CONFIG",700),wc=[new qc("OFF",Infinity),rc,sc,tc,uc,vc,new qc("FINE",500),new qc("FINER",400),new qc("FINEST",300),new qc("ALL",0)],xc=l;
function yc(a){if(!xc){xc={};for(var b=0,c;c=wc[b];b++)xc[c.value]=c,xc[c.name]=c}return xc[a]||l}t=pc.prototype;t.getParent=da("fi");t.Pg=ba("Bc");function zc(a){if(a.Bc)return a.Bc;if(a.fi)return zc(a.fi);Wb("Root logger has no level set.");return l}
t.log=function(a,b,c){if(a.value>=zc(this).value){a=this.Nn(a,b,c);b="log:"+a.$l;w.console&&(w.console.timeStamp?w.console.timeStamp(b):w.console.markTimeline&&w.console.markTimeline(b));w.msWriteProfilerMark&&w.msWriteProfilerMark(b);for(b=this;b;){var c=b,d=a;if(c.vg)for(var e=0,f=h;f=c.vg[e];e++)f(d);b=b.getParent()}}};
t.Nn=function(a,b,c){var d=new nc(a,""+b,this.Rn);if(c){d.zj=c;var e;var f=arguments.callee.caller;try{var g;var j=ea("window.location.href");if(la(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,m,n=o;try{k=c.lineNumber||c.xo||"Not available"}catch(r){k="Not available",n=i}try{m=c.fileName||c.filename||c.sourceURL||j}catch(q){m="Not available",n=i}g=n||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,fileName:m,
stack:c.stack||"Not available"}:c}e="Message: "+jb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+jb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+jb(jc(f)+"-> ")}catch(u){e="Exception trying to expose exception! You win, we lose. "+u}d.yj=e}return d};function H(a,b){a.log(tc,b,h)}t.info=function(a,b){this.log(uc,a,b)};var Ac={},Bc=l;function Cc(){Bc||(Bc=new pc(""),Ac[""]=Bc,Bc.Pg(vc))}
function I(a){Cc();var b;if(!(b=Ac[a])){b=new pc(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=I(a.substr(0,c));c.uj||(c.uj={});c.uj[d]=b;b.fi=c;Ac[a]=b}return b};function Dc(){this.name="ogTexture";this.type=Ia;this.g=l;this.Hm="";this.status=fb}Dc.prototype=new F;
Dc.prototype.ya=function(a){if(a==l)H(I("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==l)H(I("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=D)H(I("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.g=this.parent.parent.c.vi.Ik(a.url,function(){b.status=eb;b.J&&b.J(b.id)},function(){b.status=3;b.I&&b.I(b.id)},o);this.Hm=a.url}};
Dc.prototype.Oa=function(){this.g&&(this.parent.parent.c.vi.Kk(this.Hm),this.g=l,this.status=3)};Dc.prototype.B=function(a,b,c){this.status==eb&&this.g&&(c!=l?this.g.B(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.g.B(a,b))};var Ec=6378137,Fc=0.006694379990197,Gc=0.006739496742;function J(a){return 0.017453292519943295*a}function Hc(a){return 57.29577951308232*a}function Ic(a){for(var b=1;a>b;)b*=2;return b};function Jc(){this.name="ogCamera";this.type=Oa;this.nc=this.pitch=this.La=this.Qc=this.Sc=this.Tc=0}Jc.prototype=new F;t=Jc.prototype;t.Oa=function(){this.nc=this.pitch=this.La=this.Qc=this.Sc=this.Tc=0};t.ta=function(a,b,c){this.Tc=a;this.Sc=b;this.Qc=c;this.parent.je==this&&Kc(this).ta(a,b,c)};t.ce=function(){var a={};a.longitude=this.Tc;a.latitude=this.Sc;a.elevation=this.Qc;return a};t.We=function(a,b,c){this.La=a;this.pitch=b;this.nc=c;this==this.parent.je&&Kc(this).We(J(a),J(b),J(c))};
t.Sf=function(){var a={};a.yaw=this.La;a.pitch=this.pitch;a.roll=this.nc;return a};t.rh=function(a,b,c,d){this==this.parent.je&&Kc(this).rh(a,b,c,d)};function Kc(a){var b=l,a=a.parent.parent.c;a.f&&a.f.Hb&&(b=a.f.Hb);return b}function Lc(a){var b=Kc(a),c=b.ce(),b=b.Sf();a.Tc=c.longitude;a.Sc=c.latitude;a.Qc=c.elevation;a.La=Hc(b.La);a.pitch=Hc(b.pitch);a.nc=Hc(b.nc)};function K(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.Mb=new Float32Array([a,b,c])}t=K.prototype;t.t=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};t.Ca=function(){this.Mb[0]=this.a[0];this.Mb[1]=this.a[1];this.Mb[2]=this.a[2];return this.Mb};t.Rf=da("a");t.Mf=function(){var a=new K;a.t(this.a[0],this.a[1],this.a[2]);return a};t.Zm=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};t.$i=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
t.rn=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};t.bn=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function Mc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}t.cn=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
t.Li=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return Math.sqrt(a*a+b*b+c*c)};t.qn=function(){var a=this.a[0],b=this.a[1],c=this.a[2];return a*a+b*b+c*c};t.tc=function(){var a=this.Li();0!=a&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};t.nn=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};t.Xe=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};A("Cross",Mc);A("vec3",K);K.prototype.Add=K.prototype.Zm;K.prototype.Cross=K.prototype.bn;
K.prototype.Dot=K.prototype.cn;K.prototype.Get=K.prototype.Rf;K.prototype.Length=K.prototype.Li;K.prototype.Neg=K.prototype.nn;K.prototype.Normalize=K.prototype.tc;K.prototype.Set=K.prototype.t;K.prototype.SquaredLength=K.prototype.qn;K.prototype.Subtract=K.prototype.rn;K.prototype.Sub=K.prototype.$i;K.prototype.ToString=K.prototype.Xe;function L(){this.a=Array(16);this.fh();this.Mb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}t=L.prototype;t.Cd=function(a){if(16==a.length)for(var b=0;16>b;b++)this.a[b]=a[b]};t.Ca=function(){for(var a=0;16>a;a++)this.Mb[a]=this.a[a];return this.Mb};t.Rf=da("a");t.Mf=function(){for(var a=new L,b=0;16>b;b++)a.a[b]=this.a[b];return a};t.ea=function(a){for(var b=0;16>b;b++)this.a[b]=a.a[b]};
t.fh=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.sn=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.dd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Tk=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};t.Bd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return i};
t.Xi=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};t.Xk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.Yk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
t.mn=function(a,b,c,d,e,f,g,j,k){var m,n,r,q,d=a-d,e=b-e,f=c-f;q=1/Math.sqrt(d*d+e*e+f*f);d*=q;e*=q;f*=q;m=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(q=Math.sqrt(m*m+k*k+g*g))?(q=1/q,m*=q,k*=q,g*=q):g=k=m=0;j=e*g-f*k;n=f*m-d*g;r=d*k-e*m;(q=Math.sqrt(j*j+n*n+r*r))?(q=1/q,j*=q,n*=q,r*=q):r=n=j=0;this.a[0]=m;this.a[4]=k;this.a[8]=g;this.a[12]=-(m*a+k*b+g*c);this.a[1]=j;this.a[5]=n;this.a[9]=r;this.a[13]=-(j*a+n*b+r*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
t.aa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],m=a.a[7],n=a.a[8],r=a.a[9],q=a.a[10],u=a.a[11],v=a.a[12],y=a.a[13],z=a.a[14],ia=a.a[15],ja=b.a[0],P=b.a[1],ca=b.a[2],T=b.a[3],U=b.a[4],V=b.a[5],oa=b.a[6],pa=b.a[7],qa=b.a[8],C=b.a[9],Y=b.a[10],ka=b.a[11],Z=b.a[12],$=b.a[13],N=b.a[14],Nc=b.a[15];this.a[0]=ja*c+P*g+ca*n+T*v;this.a[1]=ja*d+P*j+ca*r+T*y;this.a[2]=ja*e+P*k+ca*q+T*z;this.a[3]=ja*f+P*m+ca*u+T*ia;this.a[4]=U*c+V*g+oa*n+pa*v;this.a[5]=U*d+V*j+oa*r+pa*y;this.a[6]=
U*e+V*k+oa*q+pa*z;this.a[7]=U*f+V*m+oa*u+pa*ia;this.a[8]=qa*c+C*g+Y*n+ka*v;this.a[9]=qa*d+C*j+Y*r+ka*y;this.a[10]=qa*e+C*k+Y*q+ka*z;this.a[11]=qa*f+C*m+Y*u+ka*ia;this.a[12]=Z*c+$*g+N*n+Nc*v;this.a[13]=Z*d+$*j+N*r+Nc*y;this.a[14]=Z*e+$*k+N*q+Nc*z;this.a[15]=Z*f+$*m+N*u+Nc*ia};t.Ye=function(){for(var a=this.Mf(),b=0;4>b;b++)for(var c=0;4>c;c++)this.a[4*b+c]=a.a[4*c+b]};
t.Ma=function(a){var b=new K;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
t.fn=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2*e/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=2*e/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(2*f*e)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Uk=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
t.Rk=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};t.Sk=function(a,b,c,d){this.Rk(a,b,c,d,-1,1)};
t.ae=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.an=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Dk=function(a,b){var c=0.017453292519943295*a,d=0.017453292519943295*b,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.Di=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.dn=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];1.0E-6>Math.abs(b)&&1.0E-6>Math.abs(d)?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
t.ah=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};t.Ek=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.en=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.bh=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,m=b*c,a=d*a,b=d*b,c=d*c;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*m+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*m-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
t.on=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],m=a+e+k;0<m?(m=2*Math.sqrt(m+1),a=0.25*m,e=(j-f)/m,k=(c-g)/m,b=(d-b)/m):a>e&a>k?(m=2*Math.sqrt(1+a-e-k),a=(j-f)/m,e=0.25*m,k=(b+d)/m,b=(c+g)/m):e>k?(m=2*Math.sqrt(1+e-a-k),a=(c-g)/m,e=(b+d)/m,k=0.25*m,b=(f+j)/m):(m=2*Math.sqrt(1+k-a-e),a=(d-b)/m,e=(c+g)/m,k=(f+j)/m,b=0.25*m);return[e,k,b,a]};
t.Qe=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],m=a.a[8],n=a.a[9],r=a.a[10],q=a.a[11],u=a.a[12],v=a.a[13],y=a.a[14],a=a.a[15],z=1/(b*g*r*a+b*j*q*v+b*k*n*y+c*f*q*y+c*j*m*a+c*k*r*u+d*f*n*a+d*g*q*u+d*k*m*v+e*f*r*v+e*g*m*y+e*j*n*u-b*g*q*y-b*j*n*a-b*k*r*v-c*f*r*a-c*j*q*u-c*k*m*y-d*f*q*v-d*g*m*a-d*k*n*u-e*f*n*y-e*g*r*u-e*j*m*v);this.a[0]=(g*r*a+j*q*v+k*n*y-g*q*y-j*n*a-k*r*v)*z;this.a[4]=(f*q*y+j*m*a+k*r*u-f*r*a-j*q*u-k*m*y)*z;this.a[8]=(f*n*a+g*q*u+k*m*v-f*q*
v-g*m*a-k*n*u)*z;this.a[12]=(f*r*v+g*m*y+j*n*u-f*n*y-g*r*u-j*m*v)*z;this.a[1]=(c*q*y+d*n*a+e*r*v-c*r*a-d*q*v-e*n*y)*z;this.a[5]=(b*r*a+d*q*u+e*m*y-b*q*y-d*m*a-e*r*u)*z;this.a[9]=(b*q*v+c*m*a+e*n*u-b*n*a-c*q*u-e*m*v)*z;this.a[13]=(b*n*y+c*r*u+d*m*v-b*r*v-c*m*y-d*n*u)*z;this.a[2]=(c*j*a+d*k*v+e*g*y-c*k*y-d*g*a-e*j*v)*z;this.a[6]=(b*k*y+d*f*a+e*j*u-b*j*a-d*k*u-e*f*y)*z;this.a[10]=(b*g*a+c*k*u+e*f*v-b*k*v-c*f*a-e*g*u)*z;this.a[14]=(b*j*v+c*f*y+d*g*u-b*g*y-c*j*u-d*f*v)*z;this.a[3]=(c*k*r+d*g*q+e*j*n-c*
j*q-d*k*n-e*g*r)*z;this.a[7]=(b*j*q+d*k*m+e*f*r-b*k*r-d*f*q-e*j*m)*z;this.a[11]=(b*k*n+c*f*q+e*g*m-b*g*q-c*k*m-e*f*n)*z;this.a[15]=(b*g*r+c*j*m+d*f*n-b*j*n-c*f*r-d*g*m)*z};t.Xe=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};A("mat4",L);L.prototype.CalcBodyFrame=L.prototype.Di;
L.prototype.CalcNavigationFrame=L.prototype.ae;L.prototype.Cami3d=L.prototype.ah;L.prototype.CopyFrom=L.prototype.ea;L.prototype.Copy=L.prototype.Mf;L.prototype.Frustum=L.prototype.fn;L.prototype.Get=L.prototype.Rf;L.prototype.Identity=L.prototype.fh;L.prototype.Inverse=L.prototype.Qe;L.prototype.LookAt=L.prototype.mn;L.prototype.Multiply=L.prototype.aa;L.prototype.MultiplyVec3=L.prototype.Ma;L.prototype.Ortho2D=L.prototype.Sk;L.prototype.Ortho=L.prototype.Rk;L.prototype.OverwriteTranslation=L.prototype.Tk;
L.prototype.Perspective=L.prototype.Uk;L.prototype.RotationX=L.prototype.Xi;L.prototype.RotationY=L.prototype.Xk;L.prototype.RotationZ=L.prototype.Yk;L.prototype.Scale=L.prototype.Bd;L.prototype.SetFromArray=L.prototype.Cd;L.prototype.ToString=L.prototype.Xe;L.prototype.Translation=L.prototype.dd;L.prototype.Transpose=L.prototype.Ye;L.prototype.Zero=L.prototype.sn;L.prototype.CalcNavigationFrame2=L.prototype.an;L.prototype.CalcNavigationFrameZUp=L.prototype.Dk;L.prototype.ExtractEulerAngles=L.prototype.dn;
L.prototype.CamViewFrustum=L.prototype.Ek;L.prototype.FromQuaternion=L.prototype.en;L.prototype.FromQuaternionComponents=L.prototype.bh;L.prototype.Rot2Quat=L.prototype.on;function Oc(){this.hh=[];this.gh=[];this.Re=[];this.qb={};this.qb.x=0;this.qb.y=0;this.qb.n=0;this.fc={};this.fc.longitude=0;this.fc.latitude=0;this.fc.elevation=0;this.ff=o;this.zc=[0,0];this.Vc=-1;this.mm=0;this.cb=Pc;this.Ea=0}var Pc=0,Qc=1,Rc=2,Sc=3,Tc=4,Uc=5;Oc.prototype.ta=function(a,b,c){this.qb.x=a;this.qb.y=b;this.qb.n=c};Oc.prototype.ce=da("qb");function Vc(){this.result={};this.result.w=0;this.result.Zb=0;this.result.Jc=0;this.rb={};this.rb.x=0;this.rb.y=0;this.rb.n=0;this.sb={};this.sb.x=0;this.sb.y=0;this.sb.n=0;this.Ua={};this.Ua.x=0;this.Ua.y=0;this.Ua.n=0;this.Ab={};this.Ab.x=0;this.Ab.y=0;this.Ab.n=0;this.Bb={};this.Bb.x=0;this.Bb.y=0;this.Zh=this.Ld=this.Bb.n=0;this.Mk=2.220446049250313E-16}
Vc.prototype.Ji=function(a,b,c,d,e,f,g,j,k,m,n,r,q,u,v){this.rb.x=m-g;this.rb.y=n-j;this.rb.n=r-k;this.sb.x=q-g;this.sb.y=u-j;this.sb.n=v-k;this.Ab.x=e*this.sb.n-f*this.sb.y;this.Ab.y=f*this.sb.x-d*this.sb.n;this.Ab.n=d*this.sb.y-e*this.sb.x;this.Ld=this.rb.x*this.Ab.x+this.rb.y*this.Ab.y+this.rb.n*this.Ab.n;this.Ua.x=a-g;this.Ua.y=b-j;this.Ua.n=c-k;this.Zh=1/this.Ld;this.Bb.x=this.Ua.y*this.rb.n-this.Ua.n*this.rb.y;this.Bb.y=this.Ua.n*this.rb.x-this.Ua.x*this.rb.n;this.Bb.n=this.Ua.x*this.rb.y-this.Ua.y*
this.rb.x;if(this.Ld>this.Mk){this.result.Zb=this.Ua.x*this.Ab.x+this.Ua.y*this.Ab.y+this.Ua.n*this.Ab.n;if(0>this.result.Zb||this.result.Zb>this.Ld)return l;this.result.Jc=d*this.Bb.x+e*this.Bb.y+f*this.Bb.n;if(0>this.result.Jc||this.result.Zb+this.result.Jc>this.Ld)return l}else if(this.Ld<-this.Mk){this.result.Zb=this.Ua.x*this.Ab.x+this.Ua.y*this.Ab.y+this.Ua.n*this.Ab.n;if(0<this.result.Zb||this.result.Zb<this.Ld)return l;this.result.Jc=d*this.Bb.x+e*this.Bb.y+f*this.Bb.n;if(0<this.result.Jc||
this.result.Zb+this.result.Jc<this.Ld)return l}else return l;this.result.w=this.sb.x*this.Bb.x+this.sb.y*this.Bb.y+this.sb.n*this.Bb.n;this.result.Zb*=this.Zh;this.result.Jc*=this.Zh;this.result.w*=this.Zh;return this.result};A("TriangleIntersector",Vc);Vc.prototype.IntersectTriangle=Vc.prototype.Ji;function Wc(){this.Tg=this.Ug=this.Rg=this.Sg=0;this.Th=1;this.result={Vd:0,Ud:0}}
Wc.prototype.Tf=function(a,b,c,d,e,f,g,j,k,m,n,r){this.Th=1;0<=d?(this.result.Vd=(g-a)/d,this.result.Ud=(m-a)/d):(this.result.Vd=(m-a)/d,this.result.Ud=(g-a)/d);0<=e?(this.Sg=(j-b)/e,this.Rg=(n-b)/e):(this.Sg=(n-b)/e,this.Rg=(j-b)/e);if(this.result.Vd>this.Rg||this.Sg>this.result.Ud)this.Th=-1;this.Sg>this.result.Vd&&(this.result.Vd=this.Sg);this.Rg<this.result.Ud&&(this.result.Ud=this.Rg);0<=f?(this.Ug=(k-c)/f,this.Tg=(r-c)/f):(this.Ug=(r-c)/f,this.Tg=(k-c)/f);if(this.result.Vd>this.Tg||this.Ug>
this.result.Ud)this.Th=-1;this.Ug>this.result.Vd&&(this.result.Vd=this.Ug);this.Tg<this.result.Ud&&(this.result.Ud=this.Tg);return 0<this.Th?this.result:l};A("AABB",Wc);Wc.prototype.HitBox=Wc.prototype.Tf;function Xc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.Mb=new Float32Array([a,b,c,d])}Xc.prototype.t=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Xc.prototype.Ca=function(){this.Mb[0]=this.a[0];this.Mb[1]=this.a[1];this.Mb[2]=this.a[2];this.Mb[3]=this.a[3];return this.Mb};Xc.prototype.Rf=da("a");Xc.prototype.Xe=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};A("vec4",Xc);Xc.prototype.Get=Xc.prototype.Rf;Xc.prototype.Set=Xc.prototype.t;function Yc(a){a=""+a;if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}aa(Error("Invalid JSON string: "+a))};function M(a){this.c=a;this.b=a.b;this.r=this.g=this.ub=this.V=l;this.mode="";this.Ib=0;this.qd=this.L=l;this.qa=o;this.xl=this.rd=this.N=l;this.El=new Xc;this.El.t(1,1,1,1);this.Fl=new Xc;this.Fl.t(1,1,1,1);this.gc=new Xc;this.gc.t(1,1,1,1);this.yd=new Xc;this.yd.t(1,0,0,1);this.Nl=new Vc;this.oa=this.ha=this.Q=l;this.Fh=new Wc;this.ka=l;this.Fg=this.M=0;this.l={};this.gd=Array(3);this.fd=Array(3);this.ud=new L;this.bi=o;this.gb=-1}t=M.prototype;t.ge=function(a,b,c,d){this.gc.t(a,b,c,d)};
function Zc(a,b){0==b.length%3&&(a.r=new Float32Array(b),a.mode="p",a.M=3)}function $c(a,b){0==b.length%8&&(a.r=new Float32Array(b),a.mode="pnt",a.M=8)}function ad(a,b){0==b.length%7&&(a.r=new Float32Array(b),a.mode="pc",a.M=7)}function bd(a,b){0==b.length%5&&(a.r=new Float32Array(b),a.mode="pt",a.M=5)}function cd(a,b){0==b.length%12&&(a.r=new Float32Array(b),a.mode="pnct",a.M=12)}function dd(a,b){0==b.length%5&&(a.r=new Float32Array(b),a.mode="poi",a.M=5)}
function ed(a,b,c){a.L=new Uint16Array(b);a.qd=c;a.Ib=b.length;a.qa=i;switch(c){case "TRIANGLES":a.Fg=b.length/3;break;case "TRIANGLESTRIP":a.Fg=b.length-2}}t.ac=ba("g");t.Fd=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.r,this.b.STATIC_DRAW);this.ub=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.L,this.b.STATIC_DRAW)};
t.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.ub&&(this.b.deleteBuffer(this.ub),this.ub=l);this.bi?this.g.k():this.g=l;this.r=l;this.mode="";this.Ib=0;this.qd=this.L=l};
t.ga=function(a,b,c,d,e){if(this.qa){b=b||0;c=c||0;this.V==l&&this.Fd();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.ka&&(this.c.uc(),this.ud.aa(this.ka,this.c.Gb),this.c.vc(this.ud));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,12,0);fd(this.c.Ta,this.c.ja,this.yd);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,o,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,o,32,24);var d=this.c.Ta,e=this.c.Qj,f=this.c.Ag,g=this.c.Cc;d.zb&&(d.b.useProgram(d.zb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.zb,"matModelView"),o,f.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.zb,"matProjection"),o,g.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.zb,"matNormal"),o,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.zb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12);gd(this.c.Ta,this.c.ja,this.gc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d=this.c.Ta;e=this.c.ja;f=this.gc;d.Tb&&(d.b.useProgram(d.Tb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,
"matMVP"),o,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.Tb,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Tb,"uColor"),f.Ca()));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,o,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,o,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,o,48,40);
d=this.c.Ta;e=this.c.ja;d.Sb&&(d.b.useProgram(d.Sb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Sb,"matMVP"),o,e.Ca()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d==l&&(d=this.El);e=this.c.Ta;f=this.c.ja;e.ic&&(e.b.useProgram(e.ic),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.ic,"matMVP"),o,f.Ca()),e.b.uniform4fv(e.b.getUniformLocation(e.ic,"uColor"),
d.Ca()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);e==l&&(e=this.Fl);d=this.c.Ta;f=this.c.ja;d.kc&&(d.b.useProgram(d.kc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.kc,"matMVP"),o,f.Ca()),d.b.uniform4fv(d.b.getUniformLocation(d.kc,"uColor"),e.Ca()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,o,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,o,20,12);d=this.c.Ta;e=this.c.ja;f=this.c.Gb;d.Ub&&(d.b.useProgram(d.Ub),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matM"),o,f.Ca()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ub,"matMVP"),o,e.Ca()),d.b.uniform1i(d.b.getUniformLocation(d.Ub,"uTexture"),0));break;default:alert("unknown surface mode!!")}this.g&&(d=this.g,d.Cb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.g)));switch(this.qd){case "TRIANGLES":a?
this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.Ib,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?
this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.Ib,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ka&&this.c.bd();this.g&&(a=this.g,a.Cb&&a.b.bindTexture(a.b.TEXTURE_2D,l));this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
t.Lc=function(a,b,c,d){d||(d=this);c&&(this.yc=c);b&&(this.kd=b);a.BoundingBox&&(d.Q=a.BoundingBox[0],d.ha=a.BoundingBox[1]);a.Offset&&(d.oa=a.Offset);a.CurtainIndex&&(d.to=a.CurtainIndex);switch(a.VertexSemantic){case "p":d.di=a.Vertices.length/3;Zc(d,a.Vertices);d.mode="p";break;case "pnt":d.di=a.Vertices.length/8;$c(d,a.Vertices);d.mode="pnt";break;case "pc":d.di=a.Vertices.length/7;d.mode="pc";ad(d,a.Vertices);break;case "pt":d.di=a.Vertices.length/5;d.mode="pt";bd(d,a.Vertices);break;case "pnct":d.di=
a.Vertices.length/12;d.mode="p";cd(d,a.Vertices);break;default:alert("unknown surface mode!!")}ed(d,a.Indices,a.IndexSemantic);a.DiffuseMap&&(d.g=new O(d.c),d.g.repeat=i,Q(d.g,a.DiffuseMap,function(){var a=d;a.Cb=i;a.kd&&a.kd(a)},function(){var a=d;H(I("owg.Mesh"),"Downloading Error: Texture not found...");a.yc&&a.yc(a)},i),d.bi=i);a.Center&&d.ph(a.Center[0],a.Center[1],a.Center[2]);d.Ib=a.Indices.length;d.bi||(d.Cb=i);d.xl&&d.xl();d.kd&&!d.bi&&d.kd(d)};
function hd(a,b,c,d){b==l?alert("invalid json-url"):(a.rd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.rd,i),a.kd=c,a.yc=d,a.N.onreadystatechange=function(){if(4==a.N.readyState)if(404==a.N.status)a.yc&&a.yc(a);else{var b=Yc(a.N.responseText);a.Lc(b,l,l,a)}},a.N.send())}
t.Ed=function(a,b,c,d,e,f){var g=o,j,k,m,n;k=j=0;m=1.0E20;for(var r=0;r<this.Fg;r++){var q=r;switch(this.qd){case "TRIANGLES":this.l.Ef=this.r[this.L[3*q]*this.M];this.l.Ff=this.r[this.L[3*q]*this.M+1];this.l.Gf=this.r[this.L[3*q]*this.M+2];this.l.Hf=this.r[this.L[3*q+1]*this.M];this.l.If=this.r[this.L[3*q+1]*this.M+1];this.l.Jf=this.r[this.L[3*q+1]*this.M+2];this.l.Vg=this.r[this.L[3*q+2]*this.M];this.l.Wg=this.r[this.L[3*q+2]*this.M+1];this.l.Xg=this.r[this.L[3*q+2]*this.M+2];break;case "TRIANGLESTRIP":0==
q%2?(this.l.Ef=this.r[this.L[q]*this.M],this.l.Ff=this.r[this.L[q]*this.M+1],this.l.Gf=this.r[this.L[q]*this.M+2],this.l.Hf=this.r[this.L[q+1]*this.M],this.l.If=this.r[this.L[q+1]*this.M+1],this.l.Jf=this.r[this.L[q+1]*this.M+2]):(this.l.Ef=this.r[this.L[q+1]*this.M],this.l.Ff=this.r[this.L[q+1]*this.M+1],this.l.Gf=this.r[this.L[q+1]*this.M+2],this.l.Hf=this.r[this.L[q]*this.M],this.l.If=this.r[this.L[q]*this.M+1],this.l.Jf=this.r[this.L[q]*this.M+2]);this.l.Vg=this.r[this.L[q+2]*this.M];this.l.Wg=
this.r[this.L[q+2]*this.M+1];this.l.Xg=this.r[this.L[q+2]*this.M+2];break;default:H(I("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.oa&&(this.l.Ef+=this.oa[0],this.l.Ff+=this.oa[1],this.l.Gf+=this.oa[2],this.l.Hf+=this.oa[0],this.l.If+=this.oa[1],this.l.Jf+=this.oa[2],this.l.Vg+=this.oa[0],this.l.Wg+=this.oa[1],this.l.Xg+=this.oa[2]);if(!(this.L[q]==this.L[q+1]||this.L[q]==this.L[q+2]||this.L[q+1]==this.L[q+2])){if(this.ka){q=new L;q.ea(this.ud);
var u=new K;u.t(this.l.Ef,this.l.Ff,this.l.Gf);var v=new K;v.t(this.l.Hf,this.l.If,this.l.Jf);var y=new K;y.t(this.l.Vg,this.l.Wg,this.l.Xg);u=q.Ma(u);v=q.Ma(v);q=q.Ma(y);q=this.Nl.Ji(a,b,c,d,e,f,u.a[0],u.a[1],u.a[2],v.a[0],v.a[1],v.a[2],q.a[0],q.a[1],q.a[2])}else q=this.Nl.Ji(a,b,c,d,e,f,this.l.Ef,this.l.Ff,this.l.Gf,this.l.Hf,this.l.If,this.l.Jf,this.l.Vg,this.l.Wg,this.l.Xg);q&&(g=i,q.w<m&&0<q.w&&(m=q.w,j=q.Zb,k=q.Jc,n=r))}}return g?(a={},a.w=m,a.Zb=j,a.Jc=k,a.Om=n,a):l};
function id(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,m,n=0;n<a.r.length;n++)j=a.r[n*a.M],k=a.r[n*a.M+1],m=a.r[n*a.M+2],j>e&&(e=j),k>f&&(f=k),m>g&&(g=m),j<b&&(b=j),k<c&&(c=k),m<d&&(d=m);a.ka&&(n=new K(b,c,d),m=new K(e,c,d),j=new K(e,f,d),d=new K(b,f,d),k=new K(b,c,g),c=new K(b,f,g),e=new K(e,f,g),g=new K(b,f,g),b=a.ka.Ma(n),f=a.ka.Ma(m),j=a.ka.Ma(j),d=a.ka.Ma(d),k=a.ka.Ma(k),c=a.ka.Ma(c),m=a.ka.Ma(e),n=a.ka.Ma(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],m.a[0],n.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],m.a[1],n.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],m.a[2],n.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.oa&&(b+=a.oa[0],c+=a.oa[1],d+=a.oa[2],e+=a.oa[0],f+=a.oa[1],g+=a.oa[2]);a.Q===l&&(a.Q=Array(3));a.ha===l&&(a.ha=Array(3));a.Q[0]=b;a.Q[1]=c;a.Q[2]=d;a.ha[0]=e;a.ha[1]=f;a.ha[2]=g}
t.kl=function(a,b,c,d,e,f){return this.Fh.Tf(a,b,c,d,e,f,this.Q[0],this.Q[1],this.Q[2],this.ha[0],this.ha[1],this.ha[2])};t.bg=function(a,b,c,d,e,f){var g=this.c.hb.a,j=new L;this.gd[0]=a;this.gd[1]=b;this.gd[2]=c;this.fd[0]=d||0;this.fd[1]=e||0;this.fd[2]=f||0;j.Cd([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.gd[0],this.gd[1],this.gd[2],1]);a=new L;a.dd(this.fd[0],this.fd[1],this.fd[2]);b=new L;b.aa(j,a);this.ka=b};
function jd(a){a.bg(a.gd[0],a.gd[1],a.gd[2],a.fd[0],a.fd[1],a.fd[2])}
t.ph=function(a,b,c,d,e,f){var g=new R(a,b,c),c=Array(3);g.la(c);(new L).dd(c[0],c[1],c[2]);g=new L;g.ae(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new L;b.Cd(a);a=new L;a.Bd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new L;c.aa(b,a);b=new L;g=new L;a=new L;d?b.Xi(e*Math.PI/180):b.Xi(-1.57079633);e&&g.Xk(d*Math.PI/180+1.57079633);
f&&a.Yk(f*Math.PI/180);d=new L;d.aa(b,g);e=new L;e.aa(d,a);d=new L;d.aa(c,e);this.ka=d;id(this)};t.ea=function(a){this.ac(a.g);this.r=a.r;this.mode=a.mode;this.M=a.M;this.L=a.L;this.qd=a.qd;this.Ib=a.Ib;this.qa=a.qa;this.Fg=a.Fg;this.V=a.V;this.ub=a.ub;this.ka=a.ka;this.qd=a.qd};A("Surface",M);M.prototype.Draw=M.prototype.ga;M.prototype.CopyFrom=M.prototype.ea;M.prototype.SetAsBillboard=M.prototype.bg;M.prototype.SetTexture=M.prototype.ac;M.prototype.TestBoundingBoxIntersection=M.prototype.kl;
M.prototype.TestRayIntersection=M.prototype.Ed;var kd="art/";function O(a,b,c,d,e){this.c=a;this.b=a.b;this.g=l;this.Sh=this.Cb=o;this.Za=l;this.height=this.width=0;this.Jl=this.Qm=o;b&&ld(this,c||0,d||0,e||o);this.repeat=o}
function ld(a,b,c,d){md(a);a.Wb=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Wb);a.Wb.width=b;a.Wb.height=c;a.g=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.g);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Wb.width,a.Wb.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,l);a.hi=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.hi);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Wb.width,a.Wb.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.g,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.hi);a.b.bindTexture(a.b.TEXTURE_2D,l);a.b.bindRenderbuffer(a.b.RENDERBUFFER,l);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
l);a.Cb=i;a.Qm=i;a.width=b;a.height=c}function md(a){a.Wb!=l&&(a.b.deleteRenderbuffer(a.hi),a.hi=l,a.b.deleteFramebuffer(a.Wb),a.Wb=l,a.b.deleteTexture(a.g),a.g=l,a.Za&&(a.Za.k(),a.Za=l))}
function Q(a,b,c,d,e){a.Jl=x(e)?e:o;a.g=a.b.createTexture();var f=a.g,g=a.b;a.g.Pd=new Image;a.g.Pd.crossOrigin="anonymous";a.g.Pd.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Jl);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Pd);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,l);a.width=f.Pd.width;a.height=f.Pd.height;c!=l&&c(a);a.Cb=i};a.g.Pd.onerror=function(){H(I("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Sh=i;d&&d(a)};a.g.Pd.src=b}t=O.prototype;
t.B=function(a,b,c,d,e,f,g,j,k,m){c=c||0;d=d||0;e=e||1;f=f||1;g=g||o;j=j||o;k=k||1;if(this.Cb){var n=this.width,r=this.height,q=this.width/2,u=this.height/2;this.c.uc();this.c.Yi();var d=J(d),v=new L;0<d?v.Cd([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*q+Math.sin(d)*e*u+e*q+a,-Math.cos(d)*f*u-Math.sin(d)*f*q+f*u+b,c,1]):(v.dd(a,b,c),a=new L,a.Bd(e,f,1),v.aa(v,a));this.c.vc(v);this.Za===l&&(this.Za=new M(this.c),j?dd(this.Za,[0,0,0,0,0,n,0,0,1,0,n,r,0,1,
1,0,r,0,0,1]):dd(this.Za,[0,0,0,0,1,n,0,0,1,1,n,r,0,1,0,0,r,0,0,0]),ed(this.Za,[0,1,2,0,2,3],"TRIANGLES"),this.Za.ac(this));g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);1>k&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Za.ga(l,l,l,l,m);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.bd()}};t.k=function(){this.g.Pd=l;this.c.b.deleteTexture(this.g);this.g=l;this.Sh=this.Cb=o;this.Za&&(this.Za.k(),this.Za=l);md(this)};t.fg=function(){this.Qm&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Wb),this.b.viewport(0,0,this.Wb.width,this.Wb.height))};t.ll=function(){this.b.bindTexture(this.b.TEXTURE_2D,l);this.b.bindFramebuffer(this.b.FRAMEBUFFER,l);this.b.viewport(0,0,this.c.width,this.c.height)};
t.ea=function(a){this.g=a.g;this.Cb=a.Cb;this.Sh=a.Sh;this.height=this.width=this.Za=a.Za};A("Texture",O);O.prototype.CopyFrom=O.prototype.ea;O.prototype.Blit=O.prototype.B;O.prototype._EnableRenderToTexture=O.prototype.fg;O.prototype._DisableRenderToTexture=O.prototype.ll;function R(a,b,c){this.H=new Float32Array([a,b,c])}R.prototype.t=function(a,b,c){this.H[0]=a;this.H[1]=b;this.H[2]=c};R.prototype.la=function(a){var b=Math.sin(J(this.H[1])),c=Math.cos(J(this.H[1])),d=Math.sin(J(this.H[0])),e=Ec/Math.sqrt(1-Fc*b*b);a[0]=(e+this.H[2])*c*Math.cos(J(this.H[0]));a[1]=(e+this.H[2])*c*d;a[2]=(0.993305620011365*e+this.H[2])*b;a[0]*=1.1920930376163766E-7;a[1]*=1.1920930376163766E-7;a[2]*=1.1920930376163766E-7};
R.prototype.Mc=function(a,b,c){for(var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0,a=8388607*a,b=8388607*b,c=8388607*c,k=0;10>k;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=Ec/Math.sqrt(1-Fc*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*Fc/(g+f));this.H[0]=Hc(d);this.H[1]=Hc(e);this.H[2]=f};R.prototype.Xe=function(){return" Longitude: "+this.H[0].toPrecision(17)+" Latitude: "+this.H[1].toPrecision(17)+" Elevation: "+this.H[2].toPrecision(17)};A("GeoCoord",R);
R.prototype.FromCartesian=R.prototype.Mc;R.prototype.ToCartesian=R.prototype.la;R.prototype.ToString=R.prototype.Xe;function nd(a){this.c=a;this.b=a.b;this.ka=this.V=this.xd=l;this.ud=new L;this.ak=[];this.xi=this.Gg=this.oa=0}t=nd.prototype;t.sh=function(a){this.Gg+=a.length/7;0==this.xi&&(this.xi=70*this.Gg);this.xd=l;this.xd=new Float32Array(a);this.Fd()};t.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.V=this.xd=l};
t.ph=function(a,b,c){var d=new R(a,b,c),c=Array(3);d.la(c);(new L).dd(c[0],c[1],c[2]);d=new L;d.Dk(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new L;b.Cd(a);a=new L;a.Bd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);c=new L;c.aa(b,a);a=new L;b=new L;b.aa(c,a);this.ka=b};
t.ga=function(){if(this.xd!=l){this.V||this.Fd();this.ka&&(this.c.uc(),this.ud.aa(this.ka,this.c.Gb),this.c.vc(this.ud));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12);var a=new L;a.Qe(this.c.ja);var b=this.c.Ta,c=this.c.ja;b.lc&&(b.b.useProgram(b.lc),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.lc,"matMVP"),o,c.Ca()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.lc,
"matInvMVP"),o,a.Ca()));this.b.drawArrays(this.b.POINTS,0,this.Gg);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ka&&this.c.bd()}};t.Fd=function(){this.V===l?(this.V=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferData(this.b.ARRAY_BUFFER,this.xi,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.xd)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.oa,this.xd));this.oa+=4*this.xd.length};function od(){}var pd=0;t=od.prototype;t.key=0;t.zf=o;t.wl=o;t.Rc=function(a,b,c,d,e,f){ma(a)?this.Pl=i:a&&a.handleEvent&&ma(a.handleEvent)?this.Pl=o:aa(Error("Invalid listener argument"));this.zg=a;this.vm=b;this.src=c;this.type=d;this.capture=!!e;this.Lj=f;this.wl=o;this.key=++pd;this.zf=o};t.handleEvent=function(a){return this.Pl?this.zg.call(this.Lj||this.src,a):this.zg.handleEvent.call(this.zg,a)};var qd=!zb||Pb(),rd=!zb||Pb(),sd=zb&&!Nb("8");!Bb||Nb("528");Ab&&Nb("1.9b")||zb&&Nb("8")||yb&&Nb("9.5")||Bb&&Nb("528");Ab&&!Nb("8")||zb&&Nb("9");var td="dblclick",ud="mousedown",vd="mouseup",wd="mousemove",xd="keydown",yd="keyup";function zd(){}zd.prototype.Hl=o;zd.prototype.qe=function(){this.Hl||(this.Hl=i,this.Pc())};zd.prototype.Pc=function(){this.En&&Ad.apply(l,this.En)};function Ad(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];ha(d)?Ad.apply(l,d):d&&"function"==typeof d.qe&&d.qe()}};function Bd(a,b){this.type=a;this.currentTarget=this.target=b}ya(Bd,zd);t=Bd.prototype;t.Pc=function(){delete this.type;delete this.target;delete this.currentTarget};t.Ge=o;t.Ng=i;t.stopPropagation=function(){this.Ge=i};t.preventDefault=function(){this.Ng=o};function Cd(a){Cd[" "](a);return a}Cd[" "]=p();function Dd(a,b){a&&this.Rc(a,b)}ya(Dd,Bd);var Ed=0,Fd=1,Gd=2,Hd=[1,4,2];t=Dd.prototype;t.target=l;t.relatedTarget=l;t.offsetX=0;t.offsetY=0;t.clientX=0;t.clientY=0;t.screenX=0;t.screenY=0;t.button=0;t.keyCode=0;t.charCode=0;t.ctrlKey=o;t.altKey=o;t.shiftKey=o;t.metaKey=o;t.pd=l;
t.Rc=function(a,b){var c=this.type=a.type;Bd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Ab){var e;a:{try{Cd(d.nodeName);e=i;break a}catch(f){}e=o}e||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=Bb||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=Bb||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.pd=a;delete this.Ng;delete this.Ge};function Id(a,b){return qd?a.pd.button==b:"click"==a.type?b==Ed:!!(a.pd.button&Hd[b])}
t.stopPropagation=function(){Dd.Le.stopPropagation.call(this);this.pd.stopPropagation?this.pd.stopPropagation():this.pd.cancelBubble=i};t.preventDefault=function(){Dd.Le.preventDefault.call(this);var a=this.pd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=o,sd)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};t.Pc=function(){Dd.Le.Pc.call(this);this.relatedTarget=this.currentTarget=this.target=this.pd=l};var Jd={},Kd={},Ld={},Md={};
function S(a,b,c,d,e){if(b){if(ga(b)){for(var f=0;f<b.length;f++)S(a,b[f],c,d,e);return l}var d=!!d,g=Kd;b in g||(g[b]={ua:0,mc:0});g=g[b];d in g||(g[d]={ua:0,mc:0},g.ua++);var g=g[d],j=ra(a),k;g.mc++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.zg==c&&g.Lj==e){if(g.zf)break;return k[f].key}}else k=g[j]=[],g.ua++;f=Nd();f.src=a;g=new od;g.Rc(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Jd[c]=g;Ld[j]||(Ld[j]=[]);Ld[j].push(g);a.addEventListener?(a==w||!a.Dl)&&a.addEventListener(b,f,d):a.attachEvent(b in
Md?Md[b]:Md[b]="on"+b,f);return c}aa(Error("Invalid event type"))}function Nd(){var a=Od,b=rd?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}function Pd(a,b,c,d,e){if(ga(b))for(var f=0;f<b.length;f++)Pd(a,b[f],c,d,e);else{d=!!d;a:{f=Kd;if(b in f&&(f=f[b],d in f&&(f=f[d],a=ra(a),f[a]))){a=f[a];break a}a=l}if(a)for(f=0;f<a.length;f++)if(a[f].zg==c&&a[f].capture==d&&a[f].Lj==e){Qd(a[f].key);break}}}
function Qd(a){if(Jd[a]){var b=Jd[a];if(!b.zf){var c=b.src,d=b.type,e=b.vm,f=b.capture;c.removeEventListener?(c==w||!c.Dl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Md?Md[d]:Md[d]="on"+d,e);c=ra(c);e=Kd[d][f][c];if(Ld[c]){var g=Ld[c],j=Yb(g,b);0<=j&&Xb.splice.call(g,j,1);0==g.length&&delete Ld[c]}b.zf=i;e.nm=i;Rd(d,f,c,e);delete Jd[a]}}}
function Rd(a,b,c,d){if(!d.ai&&d.nm){for(var e=0,f=0;e<d.length;e++)d[e].zf?d[e].vm.src=l:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.nm=o;0==f&&(delete Kd[a][b][c],Kd[a][b].ua--,0==Kd[a][b].ua&&(delete Kd[a][b],Kd[a].ua--),0==Kd[a].ua&&delete Kd[a])}}function Sd(a){var b,c=0,d=b==l;b=!!b;if(a==l)Qb(Ld,function(a){for(var e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Qd(f.key),c++}});else if(a=ra(a),Ld[a])for(var a=Ld[a],e=a.length-1;0<=e;e--){var f=a[e];if(d||b==f.capture)Qd(f.key),c++}}
function Td(a,b,c,d,e){var f=1,b=ra(b);if(a[b]){a.mc--;a=a[b];a.ai?a.ai++:a.ai=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.zf&&(f&=Ud(k,e)!==o)}}finally{a.ai--,Rd(c,d,b,a)}}return Boolean(f)}function Ud(a,b){var c=a.handleEvent(b);a.wl&&Qd(a.key);return c}
function Od(a,b){if(!Jd[a])return i;var c=Jd[a],d=c.type,e=Kd;if(!(d in e))return i;var e=e[d],f,g;if(!rd){f=b||ea("window.event");var j=i in e,k=o in e;if(j){if(0>f.keyCode||f.returnValue!=h)return i;a:{var m=o;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(n){m=i}if(m||f.returnValue==h)f.returnValue=i}}m=new Dd;m.Rc(f,this);f=i;try{if(j){for(var r=[],q=m.currentTarget;q;q=q.parentNode)r.push(q);g=e[i];g.mc=g.ua;for(var u=r.length-1;!m.Ge&&0<=u&&g.mc;u--)m.currentTarget=r[u],f&=Td(g,r[u],d,i,m);
if(k){g=e[o];g.mc=g.ua;for(u=0;!m.Ge&&u<r.length&&g.mc;u++)m.currentTarget=r[u],f&=Td(g,r[u],d,o,m)}}else f=Ud(c,m)}finally{r&&(r.length=0),m.qe()}return f}d=new Dd(b,this);try{f=Ud(c,d)}finally{d.qe()}return f};function Vd(a,b){this.Vl=b;this.tg=[];a>this.Vl&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.tg.push(this.Nh())}ya(Vd,zd);t=Vd.prototype;t.Al=l;t.Gl=l;function Wd(a,b){a.tg.length<a.Vl?a.tg.push(b):a.vj(b)}t.Nh=function(){return this.Al?this.Al():{}};t.vj=function(a){if(this.Gl)this.Gl(a);else if(na(a))if(ma(a.qe))a.qe();else for(var b in a)delete a[b]};t.Pc=function(){Vd.Le.Pc.call(this);for(var a=this.tg;a.length;)this.vj(a.pop());delete this.tg};function Xd(){this.sg=[];this.Yj=new gc;this.Km=this.Lm=this.Mm=this.Cm=0;this.Wc=new gc;this.yl=this.Jm=0;this.Sn=1;this.wj=new Vd(0,4E3);this.wj.Nh=function(){return new Yd};this.Dm=new Vd(0,50);this.Dm.Nh=function(){return new Zd};var a=this;this.Nj=new Vd(0,2E3);this.Nj.Nh=function(){return""+a.Sn++};this.Nj.vj=p()}function Zd(){this.kk=this.time=this.count=0}
Zd.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");this.kk&&a.push(" [VarAlloc = ",this.kk,"]");return a.join("")};function Yd(){}function $d(a,b,c,d){var e=[];-1==c?e.push("    "):e.push(ae(a.Il-c));e.push(" ",be(a.Il-b));0==a.xj?e.push(" Start        "):1==a.xj?(e.push(" Done "),e.push(ae(a.Ho-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);0<a.io&&e.push("[VarAlloc ",a.io,"] ");return e.join("")}
Yd.prototype.toString=function(){return this.type==l?this.An:"["+this.type+"] "+this.An};Xd.prototype.reset=function(){for(var a=0;a<this.sg.length;a++){var b=this.wj.id;b&&Wd(this.Nj,b);Wd(this.wj,this.sg[a])}this.sg.length=0;this.Yj.clear();this.Cm=xa();this.yl=this.Jm=this.Km=this.Lm=this.Mm=0;b=this.Wc.Wh();for(a=0;a<b.length;a++){var c=this.Wc.get(b[a]);c.count=0;c.time=0;c.kk=0;Wd(this.Dm,c)}this.Wc.clear()};
Xd.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.sg.length;d++){var e=this.sg[d];1==e.xj&&c.pop();a.push(" ",$d(e,this.Cm,b,c.join("")));b=e.Il;a.push("\n");0==e.xj&&c.push("|  ")}if(0!=this.Yj.re()){var f=xa();a.push(" Unstopped timers:\n");fc(this.Yj,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",be(b.startTime),")\n")})}b=this.Wc.Wh();for(d=0;d<b.length;d++)c=this.Wc.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Jm,"\n","Total comments created ",
this.yl,"\n","Overhead start: ",this.Mm," ms\n","Overhead end: ",this.Lm," ms\n","Overhead comment: ",this.Km," ms\n");return a.join("")};function ae(a){var a=Math.round(a),b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function be(a){a=Math.round(a);return(""+(100+a/1E3%60)).substring(1,3)+"."+(""+(1E3+a%1E3)).substring(1,4)}new Xd;var ce=0;function de(){ce++;this.$c=p();this.ad=p();this.Zc=p();this.Te=p();this.Se=p();this.Ue=p();this.Ve=p();this.c=l}function ee(a){a.Ue(a.c.X);a.Te()}de.prototype.Ad=function(){this.Se()};function fe(){}ya(fe,zd);t=fe.prototype;t.Dl=i;t.Zj=l;t.addEventListener=function(a,b,c,d){S(this,a,b,c,d)};t.removeEventListener=function(a,b,c,d){Pd(this,a,b,c,d)};
t.dispatchEvent=function(a){var b=a.type||a,c=Kd;if(b in c){if(la(a))a=new Bd(a,this);else if(a instanceof Bd)a.target=a.target||this;else{var d=a,a=new Bd(b,this);Tb(a,d)}var d=1,e,c=c[b],b=i in c,f;if(b){e=[];for(f=this;f;f=f.Zj)e.push(f);f=c[i];f.mc=f.ua;for(var g=e.length-1;!a.Ge&&0<=g&&f.mc;g--)a.currentTarget=e[g],d&=Td(f,e[g],a.type,i,a)&&a.Ng!=o}if(o in c)if(f=c[o],f.mc=f.ua,b)for(g=0;!a.Ge&&g<e.length&&f.mc;g++)a.currentTarget=e[g],d&=Td(f,e[g],a.type,o,a)&&a.Ng!=o;else for(e=this;!a.Ge&&
e&&f.mc;e=e.Zj)a.currentTarget=e,d&=Td(f,e,a.type,o,a)&&a.Ng!=o;a=Boolean(d)}else a=i;return a};t.Pc=function(){fe.Le.Pc.call(this);Sd(this);this.Zj=l};function ge(){this.ki=this.ui=this.si=this.ti=this.ri=this.pi=this.qi=this.oi=this.mi=this.ni=this.li=this.Cf=this.Df=this.Oe=this.Bf=this.Mh=this.Lh=l;this.Vj=this.Uj=0;this.Nb=o;this.elevation=this.latitude=this.longitude=this.La=0;this.Vc=-1;this.Ha=this.Ra=0;this.R=he;this.nf=0;this.Ac=48;this.Yb=this.ji=this.Kc=this.lb=this.Lf=this.fb=this.wb=this.Ia=0;this.tl=o;this.Cl=this.Bl=0;this.gc=new Xc(0.7,0.9,1,1);this.Zc=p();this.Lb=function(a){for(;360<a;)a-=360;for(;0>a;)a+=360;return a};this.$c=
function(){if(0==this.Vc)this.Nb&&(this.Mh.B(this.Uj-64,this.Vj-64,0,this.La,1,1,i,o),this.Lh.B(this.Uj-64,this.Vj-64,0,0,1,1,i,o)),this.c.zd("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(1==this.Vc){this.tl&&this.ki.B(this.Bl-16,this.Cl-16,0,0,1,1,i,o,0.75);var a=this.c.width-1-64-this.nf,b=this.c.height-1-this.Ac,c=this.Lb(this.Lf+this.ji);this.R==ie?this.Cf.B(a-64,b-64,0,c,1,1,i,o,1,this.gc):this.R==je?this.Cf.B(a-
64,b-64,0,c,1,1,i,o,1,this.gc):this.Cf.B(a-64,b-64,0,c,1,1,i,o);this.R==ke?(this.Df.B(a-32,b-32,0,0,1,1,i,o),this.Oe.B(a-32,b-32,0,this.fb,1,1,i,o,0.5)):this.R==le?(this.Df.B(a-32,b-32,0,0,1,1,i,o),this.Oe.B(a-32,b-32,0,this.fb,1,1,i,o,0.5)):this.Df.B(a-32,b-32,0,0,1,1,i,o);b=this.c.height-1-82-this.Ac;this.R==me?(this.Bf.B(a-32,b-32,0,0,1,1,i),this.Oe.B(a-32,b-32,0,this.Ia,1,1,i,o,0.5)):this.R==ne?(this.Bf.B(a-32,b-32,0,0,1,1,i),this.Oe.B(a-32,b-32,0,this.Ia,1,1,i,o,0.5)):this.Bf.B(a-32,b-32,0,0,
1,1,i,o);b=this.c.height-1-82-128-this.Ac;this.ui.B(a-8,b-64,0,0,1,1,i,o);b=this.c.height-1-82-64-this.Ac;this.R==oe?this.qi.B(a-16,b-16,0,0,1,1,i,o):this.R==pe?this.pi.B(a-16,b-16,0,0,1,1,i,o):this.oi.B(a-16,b-16,0,0,1,1,i,o);b=this.c.height-1-82-128-64-this.Ac;this.R==qe?this.ni.B(a-16,b-16,0,0,1,1,i,o):this.R==re?this.mi.B(a-16,b-16,0,0,1,1,i,o):this.li.B(a-16,b-16,0,0,1,1,i,o);b=this.c.height-1-82-128-this.Yb-this.Ac;this.R==se?this.ti.B(a-16,b-16,0,0,1,1,i,o):this.R==te?this.si.B(a-16,b-16,0,
0,1,1,i,o):this.ri.B(a-16,b-16,0,0,1,1,i,o)}};this.ad=function(a){this.Vc=a.Vc;this.La=57.29577951308232*a.zl;this.longitude=a.fc.longitude;this.latitude=a.fc.latitude;this.elevation=a.fc.elevation;this.tl=a.ff;this.Bl=a.zc[0];this.Cl=this.c.height-a.zc[1]-1;this.R!=ie&&(this.ji=this.La,this.Lf=0);this.R==pe?(a.cb=Qc,a.Ea=1):this.R==re?(a.cb=Rc,a.Ea=1):this.R==te?0<this.Yb?(a.cb=Rc,a.Ea=Math.sqrt(this.Yb)/4):0>this.Yb&&(a.Ea=Math.sqrt(-this.Yb)/4,a.cb=Qc):this.R==ne?(a.cb=Sc,a.Ea=this.wb):this.R==
ie?(a.cb=Tc,a.Ea=this.ji+this.Lf,a.Ea=this.Lb(a.Ea),a.Ea*=Math.PI/180):this.R==ke?(a.cb=Uc,a.Ea=Math.PI*this.fb/180):a.cb=Pc;a.mm=this.R==he?0:1};this.Te=function(){this.Lh=new O(this.c);Q(this.Lh,kd+"flightnavigation/cmpbg.png");this.Mh=new O(this.c);Q(this.Mh,kd+"flightnavigation/cmpr.png");this.Bf=new O(this.c);Q(this.Bf,kd+"globenavigation/MoveWheel.png");this.Df=new O(this.c);Q(this.Df,kd+"globenavigation/YawPitchWheel.png");this.Cf=new O(this.c);Q(this.Cf,kd+"globenavigation/yaw_pitch_adjust.png");
this.Oe=new O(this.c);Q(this.Oe,kd+"globenavigation/movewheel_marker.png",l,l,i);this.li=new O(this.c);Q(this.li,kd+"globenavigation/minus.png");this.ni=new O(this.c);Q(this.ni,kd+"globenavigation/minus_over.png");this.mi=new O(this.c);Q(this.mi,kd+"globenavigation/minus_clicked.png");this.oi=new O(this.c);Q(this.oi,kd+"globenavigation/plus.png");this.qi=new O(this.c);Q(this.qi,kd+"globenavigation/plus_over.png");this.pi=new O(this.c);Q(this.pi,kd+"globenavigation/plus_clicked.png");this.ri=new O(this.c);
Q(this.ri,kd+"globenavigation/slider.png");this.ti=new O(this.c);Q(this.ti,kd+"globenavigation/slider_over.png");this.si=new O(this.c);Q(this.si,kd+"globenavigation/slider_clicked.png");this.ui=new O(this.c);Q(this.ui,kd+"globenavigation/slider_rail.png");this.ki=new O(this.c);Q(this.ki,kd+"globenavigation/crosshair.png")};this.Se=function(){this.Lh.k();this.Mh.k();this.Bf.k();this.Df.k();this.Cf.k();this.Oe.k();this.li.k();this.ni.k();this.mi.k();this.oi.k();this.qi.k();this.pi.k();this.ri.k();this.ti.k();
this.si.k();this.ui.k();this.ki.k()};this.Ue=function(a){S(a,ud,this.Vf,o,this);S(a,vd,this.Xf,o,this);S(a,wd,this.Wf,o,this);S(a,td,this.Ri,o,this)};this.Vf=function(a){if(Id(a,Ed)){var b=a.offsetX-this.c.X.offsetLeft,a=a.offsetY-this.c.X.offsetTop;this.Uj=b;this.Vj=this.c.height-a-1;this.Ra=b;this.Ha=this.c.height-a-1;this.Nb=i;1==this.Vc&&this.Ii(0)}};this.Xf=function(a){if(Id(a,Ed)){var b=a.offsetY-this.c.X.offsetTop;this.Ra=a.offsetX-this.c.X.offsetLeft;this.Ha=this.c.height-b-1;this.Nb=o;1==
this.Vc&&this.Ii(0);this.Yb=0}};this.Wf=function(a){var b=a.offsetY-this.c.X.offsetTop,c=this.c.height-b-1-this.Ha;this.Ra=a.offsetX-this.c.X.offsetLeft;this.Ha=this.c.height-b-1;1==this.Vc&&this.Ii(c)};this.Ri=function(){this.R==je&&ue(this.c.Pa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Ii=function(a){var b=this.c.width-1-64-this.nf-8,c=this.c.height-1-82-64-this.Ac+8,d=this.c.width-1-64-this.nf-8,e=this.c.height-1-82-128-64-this.Ac+8,f=this.c.width-1-64-this.nf-8,g=this.c.height-
1-82-128-this.Yb-this.Ac+8,j=this.c.width-1-64-this.nf,k=this.c.height-1-82-this.Ac,m=Math.abs(this.Ra-j),n=Math.abs(this.Ha-k),r=this.c.width-1-64-this.nf,q=this.c.height-1-this.Ac,u=Math.abs(this.Ra-r),u=u*u,v=Math.abs(this.Ha-q),v=v*v;this.Nb&&this.R==te?(this.Yb-=a,-40>this.Yb?this.Yb=-40:40<this.Yb&&(this.Yb=40)):this.Nb&&this.R==ne?(a=this.Ra-j,k=this.Ha-k,this.wb=this.Ia=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ia=360-this.Ia:this.wb=360-this.wb,this.Ia+=90,this.wb+=90,this.Ia=this.Lb(this.Ia),
this.wb=this.Lb(this.wb)):this.Nb&&this.R==ie?(a=this.Ra-r,k=this.Ha-q,this.lb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.lb=360-this.lb),this.lb-=90,this.lb=this.Lb(this.lb),this.Lf=this.Lb(this.lb-this.Kc)):this.Nb&&this.R==ke?(a=this.Ra-r,k=this.Ha-q,this.fb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.fb=360-this.fb),this.fb+=90,this.fb=this.Lb(this.fb)):(this.R=0,this.Ra>b&&this.Ha>c-16&&this.Ra<b+16&&this.Ha<c&&(this.R=this.Nb?pe:oe),this.Ra>d&&this.Ha>e-16&&this.Ra<d+16&&this.Ha<
e&&(this.R=this.Nb?re:qe),this.Ra>f&&this.Ha>g-16&&this.Ra<f+16&&this.Ha<g&&(this.R=this.Nb?te:se),729>=m*m+n*n?this.Nb?this.R=ne:(this.R=me,a=this.Ra-j,k=this.Ha-k,this.wb=this.Ia=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k?this.Ia=360-this.Ia:this.wb=360-this.wb,this.Ia+=90,this.wb+=90,this.Ia=this.Lb(this.Ia),this.wb=this.Lb(this.wb)):this.Ia=0,625>=u+v)?(this.R=this.Nb?ke:le,a=this.Ra-r,k=this.Ha-q,this.fb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.fb=360-this.fb),this.fb+=90,this.fb=this.Lb(this.fb)):
1600>=u+v&&(this.Nb?(this.R=ie,a=this.Ra-r,k=this.Ha-q,this.lb=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.lb=360-this.lb),this.lb-=90,this.lb=this.Lb(this.lb),this.Lf=this.Lb(this.lb-this.Kc),this.ji=this.La):(this.R=je,a=this.Ra-r,k=this.Ha-q,this.Kc=180*Math.atan2(Math.abs(k),a)/Math.PI,0>k&&(this.Kc=360-this.Kc),this.Kc-=90,this.Kc-=this.Lf,this.Kc=this.Lb(this.Kc)))}}var he=0,oe=1,pe=2,qe=3,re=4,se=5,te=6,me=7,ne=8,je=9,ie=10,le=11,ke=12;ge.prototype=new de;function ve(){this.name="ogAoeImage";this.type=Xa;this.wa=-1;this.F=o;this.options=l;this.ue=-1;this.ve=-180;this.te=-90;this.qf=180;this.pf=90;this.Cb=o;this.g=l;this.sf=[];this.kf=[]}ve.prototype=new F;t=ve.prototype;t.ya=function(a){this.options=a;this.ve=a.longitude0;this.te=a.latitude0;this.qf=a.longitude1;this.pf=a.latitude1;this.On=a.url;a=this.parent.parent.c;new O(a,i,256,256);this.g=new O(a);this.g.parent=this;Q(this.g,this.On,we,xe,i);this.wa=ye(this).zi(this)};t.Oa=function(){ye(this).Ui(this.wa)};
function ye(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.lj);return b}t.$=p();t.ba=p();
t.Wa=function(){var a=this.parent.parent.c;if(this.Cb!=o){var b=a.f.G.Qa.C.length,c,d,e,f,g=l;this.kf=l;this.kf=[];for(var j=0;j<b;j++)if(g=a.f.G.Qa.C[j],!(1>g.i.length)&&!g.wo&&(c=g.ve,d=g.te,e=g.qf,f=g.pf,!(this.ve>e|this.qf<c|this.te>f|this.pf<d)&&(this.kf[g.i]=this.sf[g.i],!this.sf[g.i]))){var k=new M(g.c);k.ea(g.o);var m=g.g,n=new O(g.c,i,256,256),r=n;a.fe.push(r);r.fg();m.B(0,0,0,0,1,1,i,i,1);this.g.B(256*(this.ve-c)/(e-c),256*(this.te-d)/(f-d),0,0,(this.qf-this.ve)/this.g.width/((e-c)/256),
(this.pf-this.te)/this.g.height/((f-d)/256),i,i,1);ze(a);k.ac(n);k.ko=g.pa[0];k.lo=g.pa[1];k.mo=g.pa[2];this.sf[g.i]=k;this.kf[g.i]=k}}for(var q in this.kf)a=this.kf[q],b=new L,b.ea(a.c.Gb),b.a[12]+=a.ko,b.a[13]+=a.lo,b.a[14]+=a.mo,a.c.uc(),a.c.vc(b),a.ga(),a.c.bd()};function we(a){a.parent.Cb=i;a.J&&a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function xe(a){a.I&&a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Ae(a){this.c=a;this.jg=[]}Ae.prototype.Wa=function(){for(var a=0;a<this.jg.length;a++)this.jg[a].Wa()};Ae.prototype.zi=function(a){this.jg.push(a);return this.jg.length-1};Ae.prototype.Ui=function(a){this.jg.splice(a,1)};function Be(a){this.c=a;this.Aa=[];this.Nd=new Ce}Be.prototype.Wa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Nd.xh(b);for(var k=0;k<this.Aa.length;k++){var m=this.Aa[k];m.F||(this.Nd.wh(m.De,m.Ee,m.Fe,m.De+0.0010,m.Ee+0.0010,m.Fe+0.0010),f=m.De-c,g=m.Ee-d,j=m.Fe-e,f=f*f+g*g+j*j,g=m.ok*m.ok,m.nk*m.nk>f&&g<f&&m.ga())}};Be.prototype.$f=function(a,b){for(var c=0;c<this.Aa.length;c++)if(this.Aa[c].Yf(a,b))return this.Aa[c];return l};function De(a){this.c=a;this.Da=[]}De.prototype.Wa=function(){for(var a=0;a<this.Da.length;a++){var b=this.Da[a];b.F||b.ga()}};De.prototype.Ai=function(a){this.Da.push(a)};De.prototype.Vi=function(a){for(var b=0;b<this.Da.length;b++)if(this.Da[b]==a){this.Da.splice(b,1);break}};De.prototype.Zf=function(a,b){for(var c=0;c<this.Da.length;c++){var d=this.Da[c].Yf(a,b);if(d)return d}return l};function Ee(){this.n=this.y=this.x=0}function Ce(){this.D=Array(6);this.D[0]=new Fe;this.D[1]=new Fe;this.D[2]=new Fe;this.D[3]=new Fe;this.D[4]=new Fe;this.D[5]=new Fe;this.O=Array(8);this.O[0]=new Ee;this.O[1]=new Ee;this.O[2]=new Ee;this.O[3]=new Ee;this.O[4]=new Ee;this.O[5]=new Ee;this.O[6]=new Ee;this.O[7]=new Ee}function Fe(){this.Fc=this.Ec=this.Dc=this.Yc=0}
Fe.prototype.tc=function(){var a=Math.sqrt(this.Dc*this.Dc+this.Ec*this.Ec+this.Fc*this.Fc);this.Dc/=a;this.Ec/=a;this.Fc/=a;this.Yc/=a};
Ce.prototype.wh=function(a,b,c,d,e,f){this.O[0].x=a;this.O[0].y=b;this.O[0].n=c;this.O[1].x=d;this.O[1].y=b;this.O[1].n=c;this.O[2].x=d;this.O[2].y=e;this.O[2].n=c;this.O[3].x=a;this.O[3].y=e;this.O[3].n=c;this.O[4].x=a;this.O[4].y=b;this.O[4].n=f;this.O[5].x=a;this.O[5].y=e;this.O[5].n=f;this.O[6].x=d;this.O[6].y=e;this.O[6].n=f;this.O[7].x=d;this.O[7].y=b;this.O[7].n=f;for(a=0;6>a;a++){b=8;for(c=0;8>c;c++)0>this.D[a].Dc*this.O[c].x+this.D[a].Ec*this.O[c].y+this.D[a].Fc*this.O[c].n+this.D[a].Yc&&
--b;if(0==b)return o}return i};
Ce.prototype.xh=function(a){this.ib=a.a;this.am=this.ib[0];this.em=this.ib[1];this.im=this.ib[2];this.tf=this.ib[3];this.bm=this.ib[4];this.fm=this.ib[5];this.jm=this.ib[6];this.uf=this.ib[7];this.cm=this.ib[8];this.gm=this.ib[9];this.km=this.ib[10];this.vf=this.ib[11];this.dm=this.ib[12];this.hm=this.ib[13];this.lm=this.ib[14];this.wf=this.ib[15];this.D[0].Dc=this.tf+this.am;this.D[0].Ec=this.uf+this.bm;this.D[0].Fc=this.vf+this.cm;this.D[0].Yc=this.wf+this.dm;this.D[0].tc();this.D[1].Dc=this.tf-
this.am;this.D[1].Ec=this.uf-this.bm;this.D[1].Fc=this.vf-this.cm;this.D[1].Yc=this.wf-this.dm;this.D[1].tc();this.D[2].Dc=this.tf-this.em;this.D[2].Ec=this.uf-this.fm;this.D[2].Fc=this.vf-this.gm;this.D[2].Yc=this.wf-this.hm;this.D[2].tc();this.D[3].Dc=this.tf+this.em;this.D[3].Ec=this.uf+this.fm;this.D[3].Fc=this.vf+this.gm;this.D[3].Yc=this.wf+this.hm;this.D[3].tc();this.D[4].Dc=this.tf+this.im;this.D[4].Ec=this.uf+this.jm;this.D[4].Fc=this.vf+this.km;this.D[4].Yc=this.wf+this.lm;this.D[4].tc();
this.D[5].Dc=this.tf-this.im;this.D[5].Ec=this.uf-this.jm;this.D[5].Fc=this.vf-this.km;this.D[5].Yc=this.wf-this.lm;this.D[5].tc()};A("ViewFrustum",Ce);Ce.prototype.TestBox=Ce.prototype.wh;Ce.prototype.Update=Ce.prototype.xh;function Ge(){this.kg=this.lg=o;this.version=this.Td=this.Ie=this.bb=this.Va=l}
Ge.prototype.Qf=function(a){this.N=new XMLHttpRequest;this.N.open("GET",a,i);var b=this;this.N.onreadystatechange=function(){a:if(4==b.N.readyState)if(200==b.N.status){var a=b.N.responseText,d;try{d=Yc(a)}catch(e){alert(e);break a}d.extent?(b.version=1,b.Go=d.name,b.bb=d.maxlod,b.Qn=256,a=d.extent,b.Va=a,b.jo=[b.bb,a[0],a[1],a[2],a[3]],"image"==d.type?"png"==d.format?(b.Ie="image/png",b.Td=".png"):"jpg"==d.format?(b.Ie="image/jpg",b.Td=".jpg"):b.Ie="image/png":"elevation"==d.type&&(b.Td=".json")):
(b.version=0,b.Fo=d.layer,b.Eo=d.copyright,b.Ao=d.srs,b.Va=d.boundingbox,b.bb=d.levelofdetail,b.zo=d.imagewidth,b.yo=d.imageheight,b.Qn=d.tilesize,b.Jo=d.tilelayout,b.Ie=d.tileformat,b.jo=d.bounds,b.Io=d.center,"image/png"==b.Ie?b.Td=".png":"image/jpg"==b.Ie?b.Td=".jpg":"elevation/json"==b.Ie&&(b.Td=".json"));b.lg=i}else H(I("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.kg=i};this.N.send()};A("DatasetInfo",Ge);Ge.prototype.Download=Ge.prototype.Qf;function He(){}t=He.prototype;t.ag=function(a,b){this.Ti(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};t.Ti=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
t.$b=function(a,b){b.x=0;b.y=0;b.gb=a.length;for(var c,d=b.gb;0<d;d--)switch(c=1<<d-1,a[b.gb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};t.Vk=function(a,b){var c={x:l,y:l,gb:l};this.$b(a,c);var d=4.007501668E7/Math.pow(2,c.gb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
t.Wk=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Ti(a,d);var f=256*d[0]*Math.pow(2,c),g=256*(1-d[1])*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI,k=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(2*-j*Math.PI))/Math.PI;b[0]=d;b[1]=k;b[2]=e;b[3]=360*c};A("MercatorQuadtree",He);He.prototype.QuadKeyToMercatorCoord=He.prototype.ag;
He.prototype.QuadKeyToNormalizedCoord=He.prototype.Ti;He.prototype.QuadKeyToTileCoord=He.prototype.$b;He.prototype.QuadKeyToMercator=He.prototype.Vk;He.prototype.QuadKeyToWGS84=He.prototype.Wk;var Ie={Oi:function(a){for(var b="",c=0;c<a.length;c++)0==c%2&&0<c&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};A("GlobeUtils",Ie);A("GlobeUtils.MakeHierarchicalFilename",Ie.Oi);function Je(){this.qa=s(o);this.rc=s(o);this.Fb=p();this.Kb=s(0);this.Xd=this.Yd=-1;this.qc=s(o)};function Ke(){this.u=new Ge;this.j=this.Xb=l;this.ca=new He;this.coords=Array(4);this.kb=1;this.qa=function(){return this.u.lg};this.rc=function(){return this.u.kg};this.Fb=function(a,b,c,d,e,f){if(this.qa()){var g=this.Xb+"/"+this.j+"/"+Ie.Oi(b+this.u.Td),a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,Le,Me,i)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.qc=function(a){if(a.length>this.u.bb)return o;this.ca.ag(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[2],j=this.u.Va[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?o:i};this.Na=function(a,b,c){this.kb=c==l?1:c;this.Xb=a;this.j=b;this.u.Qf(a+"/"+b+".json")}}Ke.prototype=new Je;function Le(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Me(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}A("i3dImageLayer",Ke);Ke.prototype.Failed=Ke.prototype.rc;Ke.prototype.Ready=Ke.prototype.qa;Ke.prototype.RequestTile=Ke.prototype.Fb;
Ke.prototype.Setup=Ke.prototype.Na;function Ne(){this.j=this.Sa=l;this.ca=new He;this.ma=0;this.qa=s(i);this.rc=s(o);this.Fb=function(a,b,c,d,e,f){var g={};this.ca.$b(b,g);g=this.Sa[this.ma]+"/"+g.gb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,Oe,Pe,i);this.ma++;this.ma>=this.Sa.length&&(this.ma=0)};this.Kb=s(16);this.qc=function(a){return 17>a.length?i:o};this.Na=ba("Sa")}Ne.prototype=new Je;function Oe(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}
function Pe(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Qe(){this.qa=s(o);this.rc=s(o);this.Fb=p();this.Kb=s(0);this.qc=s(o)};function Re(){this.u=new Ge;this.j=this.Xb=l;this.ca=new He;this.coords=Array(4);this.qa=function(){return this.u.lg};this.rc=function(){return this.u.kg};this.Fb=function(a,b,c,d,e,f){if(this.qa()){var g=this.Xb+"/"+this.j+"_JSON/"+(Ie.Oi(b+".jso")+"n"),a=new M(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;hd(a,g,Se,Te)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.qc=function(a){if(a.length>this.u.bb)return o;this.ca.ag(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],d=this.coords[3],
e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[2],j=this.u.Va[3];return d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e?o:i};this.Na=function(a,b){this.Xb=a;this.j=b;this.u.Qf(a+"/"+b+".json")}}Re.prototype=new Qe;function Se(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Te(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Ue(){this.version=this.style=this.mf=this.j=this.Xb=l;this.kb=1;this.Xa=l;this.ca=new He;this.qa=s(i);this.rc=s(o);this.Fb=function(a,b,c,d,e,f){-1==this.Xb.indexOf("?",this.Xb.length-1)&&(this.Xb+="?");var g=Array(4);"EPSG%3A4326"==this.Xa?this.ca.Wk(b,g):this.ca.Vk(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Xb+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.Xa+"&LAYERS="+this.j+"&STYLES="+this.style+"&FORMAT="+this.mf+"&VERSION="+this.version+"&BBOX="+g;a=new O(a);
a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;"image/png"==this.mf&&(a.kb=this.kb);Q(a,g,Ve,We,i)};this.Kb=s(30);this.qc=function(a){return 31>a.length?i:o};this.Na=function(a,b,c,d,e,f,g){this.Xb=a;this.j=b;this.mf=d;this.style=e;this.version=f;this.kb=g;this.Xa=c;this.mf==l&&(this.mf="image/png");this.style==l&&(this.style="");this.version==l&&(this.version="1.1.1");this.Xa==l&&(this.Xa="EPSG%3A900913");"EPSG:900913"==this.Xa&&(this.Xa="EPSG%3A900913");"ESRI:102100"==this.Xa&&(this.Xa="ESRI%3A102100");"ESRI:102113"==
this.Xa&&(this.Xa="ESRI%3A102113");"EPSG:3785"==this.Xa&&(this.Xa="EPSG%3A3785");"EPSG:3857"==this.Xa&&(this.Xa="EPSG%3A3857");"EPSG:4326"==this.Xa&&(this.Xa="EPSG%3A4326")}}Ue.prototype=new Je;function Ve(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function We(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function Xe(){this.j=this.Sa=l;this.ca=new He;this.ma=0;this.qa=s(i);this.rc=s(o);this.Fb=function(a,b,c,d,e,f){var g={};this.ca.$b(b,g);var j=Math.pow(2,g.gb),g=this.Sa[this.ma]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.gb)+"&key=[KEY]",a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,Ye,Ze,i);this.ma++;this.ma>=this.Sa.length&&(this.ma=0)};this.Kb=s(16);this.qc=function(a){return 17>a.length?i:o};this.Na=ba("Sa")}Ne.prototype=new Je;
function Ye(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function Ze(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function $e(){this.u=new Ge;this.j=this.Xb=l;this.ca=new He;this.coords=Array(4);this.ma=0;this.qa=function(){return this.u.lg};this.rc=function(){return this.u.kg};this.Fb=function(a,b,c,d,e,f){if(this.qa()){var g={};this.ca.$b(b,g);g=this.Sa[this.ma]+"/"+this.j+"/tiles/"+g.gb+"/"+g.x+"/"+g.y+".json";a=new M(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;hd(a,g,af,bf);this.ma++;this.ma>=this.Sa.length&&(this.ma=0)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.qc=function(a){if(a.length>this.u.bb)return o;
for(var b=a,c=a,d=0;d<this.u.bb-a.length;d++)b+="0",c+="3";d={};this.ca.$b(b,d);b=d.x;a=d.y;this.ca.$b(c,d);var c=d.x,d=d.y,e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[3];return!(b>this.u.Va[2]||c<e||a>g||d<f)};this.Na=function(a,b){this.Sa=a;this.j=b;this.u.Qf(a[0]+"/"+b+"/layersettings.json")}}$e.prototype=new Qe;function af(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function bf(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l};function cf(){this.j=this.Sa=l;this.ca=new He;this.sub=this.ma=0;this.ho="Galile,Galil,Gali,Gal,Ga,G".split(",");this.qa=s(i);this.rc=s(o);this.Fb=function(a,b,c,d,e,f){var g={};this.ca.$b(b,g);g=this.Sa[this.ma]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.gb+"&s="+this.ho[this.sub];this.sub++;5==this.sub&&(this.sub=0);a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;Q(a,g,Oe,Pe,i);this.ma++;this.ma>=this.Sa.length&&(this.ma=0)};this.Kb=s(19);this.qc=function(a){return 20>a.length?i:o};this.Na=ba("Sa")}
cf.prototype=new Ne;function df(a,b){this.xe=a||-1;this.Bn=b||o;this.Sd={};this.ua=0;this.wm=Math.round(0.75*this.xe);this.Wc={};this.Wc.hits=0;this.Wc.misses=0;ef(this,"Initialized cache with size "+a)}df.prototype.getItem=function(a){var b=this.Sd[a];b!=l&&(ff(b)?(gf(this,a),b=l):b.$h=(new Date).getTime());(b=b?b.value:l)?(this.Wc.hits++,ef(this,"Cache HIT for key "+a)):(this.Wc.misses++,ef(this,"Cache MISS for key "+a));return b};
df.prototype.setItem=function(a,b,c){this.Sd[a]!=l&&gf(this,a);hf(this,new function(a,b,c){(a==l||""==a)&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==l&&(c={});c.Rh!=l&&(c.Rh=c.Rh.getTime());c.Mg==l&&(c.Mg=2);this.options=c;this.$h=(new Date).getTime()}(a,b,c));ef(this,"Setting key "+a);if(0<this.xe&&this.ua>this.xe){var d=this;setTimeout(function(){d.Zn.call(d)},0)}};df.prototype.clear=function(){for(var a in this.Sd)gf(this,a);ef(this,"Cache cleared")};
df.prototype.Zn=function(){var a=[],b;for(b in this.Sd){var c=this.Sd[b];ff(c)?gf(this,b):a.push(c)}if(a.length>this.wm)for(a=a.sort(function(a,b){return a.options.Mg!=b.options.Mg?b.options.Mg-a.options.Mg:b.$h-a.$h});a.length>this.wm;)gf(this,a.pop().key);ef(this,"Purged cached")};function hf(a,b){a.Sd[b.key]=b;a.ua++}
function gf(a,b){var c=a.Sd[b];delete a.Sd[b];a.ua--;ef(a,"removed key "+b);c.options.xn!=l&&setTimeout(function(){c.options.xn.call(l,c.key,c.value)},0);c.k!=l&&setTimeout(function(){c.k()},0)}function ff(a){var b=(new Date).getTime(),c=o;a.options.Rh&&a.options.Rh<b&&(c=i);!c&&a.options.In&&a.$h+1E3*a.options.In<b&&(c=i);return c}function ef(a,b){a.Bn&&I("owg.Cache").info(b)};function jf(a,b,c){a=J(a)-0;b=Math.log(Math.tan(Math.PI/4+J(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function kf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=Hc(b);for(a=Hc(a/1+0);180<a;)a-=180;for(;-180>a;)a+=180;for(;90<b;)b-=180;for(;-90>b;)b+=180;c[0]=a;c[1]=b};function lf(a,b,c){this.c=a;this.i=b;this.ca=c;this.g=l;this.dc=o;this.o=l;this.Ll=i;this.pa=[];this.Ja=Array(5);this.Ja[0]=new K;this.Ja[1]=new K;this.Ja[2]=new K;this.Ja[3]=new K;this.Ja[4]=new K;this.Qd=0;this.images=l;this.mj=o;this.lf=0;this.Eh=new K;this.jb=new L;this.ve=-180;this.te=-90;this.qf=180;this.pf=90;var d=Array(4),e=Array(2);this.ca.ag(this.i,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new R;f=d[0];g=d[1];kf(f,g,e);f=e[0];g=e[1];this.ve=f;this.pf=g;j.t(f,g,0);j.la(a);f=d[2];g=d[1];
kf(f,g,e);f=e[0];g=e[1];j.t(f,g,0);j.la(b);f=d[2];g=d[3];kf(f,g,e);f=e[0];g=e[1];this.qf=f;this.te=g;j.t(f,g,0);j.la(c);d=new K;e=new K;d.t(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.t(c[0]-a[0],c[1]-a[1],c[2]-a[2]);Mc(this.Eh,d,e);this.Eh.tc()}var mf=0;
function nf(a){if(0==a.Qd&&0==a.lf){var b=0,c=0;if(a.images!==l)for(var d=0;d<a.images.length;d++)a.images[d]!=l&&(b++,c=d);0==b?(a.g=a.c.Xj,a.o===l&&of(a),a.o.ac(a.g),a.dc=i,a.images=l):1==b?(a.g=a.images[c],a.o===l&&of(a),a.o.ac(a.g),a.dc=i,a.images=l):(a.mj=i,a.o===l&&of(a),a.dc=i)}}function pf(a,b,c){a=b.caller;a.images[c]=b;a.Qd-=1;nf(a);mf--}function qf(a,b,c){0<=c?(b.images[c]=l,b.Qd-=1):(b.images=l,b.Qd=0);nf(b);mf--}
function rf(a,b){var c=b.caller;c.o=b;c.o.gb=c.i.length;c.pa=b.oa;c.Ja[0].t(b.Q[0],b.Q[1],b.Q[2]);c.Ja[1].t(b.ha[0],b.Q[1],b.Q[2]);c.Ja[2].t(b.ha[0],b.ha[1],b.Q[2]);c.Ja[3].t(b.Q[0],b.ha[1],b.Q[2]);c.Ja[4].t(0.5*(b.ha[0]-b.Q[0]),0.5*(b.ha[1]-b.Q[1]),0.5*(b.ha[2]-b.Q[2]));c.lf-=1;nf(c);mf--}function sf(a,b){b.o=l;b.lf-=1;nf(b);mf--}lf.prototype.k=function(){this.g&&this.g.k();this.o&&this.o.k()};
function of(a){a.Ll=o;a.o=new M(a.c);a.o.gb=a.i.length;var b;b=3>a.i.length?2:6>a.i.length?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),m=Array(3);a.ca.ag(a.i,d);g=d[0];j=d[1];for(var n=(d[3]-j)/(b-1),r=(d[2]-g)/(b-1),q,u,v,y=new R,d=0;d<b;d++)for(e=0;e<b;e++)q=g+e*r,u=j+d*n,kf(q,u,k),y.t(k[0],k[1],0),y.la(m),q=m[0],u=m[1],v=m[2],0==e&&0==d&&(a.pa=[q,u,v]),0==e&&0==d?a.Ja[0].t(q,u,v):e==b-1&&0==d?a.Ja[1].t(q,
u,v):e==b-1&&d==b-1?a.Ja[2].t(q,u,v):0==e&&d==b-1?a.Ja[3].t(q,u,v):e==(b-1)/2&&d==(b-1)/2&&a.Ja[4].t(q,u,v),f.push(q-a.pa[0]),f.push(u-a.pa[1]),f.push(v-a.pa[2]);g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],z,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,z=e+1,n=0==j%2?m=b-1-d:m=d,z+=n*b,c[f++]=k+m*b,c[f++]=z;c[f++]=z;j+=1}bd(a.o,g);ed(a.o,c,"TRIANGLESTRIP");a.o.ac(a.g);a.o.oa=a.pa;id(a.o)}
lf.prototype.Wa=function(a){if(!(3>this.i.length)){if(a){if(this.jb.ea(this.c.Gb),this.jb.a[12]+=this.pa[0],this.jb.a[13]+=this.pa[1],this.jb.a[14]+=this.pa[2],this.c.uc(),this.c.vc(this.jb),a=this.o,a.qa){a.V==l&&a.Fd();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.V);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.ub);a.ka&&(a.c.uc(),a.ud.aa(a.ka,a.c.Gb),a.c.vc(a.ud));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,12,0);fd(a.c.Ta,a.c.ja,a.yd);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,o,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,o,32,24);fd(a.c.Ta,a.c.ja,a.yd);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,o,28,12);fd(a.c.Ta,a.c.ja,a.yd);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,
3,a.b.FLOAT,o,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,o,20,12);fd(a.c.Ta,a.c.ja,a.yd);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,o,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,o,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,o,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,o,48,40),fd(a.c.Ta,a.c.ja,a.yd)}switch(a.qd){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.Ib,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.Ib,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.mj){this.mj=o;a=this.g=new O(this.c,i,256,256);this.c.fe.push(a);a.fg();for(a=0;a<this.images.length;a++)this.images[a]!=l&&(1>this.images[a].kb?this.images[a].B(0,0,0,0,1,1,i,i,this.images[a].kb):this.images[a].B(0,0,0,0,1,1,i,i,1));ze(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=l&&this.images[a].k();this.images=l;this.o.ac(this.g)}this.jb.ea(this.c.Gb);this.jb.a[12]+=this.pa[0];this.jb.a[13]+=this.pa[1];this.jb.a[14]+=this.pa[2];this.c.uc();this.c.vc(this.jb);this.c.f.G.Qa.dk==tf?this.o.mode="pt":this.c.f.G.Qa.dk==uf&&(this.o.mode="pt_chroma");this.o.ga()}this.c.bd()}};function vf(a,b,c,d,e){this.c=a;this.ia=b;this.tb=c;this.ca=d;this.Ih=new df(e,o);this.hk={};this.hk.om=0}vf.prototype.k=function(){this.ca=this.tb=this.ia=this.c=l;this.Ih.clear();this.Ih=l};vf.prototype.Qk=function(){if(!this.ia||0==this.ia.length)return o;for(var a=0;a<this.ia.length;a++)if(!this.ia[a].qa())return o;if(this.tb)for(a=0;a<this.tb.length;a++)if(!this.tb[a].qa())return o;return i};
vf.prototype.cd=function(a){var b=this.Ih.getItem(a);if(b==l){this.hk.om++;var c=b=new lf(this.c,a,this.ca),d=this.ia,e=this.tb;if(3>c.i.length)qf(0,c,-1);else{if(0<d.length){c.Qd=d.length;c.images=Array(c.Qd);for(var f=0;f<d.length;f++){c.images[f]=l;var g=c.i.length,g=(g<=d[f].Xd||-1==d[f].Xd)&&(g>=d[f].Yd||-1==d[f].Yd);d[f].qc(c.i)&&g?(d[f].Fb(c.c,c.i,f,pf,qf,c),mf++):qf(0,c,f)}}e&&0<e.length&&8<c.i.length&&e[0].qc(c.i)&&(c.lf=1,e[0].Fb(c.c,c.i,0,rf,sf,c),mf++)}this.Ih.setItem(a,b)}return b};
vf.prototype.Kb=function(){var a=0,b=0;if(0<this.tb.length)for(var c=0;c<this.tb.length;c++)b=Math.max(b,this.tb[c].Kb());for(c=0;c<this.ia.length;c++)a=Math.max(a,this.ia[c].Kb());return 0<b?Math.min(b,a):a};A("GlobeCache",vf);vf.prototype.IsReady=vf.prototype.Qk;vf.prototype.RequestBlock=vf.prototype.cd;function wf(){this.u=new Ge;this.j=l;this.ca=new He;this.coords=Array(4);this.kb=1;this.ma=0;this.qa=function(){return this.u.lg};this.rc=function(){return this.u.kg};this.Fb=function(a,b,c,d,e,f){if(this.qa()){var g={};this.ca.$b(b,g);g=this.Sa[this.ma]+"/"+this.j+"/tiles/"+g.gb+"/"+g.x+"/"+g.y+this.u.Td;a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,xf,yf,i);this.ma++;this.ma>=this.Sa.length&&(this.ma=0)}};this.Kb=function(){return this.u.bb?this.u.bb:0};this.qc=function(a){if(a.length>
this.u.bb)return o;for(var b=a,c=a,d=0;d<this.u.bb-a.length;d++)b+="0",c+="3";d={};this.ca.$b(b,d);b=d.x;a=d.y;this.ca.$b(c,d);var c=d.x,d=d.y,e=this.u.Va[0],f=this.u.Va[1],g=this.u.Va[3];return!(b>this.u.Va[2]||c<e||a>g||d<f)};this.Na=function(a,b,c){this.kb=c==l?1:c;this.Sa=a;this.j=b;this.u.Qf(a[0]+"/"+b+"/layersettings.json")}}wf.prototype=new Je;function xf(a){a.J(a.i,a,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}function yf(a){a.I(a.i,a.caller,a.j);a.J=l;a.I=l;a.i=l;a.caller=l;a.j=l}
A("owgImageLayer",wf);wf.prototype.Failed=wf.prototype.rc;wf.prototype.Ready=wf.prototype.qa;wf.prototype.RequestTile=wf.prototype.Fb;wf.prototype.Setup=wf.prototype.Na;function zf(){this.kb=1;this.Fb=function(a,b,c,d,e,f){var g={};this.ca.$b(b,g);g.y=Math.pow(2,g.gb)-1-g.y;g=this.Sa[this.ma]+"/"+g.gb+"/"+g.x+"/"+g.y+".png";a=new O(a);a.i=b;a.j=c;a.J=d;a.I=e;a.caller=f;a.kb=this.kb;Q(a,g,Oe,Pe,i)}}zf.prototype=new Ne;function Af(a){this.c=a;this.ia=[];this.tb=[];this.ca=new He;this.wn=1E3;this.Ga=l;this.C=[];this.Rl=0;this.xg={};this.xg.Kh=0;this.mg=l;this.Sj=0;this.xm=1;this.Nd=new Ce;this.Z=Array(3);this.Rj=new L;this.ze=new M(this.c);this.Je=new M(this.c);this.Ae=[8/255,24/255,58/255];this.Ke=[1,1,1];this.ck=1;this.dk=tf}t=Af.prototype;t.k=function(){this.Ga&&(this.Ga.k(),this.Ga=l);this.ze&&(this.ze.k(),this.ze=l);this.Je&&(this.Je.k(),this.Je=l)};
t.Ci=function(a){var b=-1;if(x(a.service))if("i3d"==a.service){if(x(a.url)&&x(a.layer)&&0<a.url.length){var b=a.url[0],c=a.layer,d=new Ke;x(a.minlod)&&(d.Yd=a.minlod);x(a.maxlod)&&(d.Xd=a.maxlod);d.Na(b,c,a.transparency);b=this.ia.length;this.ia.push(d);Bf(this)}}else"osm"==a.service?x(a.url)&&0<a.url.length&&(d=new Ne,x(a.minlod)&&(d.Yd=a.minlod),x(a.maxlod)&&(d.Xd=a.maxlod),d.Na(a.url),b=this.ia.length,this.ia.push(d),Bf(this)):"tms"==a.service?x(a.url)&&0<a.url.length&&(d=new zf,x(a.minlod)&&(d.Yd=
a.minlod),x(a.maxlod)&&(d.Xd=a.maxlod),d.Na(a.url),b=this.ia.length,this.ia.push(d),Bf(this)):"wms"==a.service?x(a.url)&&0<a.url.length&&x(a.layer)&&0<a.layer.length&&(d=new Ue,x(a.format)&&(d.mf=a.format),x(a.style)&&(d.style=a.style),x(a.version)&&(d.version=a.version),d.Na(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency),b=this.ia.length,this.ia.push(d),Bf(this)):"owg"==a.service?x(a.url)&&0<a.url.length&&(c=a.layer,d=new wf,x(a.minlod)&&(d.Yd=a.minlod),x(a.maxlod)&&(d.Xd=a.maxlod),
d.Na(a.url,c,a.transparency),b=this.ia.length,this.ia.push(d),Bf(this)):"goo"==a.service?x(a.url)&&0<a.url.length&&(d=new cf,x(a.minlod)&&(d.Yd=a.minlod),x(a.maxlod)&&(d.Xd=a.maxlod),d.Na(a.url),b=this.ia.length,this.ia.push(d),Bf(this)):"oym"==a.service&&x(a.url)&&0<a.url.length&&(d=new Xe,x(a.minlod)&&(d.Yd=a.minlod),x(a.maxlod)&&(d.Xd=a.maxlod),d.Na(a.url),b=this.ia.length,this.ia.push(d),Bf(this));return b};
t.Bi=function(a){var b=-1;if("i3d"==a.service){if(a.url&&a.layer&&0<a.url.length){var b=a.layer,c=new Re;c.Na(a.url[0],b);b=this.tb.length;this.tb.push(c);Bf(this)}}else if("owg"==a.service&&a.url&&a.layer&&0<a.url.length){var d=a.url,b=a.layer,c=new $e;c.Na(d,b);b=this.tb.length;this.tb.push(c);Bf(this)}return b};t.nh=function(a){0>a||a>=this.ia.length||(this.ia.splice(a,1),Bf(this))};function Bf(a){a.Ga&&(a.Ga.k(),a.Ga=l);a.Ga=new vf(a.c,a.ia,a.tb,a.ca,a.wn)}
t.Wa=function(a,b){this.Ga.hk.om=0;this.Rj.ea(b);this.Nd.xh(b);this.mg=a;if(this.Ga&&this.Ga.Qk()){this.Sj=this.Ga.Kb();var c=this.Ga.cd("0"),d=this.Ga.cd("1"),e=this.Ga.cd("2"),f=this.Ga.cd("3");if(c.dc&&d.dc&&e.dc&&f.dc){this.C=[];this.C.push(c);this.C.push(d);this.C.push(e);this.C.push(f);for(this.xg.Kh=0;this.xg.Kh!=this.C.length;)a:{c=this.xg.Kh;if(this.C[c].i.length!=this.Sj&&this.C[c].dc&&Cf(this,c)){var g=this.C[c].i,d=this.Ga.cd(g+"0"),e=this.Ga.cd(g+"1"),f=this.Ga.cd(g+"2"),g=this.Ga.cd(g+
"3");if(d.dc&&e.dc&&f.dc&&g.dc){this.C.splice(c,1);this.C.push(d);this.C.push(e);this.C.push(f);this.C.push(g);break a}}this.xg.Kh++}for(c=0;c<this.C.length;)e=this.C[c],d=e.Ja[4].a,e=e.Eh.a,f=this.mg.a,this.Z[0]=f[0]-d[0],this.Z[1]=f[1]-d[1],this.Z[2]=f[2]-d[2],0.4<=(this.Z[0]*e[0]+this.Z[1]*e[1]+this.Z[2]*e[2])/Math.sqrt(this.Z[0]*this.Z[0]+this.Z[1]*this.Z[1]+this.Z[2]*this.Z[2])?this.C.splice(c,1):c++;for(c=0;c<this.C.length;c++)this.C[c].Wa(o);d=[];e=[];for(c=0;c<this.C.length;c++){var f=this.C[c].i,
g=0,j=f.charAt(0);if("0"==j||"1"==j)g=1;if("2"==j||"3"==j)g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if(("0"==j||"1"==j)&&"2"==g){g=0;break}if(("2"==j||"3"==j)&&"1"==g){g=0;break}}1==g&&d.push(this.C[c]);2==g&&e.push(this.C[c])}3<d.length&&Df(this,d);3<e.length&&Ef(this,e)}}};
function Cf(a,b){var c=i,d=a.C[b],e=d.i.length;if(e>a.Sj)return o;if(3>e)return i;c=a.Nd.wh(d.o.Q[0],d.o.Q[1],d.o.Q[2],d.o.ha[0],d.o.ha[1],d.o.ha[2]);if(!c)return o;var f=d.Ja[4].a,g=d.Eh.a,e=a.mg.a;a.Z[0]=e[0]-f[0];a.Z[1]=e[1]-f[1];a.Z[2]=e[2]-f[2];f=Math.sqrt(a.Z[0]*a.Z[0]+a.Z[1]*a.Z[1]+a.Z[2]*a.Z[2]);0<f&&(a.Z[0]/=f,a.Z[1]/=f,a.Z[2]/=f);0.4<a.Z[0]*g[0]+a.Z[1]*g[1]+a.Z[2]*g[2]&&(c=o);if(!c)return o;for(var c=[0,0,0],g=0,f=1.0E20,j=d.o.r.length/d.o.M,k=0;k<j;k++)c[0]=e[0]-(d.o.r[5*k]+d.pa[0]),c[1]=
e[1]-(d.o.r[5*k+1]+d.pa[1]),c[2]=e[2]-(d.o.r[5*k+2]+d.pa[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.xm;g=d.Ja[0].Mf();g.$i(d.Ja[1]);return 1<c*g.Li()/e}
t.de=function(a,b,c){for(var b=this.c.be(a,b,this.Rj,i),d=[],e=a=0;e<this.C.length;e++){var f=this.C[e].o.Q,g=this.C[e].o.ha;this.C[e].o.Fh.Tf(b.x,b.y,b.n,b.md,b.nd,b.od,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.C[e])}f=1.0E20;c.hit=o;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].o.Ed(b.x,b.y,b.n,b.md,b.nd,b.od))&&g.w<f)c.hit=i,f=g.w,a=d[e].Ll?0:1;c.tmin=f;c.hit&&(c.x=b.x+f*b.md,c.y=b.y+f*b.nd,c.z=b.n+f*b.od,b=new R(0,0,0),b.Mc(c.x,c.y,c.z),c.lng=b.H[0],c.lat=b.H[1],c.elv=b.H[2],1==a&&(c.elv=
0))};t.mh=function(a,b,c,d){if(d)if(d={},this.de(a,b,d),d.hit)this.ck=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.be(a,b,this.Rj,i);c.hit=o;var f=e.x,b=e.y,a=e.n,g=e.md,d=e.nd,e=e.od,j=g*g+d*d+e*e,k=f*g+b*d+a*e,m=k*k-j*(f*f+b*b+a*a-this.ck*this.ck);0>=m||(j=(0-k-Math.sqrt(m))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=i,c.x=f*d,c.y=b*d,c.z=a*d,a=new R(0,0,0),a.Mc(c.x,c.y,c.z),c.lng=a.H[0],c.lat=a.H[1],c.elv=a.H[2])};
t.dh=function(a,b){var c={hasvalue:o,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new R(a,b,0);f.la(e);f.t(a,b,-1);f.la(d);var g,j,f=d[0];g=d[1];j=d[2];for(var k=e[0]-d[0],m=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+m*m+d*d),k=k/e,m=m/e,d=d/e,e=[],n=0;n<this.C.length;n++){var r=this.C[n].o.Q,q=this.C[n].o.ha;this.C[n].o.Fh.Tf(f,g,j,k,m,d,r[0],r[1],r[2],q[0],q[1],q[2])&&e.push(this.C[n])}r=1.0E20;for(n=0;n<e.length;n++)if((q=e[n].o.Ed(f,g,j,k,m,d))&&q.w<r)c.hasvalue=i,c.lod=e[n].o.gb,r=q.w;c.hasvalue&&(c.x=
f+r*k,c.y=g+r*m,c.z=j+r*d,f=new R(0,0,0),f.Mc(c.x,c.y,c.z),c.lng=f.H[0],c.lat=f.H[1],c.elevation=f.H[2]);return c};
function Df(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++)for(b[d].xb=b[d].i;b[d].xb.length<c;)b[d].xb+="0";b.sort(function(a,b){return parseInt(a.xb,2)-parseInt(b.xb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Ae[0],a.Ae[1],a.Ae[2],1],e=[],d=0;d<b.length;d++)for(var f=2;0==b[d].o.r[f];)c.push(b[d].pa[0]+b[d].o.r[f-2]),c.push(b[d].pa[1]+b[d].o.r[f-1]),c.push(b[d].pa[2]+b[d].o.r[f]),c.push(a.Ae[0]),c.push(a.Ae[1]),c.push(a.Ae[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.ze.k();a.ze=new M(a.c);a.ze.Lc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.ze.ga()}
function Ef(a,b){for(var c=0,d=0;d<b.length;d++)b[d].i.length>c&&(c=b[d].i.length);for(d=0;d<b.length;d++){b[d].xb=b[d].i;b[d].xb=b[d].xb.replace(/2/g,"0");for(b[d].xb=b[d].xb.replace(/3/g,"1");b[d].xb.length<c;)b[d].xb+="0"}b.sort(function(a,b){return parseInt(b.xb,2)-parseInt(a.xb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Ke[0],a.Ke[1],a.Ke[2],1],e=[],d=0;d<b.length;d++)for(var f=b[d].o.r.length,f=f-1;0==b[d].o.r[f];)c.push(b[d].pa[0]+b[d].o.r[f-4]),c.push(b[d].pa[1]+b[d].o.r[f-
3]),c.push(b[d].pa[2]+b[d].o.r[f-2]),c.push(a.Ke[0]),c.push(a.Ke[1]),c.push(a.Ke[2]),c.push(1),f-=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Je.k();a.Je=new M(a.c);a.Je.Lc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},l,l);a.Je.ga()}
t.$g=function(){if(!this.mg)return NaN;var a=[],b=this.mg.a,c=new K;if(0==this.tb.length)return c=new R,c.Mc(b[0],b[1],b[2]),c.H[2];c.t(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.C.length;d++){var e=this.C[d].o.Q,f=this.C[d].o.ha;this.C[d].o.Fh.Tf(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.C[d])}e=1.0E20;f=o;for(d=0;d<a.length;d++){var g=a[d].o.Ed(b[0],b[1],b[2],c[0],c[1],c[2]);g&&g.w<e&&(f=i,e=g.w)}return f?(b=e*c[0],a=e*c[1],c=e*c[2],b=8388607*Math.sqrt(b*b+a*a+c*
c),0>e&&(b=-b),this.Rl=b):this.Rl};t.th=ba("dk");var tf=0,uf=1;function Ff(a){this.c=a;this.da=[]}
Ff.prototype.Wa=function(){for(var a=0;a<this.da.length;a++){var b=this.da[a],c=this.da[a],d=this.c.b;d.colorMask(o,o,o,o);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(o);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ga();d.stencilOp(d.KEEP,d.KEEP,d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ga();d.depthMask(i);d.colorMask(i,i,i,i);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,
0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(i);for(e=0;e<c.length;e++)c[e].ga();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ga();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST)}};Ff.prototype.Ck=function(a){this.da.push(a);return this.da.length-1};Ff.prototype.oh=function(a){this.da.splice(a,1)};function Gf(){this.name="ogGeometry";this.type=Ka;this.vb=[];this.sf=[];this.wa=-1;this.F=o;this.rd="";this.options=this.yc=this.kd=l;this.ue=-1;this.qm=this.wd=l}Gf.prototype=new F;t=Gf.prototype;t.ya=function(a){this.options=a;a.url&&Hf(this,a.url);a.jsonobject&&this.Lc(a.jsonobject);"EarthPolyline"==a.type&&(this.qm=W(Za,this,this.options),this.wa=If(this).$d(this.qm.Md))};t.Oa=function(){If(this).Wi(this.wa);if(this.wd!=l)G(this.wd);else{for(var a=0;a<this.vb.length;a++)G(this.vb[a]);this.Y=l}};
function If(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.Vh);return b}t.Dd=function(a,b,c,d,e,f){for(var g=0;g<this.vb.length;g++)this.vb[g].Dd(a,b,c,d,e,f)};t.cg=function(a,b,c,d){for(var e=0;e<this.vb.length;e++)this.vb[e].cg(a,b,c,d)};t.$=function(){if(this.wd!=l)this.wd.$();else for(var a=0;a<this.vb.length;a++)this.vb[a].$()};t.ba=function(){if(this.wd!=l)this.wd.ba();else for(var a=0;a<this.vb.length;a++)this.vb[a].ba()};
t.ge=function(a,b,c,d){if(this.wd==l)for(var e=0;e<this.vb.length;e++)this.vb[e].ge(a,b,c,d)};t.dj=function(){4==this.N.readyState&&(404==this.N.status?this.yc&&this.yc(this.id):this.Lc(Yc(this.N.responseText)))};
t.Lc=function(a){if("pointcloud"==a.Type)this.options=a,this.wd=W(Ya,this,this.options),a=If(this),this.wa=a.$d(this.wd.Gc);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=W(La,this,this.options);this.vb.push(c);this.sf.push(c.Me)}this.kd&&this.kd(this.id);a=If(this);this.wa=a.$d(this.sf)}};function Hf(a,b){b==l?alert("invalid json-url"):(a.rd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.rd,i),a.N.onreadystatechange=function(){a.dj()},a.N.send())};function Jf(a){this.c=a;this.Y=[];this.Nd=new Ce}
Jf.prototype.Wa=function(a,b){this.Nd.xh(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.Y.length;f++)if(this.Y[f]instanceof nd){var g=this.Y[f];g.F||g.ga()}else if(this.Y[f]instanceof Kf)g=this.Y[f],g.F||g.ga();else for(var g=this.Y[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var n=k[m];if(!n.F){var r=n.Q[0]-c,q=n.Q[1]-d,u=n.Q[2]-e,r=r*r+q*q+u*u,q=n.Tm*n.Tm;this.Nd.wh(n.Q[0],n.Q[1],n.Q[2],n.ha[0],n.ha[1],n.ha[2])&&!(r>q)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),n.ga(),this.c.b.disable(this.c.b.BLEND))}}};Jf.prototype.$d=function(a){this.Y.push(a);return this.Y.length-1};Jf.prototype.Wi=function(a){this.Y.splice(a,1)};
Jf.prototype.ee=function(a,b){for(var c=this.c.be(a,b,this.c.ja,i),d=1E4,e=l,f=0;f<this.Y.length;f++)for(var g=this.Y[f],j=0;j<g.length;j++)for(var k=g[j],m=0;m<k.length;m++){var n=k[m];if(!n.F){n.kl(c.x,c.y,c.n,c.md,c.nd,c.od);var r=n.Ed(c.x,c.y,c.n,c.md,c.nd,c.od);r&&r.w<d&&(d=r.w,e=n)}}return e?e.Un:-1};function Lf(){this.Qa=l;this.qb=new K;this.lk=this.lj=this.Hh=this.Vh=this.gi=l;this.nj=i;this.g=l;this.ik=0;this.Zc=p();this.$c=function(){if(this.nj){var a=this.g;this.c.fe.push(a);a.fg();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}this.Qa.Wa(this.qb,this.c.ja);this.lk.Wa(this.qb,this.c.ja);this.gi.Wa(this.qb,this.c.ja);this.Vh.Wa(this.qb,this.c.ja);this.Hh.Wa(this.qb,this.c.ja);this.lj.Wa(this.qb,
this.c.ja);if(this.nj){ze(this.c);var a=this.g.width/(this.g.width+10),b=this.g.height/(this.g.height+10);0==this.ik?(this.g.B(10,10,0,0,a,b,i,i,1),this.g.B(0,0,0,0,1,1,i,i,1)):1==this.ik?(this.g.B(10,this.g.height/2+5,0,0,a,b/2,i,i,1),this.g.B(0,this.g.height/2,0,0,1,0.5,i,i,1)):2==this.ik&&(this.g.B(10,5,0,0,a,b/2,i,i,1),this.g.B(0,0,0,0,1,0.5,i,i,1))}};this.ad=function(a){a=a.ce();this.qb.t(a.x,a.y,a.n)};this.Te=function(){this.Qa=new Af(this.c);this.lk=new Ff(this.c);this.gi=new Be(this.c);this.Vh=
new Jf(this.c);this.Hh=new De(this.c);this.lj=new Ae(this.c)};this.Se=function(){this.Qa.k();this.Qa=l};this.Lk=function(a,b){this.nj&&(this.g==l?this.g=new O(this.c,i,a,b,i):ld(this.g,a,b,i))};this.Ue=p()}Lf.prototype=new de;function Mf(a){this.Fn=a;this.Tl=S(this.Fn,Ab?"DOMMouseScroll":"mousewheel",this)}ya(Mf,fe);var Nf="mousewheel";
Mf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.pd;if("mousewheel"==a.type){c=1;if(zb||Bb&&(Eb||Nb("532.0")))c=40;d=Bb&&ub&&0!=-a.wheelDelta%c?-a.wheelDelta:-a.wheelDelta/c;x(a.wheelDeltaX)?(b=Bb&&ub&&0!=-a.wheelDeltaX%c?-a.wheelDeltaX:-a.wheelDeltaX/c,c=Bb&&ub&&0!=-a.wheelDeltaY%c?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,100<d?d=3:-100>d&&(d=-3),x(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;"number"==typeof this.Wl&&Math.min(Math.max(b,-this.Wl),this.Wl);"number"==typeof this.Xl&&
(c=Math.min(Math.max(c,-this.Xl),this.Xl));b=new Of(d,a,0,c);try{this.dispatchEvent(b)}finally{b.qe()}};Mf.prototype.Pc=function(){Mf.Le.Pc.call(this);Qd(this.Tl);delete this.Tl};function Of(a,b,c,d){b&&this.Rc(b,h);this.type=Nf;this.detail=a;this.Ph=d}ya(Of,Dd);function Pf(){this.hb=new L;this.ig=new K;this.ig.t(1,0,0);this.W=0;this.U=-0.03;this.wc=0;this.T=7.616;this.S=45.9088;this.A=17E3;this.bf=this.af=this.Ch=this.Dh=0;this.ej=this.hg=this.ol=this.nl=this.ed=1;this.bc=this.cc=0;this.ie=o;this.pb=this.ob=0;this.cf=new K;this.kj=this.jj=0;this.zh=this.he=o;this.fa=Array(3);this.Ce=new R(0,0,0);this.rf=new L;this.Dg=new L;this.Bg=new L;this.we=new L;this.hb=new L;this.td=new L;this.Cg=new L;this.we.ah();this.Uc=100;this.yb=l;this.Ni=ba("zh");this.Zc=function(){this.c.Zi(this.hb)};
this.$c=p();this.ad=function(a){a.Vc=0;this.Ce.t(this.T,this.S,this.A);this.Ce.la(this.fa);this.ig.t(this.fa[0],this.fa[1],this.fa[2]);this.Dg.dd(this.fa[0],this.fa[1],this.fa[2]);this.Bg.ae(this.T,this.S);this.rf.Di(this.W,this.U,this.wc);this.td.aa(this.Dg,this.Bg);this.Cg.aa(this.td,this.rf);this.td.aa(this.Cg,this.we);this.hb.Qe(this.td);a.zl=this.W;a.ta(this.fa[0],this.fa[1],this.fa[2]);var b=this.S,c=this.A;a.fc.longitude=this.T;a.fc.latitude=b;a.fc.elevation=c;this.yb&&(this.yb.Tc=this.T,this.yb.Sc=
this.S,this.yb.Qc=this.A,this.yb.pitch=57.29577951308232*this.U,this.yb.La=57.29577951308232*this.W,this.yb.nc=57.29577951308232*this.wc)};this.Te=p();this.Se=p();this.Ue=function(a){S(window,xd,this.Pi,o,this);S(window,yd,this.Qi,o,this);S(a,ud,this.Vf,o,this);S(a,vd,this.Xf,o,this);S(a,wd,this.Wf,o,this);a=new Mf(a);S(a,Nf,this.Si,o,this)};this.Si=function(a){0<a.Ph?0<this.bc?this.cc=this.bc=0:this.cc+=0.05:0<this.cc?this.bc=this.cc=0:this.bc+=0.05};this.Pi=function(a){81==a.keyCode?this.bf=this.ed*
this.ej:65==a.keyCode?this.bf=-this.ed*this.ej:83==a.keyCode?this.af=0.5*this.hg:88==a.keyCode&&(this.af=-0.5*this.hg)};this.Qi=function(a){81==a.keyCode?this.bf=0:65==a.keyCode?this.bf=0:83==a.keyCode?this.af=0:88==a.keyCode&&(this.af=0)};this.Vf=function(a){Id(a,Ed)&&(this.cf.t(0,0,0),this.jj=a.offsetX,this.kj=a.offsetY,this.he=i);this.ob=a.offsetX;this.pb=a.offsetY;if(Id(a,Fd))return o};this.Xf=function(a){Id(a,Ed)&&(this.he=o);this.ob=a.offsetX;this.pb=a.offsetY;this.Dh=this.Ch=0;if(Id(a,Fd))return o};
this.Wf=function(a){this.ob=a.offsetX;this.pb=a.offsetY;if(this.he){var b=(this.jj-a.offsetX)/this.c.width,c=(this.kj-a.offsetY)/this.c.height,b=b*b,c=c*c;this.cf.t(a.offsetX-this.jj,this.c.height-1-a.offsetY-(this.c.height-1-this.kj),0);this.cf.tc();var a=this.cf.a[0],d=this.cf.a[1],e=0,f=0;0<a?e=1:0>a&&(e=-1);0<d?f=1:0>d&&(f=-1);this.Ch=this.ed*this.nl*c*f;this.Dh=this.ol*b*e}};this.Ve=function(a){var b=this.af*a/500,c=this.Dh*a/500,d=this.bf*a,e=0,e=0,f=this.A/5E5*(this.A/5E5);10<f?f=10:0.0010>
f&&(f=0.0010);var g=f*this.Ch*a/250;if(0<this.cc){var j=0.5*this.hg*a/1E3;this.U+=j;this.cc-=j;0>this.cc&&(this.U+=this.cc,this.cc=0);this.ie=i}0<this.bc&&(j=0.5*this.hg*a/1E3,this.U-=j,this.bc-=j,0>this.bc&&(this.U-=this.bc,this.bc=0),this.ie=i);b&&(this.U+=b,this.ie=i);c&&(this.W+=c,this.W>2*Math.PI&&(this.W-=2*Math.PI),0>this.W&&(this.W=2*Math.PI-this.W),this.ie=i);this.ie&&(e=this.c.$g(),isNaN(e)&&(e=this.Uc));d&&(a=1E3*d*f,this.A+=a,e+=a,7E6<this.A&&(this.A=7E6));if(g){a=0.017453292519943295*
this.S;d=Math.sin(a);f=Math.cos(a);c=this.W;b=0.017453292519943295*this.T;d=Ec/Math.sqrt(1-Fc*d*d);f=Ec/(d/(1+Gc*f*f))*g*Math.cos(c);j=Ec/d*g*Math.sin(c)/Math.cos(a);g=Ec/d*g*Math.sin(c)*Math.tan(a)+c;this.T=57.29577951308232*(j+b);this.S=57.29577951308232*(f+a);for(this.W=g;180<this.T;)this.T-=360;for(;-180>this.T;)this.T+=360;for(;90<this.S;)this.S=180-this.S;for(;-90>this.S;)this.S=-180-this.S;this.ie=i}e<this.Uc&&this.ie&&(this.A+=this.Uc-e);this.yb&&(this.yb.Tc=this.T,this.yb.Sc=this.S,this.yb.Qc=
this.A,this.yb.pitch=57.29577951308232*this.U,this.yb.La=57.29577951308232*this.W,this.yb.nc=57.29577951308232*this.wc)}}Pf.prototype=new de;t=Pf.prototype;t.ta=function(a,b,c){this.T=a;this.S=b;this.A=c};t.ce=function(){return{longitude:this.T,latitude:this.S,elevation:this.A}};t.We=function(a,b,c){this.W=a;this.U=b;this.wc=c};t.rh=p();t.Sf=function(){return{La:this.W,pitch:this.U,nc:this.wc}};function Qf(){this.hb=new L;this.zh=this.Gd=o;this.ig=new K;this.ig.t(1,0,0);this.W=0;this.U=-1.5707963267948966;this.wc=0;this.T=7.77442050946391;this.S=47.472720418012834;this.A=75E5;this.Hd=Rf;this.bf=this.af=this.Ch=this.Dh=this.hj=this.ij=this.gj=this.fj=this.v=0;this.ej=this.hg=this.ol=this.nl=this.ed=1;this.bc=this.cc=0;new L;this.pb=this.ob=0;this.cf=new K;this.cj=this.Ah=this.he=o;this.fa=Array(3);this.Ce=new R(0,0,0);this.rf=new L;this.Dg=new L;this.Bg=new L;this.we=new L;this.hb=new L;
this.td=new L;this.Cg=new L;this.we.ah();this.Bh=o;this.sl=this.rl=this.ql=0;this.pl=1;this.$e=o;this.nb={};this.mb={};this.bj=new L;this.ml=new L;this.yh=new L;new L;new L;this.Uc=50;this.ci=1E7;this.cb=Pc;this.Ea=0;this.ff=o;this.zc=[0,0];this.ld=0;this.Gh=this.Oc=o;this.Ni=function(a){a||(this.Gd=o);this.zh=a};this.Zc=function(){this.c.Zi(this.hb)};this.$c=p();this.ad=function(a){2E3>this.A?(this.c.f.Pb.Wj=1.0E-7,this.c.f.Pb.Aj=1.2):(this.c.f.Pb.Wj=1.0E-5,this.c.f.Pb.Aj=10);this.cb=a.cb;this.Ea=
a.Ea;a.ff=this.ff;a.zc[0]=this.zc[0];a.zc[1]=this.zc[1];a.Vc=1;this.Gd=this.zh?i:0!=a.mm?i:o;if(this.Hd==Sf&&!this.Gd&&!this.c.Pa.Rd&&(this.Ah&&(this.Ah=o,this.vn(this.ob,this.pb)),this.he&&this.cj))this.cj=o,this.un(this.ob,this.pb);this.Ce.t(this.T,this.S,this.A);this.Ce.la(this.fa);this.ig.t(this.fa[0],this.fa[1],this.fa[2]);this.Dg.dd(this.fa[0],this.fa[1],this.fa[2]);this.Bg.ae(this.T,this.S);this.Bh?(this.rf.bh(this.ql,this.rl,this.sl,this.pl),this.we.Ek()):this.rf.Di(this.W,this.U,this.wc);
this.td.aa(this.Dg,this.Bg);this.Cg.aa(this.td,this.rf);this.td.aa(this.Cg,this.we);this.hb.Qe(this.td);a.zl=this.W;a.ta(this.fa[0],this.fa[1],this.fa[2]);var b=this.S,c=this.A;a.fc.longitude=this.T;a.fc.latitude=b;a.fc.elevation=c};this.Te=p();this.Se=p();this.Ue=function(a){S(window,xd,this.Pi,o,this);S(window,yd,this.Qi,o,this);S(a,ud,this.Vf,o,this);S(a,wd,this.Wf,o,this);S(a,vd,this.Xf,o,this);S(a,td,this.Ri,o,this);a=new Mf(a);S(a,Nf,this.Si,o,this)};this.gg=function(){var a=Rf;(this.v&Tf)==
Uf&&(0==(this.v&Vf)?a=Sf:(this.v&Vf)==Wf?a=Xf:(this.v&Vf)==Yf&&(a=Zf));(this.v&Tf)==$f&&(a=Zf);if(a!=this.Hd&&(this.Hd==Zf&&(this.W=this.ij+45*Math.PI*this.ed*(this.ob-this.fj)/(180*this.c.height),this.U=this.hj+45*Math.PI*this.ed*(this.gj-this.pb)/(180*this.c.height)),this.Hd=a,this.Hd==Zf))this.fj=this.ob,this.gj=this.pb,this.ij=this.W,this.hj=this.U;this.Hd==Zf&&(this.W=this.ij+45*Math.PI*this.ed*(this.ob-this.fj)/(180*this.c.height),this.U=this.hj+45*Math.PI*this.ed*(this.gj-this.pb)/(180*this.c.height))};
this.Si=function(a){if(this.Gd||this.c.Pa.Rd)this.ld=0;else{if(this.Hd==Rf)if(0==(this.v&Vf)){var b={},c,d;0<this.ld?(c=this.zc[0],d=this.zc[1]):(c=this.ob,d=this.pb);this.c.de(c,d,b);if(b.hit){this.zc=[c,d];this.ld=500;this.Ce.t(this.T,this.S,this.A);this.Ce.la(this.fa);c=this.fa[0]-b.x;d=this.fa[1]-b.y;b=this.fa[2]-b.z;0<a.Ph?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new R(0,0,0);e.Mc(this.fa[0]+c,this.fa[1]+d,this.fa[2]+b);this.T=e.H[0];this.S=e.H[1];this.Gh?e.H[2]>this.A&&(this.A=
e.H[2]):this.A=e.H[2];this.Oc=i;this.A<this.Uc?(this.A=this.Uc,this.Oc=i):this.A>this.ci&&(this.A=this.ci,this.Oc=i)}}else(this.v&Vf)==Wf&&(this.U+=5*a.Ph*Math.PI*this.ed/180);return this.Ya(a)}};this.Pi=function(a){if(!this.Gd&&!this.c.Pa.Rd){66==a.keyCode&&(this.Bh=o);if(16==a.keyCode)return this.v|=Wf,this.Ya(a);if(17==a.keyCode)return this.v|=Yf,this.Ya(a);if(37==a.keyCode||65==a.keyCode)return this.v|=ag,this.Ya(a);if(38==a.keyCode||87==a.keyCode)return this.v|=bg,this.Ya(a);if(39==a.keyCode||
68==a.keyCode)return this.v|=cg,this.Ya(a);if(40==a.keyCode||83==a.keyCode)return this.v|=dg,this.Ya(a);this.gg();return i}};this.Qi=function(a){if(16==a.keyCode)return this.v&=~Wf,this.Ya(a);if(17==a.keyCode)return this.v&=~Yf,this.Ya(a);if(37==a.keyCode||65==a.keyCode)return this.v&=~ag,this.Ya(a);if(38==a.keyCode||87==a.keyCode)return this.v&=~bg,this.Ya(a);if(39==a.keyCode||68==a.keyCode)return this.v&=~cg,this.Ya(a);if(40==a.keyCode||83==a.keyCode)return this.v&=~dg,this.Ya(a);this.gg();return i};
this.Ri=function(a){if(!this.Gd&&!this.c.Pa.Rd){var b={};this.c.de(this.ob,this.pb,b);if(b.hit){this.c.qh(2E3);var c=this.A;1E6<c?ue(this.c.Pa,b.lng,b.lat,1E6,h,h,h):25E4<c?ue(this.c.Pa,b.lng,b.lat,25E4,h,h,h):5E4<c?ue(this.c.Pa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,ue(this.c.Pa,b.lng,b.lat,c,0,-90,0));this.zc=[this.ob,this.pb];this.ld=2500}return this.Ya(a)}};this.Vf=function(a){if(!this.Gd&&!this.c.Pa.Rd){this.ob=a.offsetX-this.c.X.offsetLeft;this.pb=a.offsetY-this.c.X.offsetTop;if(Id(a,Ed))this.v|=
Uf,document.body.style.cursor="move",this.Ah=i;else{if(Id(a,Fd))return o;Id(a,Gd)&&(this.v|=$f)}this.gg();return this.Ya(a)}};this.Xf=function(a){this.he=i;this.ob=a.offsetX-this.c.X.offsetLeft;this.pb=a.offsetY-this.c.X.offsetTop;if(Id(a,Ed))this.v&=~Uf,this.$e=o,document.body.style.cursor="default",this.Ah=o;else{if(Id(a,Fd))return o;Id(a,Gd)&&(this.v&=~$f)}this.gg();return this.Ya(a)};this.Wf=function(a){if(!this.Gd&&!this.c.Pa.Rd)return this.he=this.Hd==Sf,this.cj=i,this.ob=a.offsetX-this.c.X.offsetLeft,
this.pb=a.offsetY-this.c.X.offsetTop,this.gg(),this.Ya(a)};this.Ve=function(a){if(this.cb==Qc){var b=this.Ea*this.A/5E3;this.Gh||(this.A-=a*b);this.A<this.Uc&&(this.A=this.Uc);this.Oc=i}else this.cb==Rc?(b=this.Ea*this.A/5E3,this.A+=a*b,this.A>this.ci&&(this.A=this.ci),this.Oc=i):this.cb==Tc?this.W=this.Ea:this.cb==Uc&&(b=Math.sin(this.Ea),this.U+=a/5E3*-Math.cos(this.Ea),this.W+=a/5E3*b,this.U<-Math.PI/2?this.U=-Math.PI/2:0<this.U&&(this.U=0));0<this.ld&&(this.ff=i,this.ld-=a,0>=this.ld&&(this.ld=
0,this.ff=o));if((this.v&eg||this.cb==Sc)&&0==(this.v&Vf)){b=0;this.v&bg&&(b+=1);this.v&dg&&(b-=1);var c=0;this.v&ag&&(c-=1);this.v&cg&&(c+=1);var d;d=this.cb==Sc?Math.PI*this.Ea/180:Math.atan2(c,b);b=this.A/5E5;10<b?b=10:0.0010>b&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.S/180,e=Math.sin(b),c=Math.cos(b),f=this.W+d;d=Math.PI*this.T/180;var g=Ec/Math.sqrt(1-Fc*e*e),e=Ec/g*a*Math.sin(f)/Math.cos(b),a=Ec/(g/(1+Gc*c*c))*a*Math.cos(f)+b;this.T=180*(e+d)/Math.PI;this.S=180*a/Math.PI}for(;180<this.T;)this.T-=
180;for(;-180>this.T;)this.T+=180;for(;90<this.S;)this.S-=180;for(;-90>this.S;)this.S+=180;this.Oc&&(this.Oc=o,a=this.c.dh(this.T,this.S),a.hasvalue?(this.A-this.Uc<a.elevation&&(this.A=a.elevation+this.Uc,this.Oc=i),this.Gh=o):5E3>this.A&&(this.Oc=this.Gh=i))};this.We=function(a,b,c){this.Bh=o;this.we.ah();this.W=a;this.U=b;this.wc=c};this.rh=function(a,b,c,d){this.Bh=i;this.ql=a;this.rl=b;this.sl=c;this.pl=d;var e=a,a=b,b=e,e=a*b+c*d;if(0.499<e)this.W=2*Math.atan2(a,d),this.U=Math.PI/2,this.wc=
0;else if(-0.499>e)this.W=-2*Math.atan2(a,d),this.U=-Math.PI/2,this.wc=0;else{var f=c*c;this.W=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.U=Math.asin(2*e);this.wc=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.vn=function(a,b){this.bj.ea(this.yh);var c={};this.c.mh(a,b,c,i);c.hit?(this.nb.x=c.x,this.nb.y=c.y,this.nb.n=c.z,this.$e=i):this.$e=o};this.un=function(a,b){if(this.$e){var c={};this.c.mh(a,b,c,o);if(c.hit)if(this.mb.x=c.x,this.mb.y=c.y,this.mb.n=c.z,this.$e=i,this.mb.x==this.nb.x&&this.mb.y==this.nb.y&&
this.mb.n==this.nb.n)this.yh.ea(this.bj);else{var d=this.nb.x*this.mb.x+this.nb.y*this.mb.y+this.nb.n*this.mb.n,c=Math.sqrt(0.5*(1-d)),d=Math.sqrt(0.5*(1+d)),e,f,g;e=this.nb.y*this.mb.n-this.nb.n*this.mb.y;f=this.mb.x*this.nb.n-this.nb.x*this.mb.n;g=this.nb.x*this.mb.y-this.nb.y*this.mb.x;c/=Math.sqrt(e*e+f*f+g*g);this.ml.bh(e*c,f*c,g*c,d);this.yh.aa(this.bj,this.ml);c=[];(new R(this.T,this.S,this.A)).la(c);c=this.yh.Ma(new K(c[0],c[1],c[2]));d=new R(0,0,0);d.Mc(c.a[0],c.a[1],c.a[2]);this.T=d.H[0];
this.S=d.H[1];this.Oc=i}else this.$e=o}};this.Ya=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=i;a.cancel=i;return a.returnValue=o}}ya(Qf,Pf);var Uf=1,$f=4,Tf=7,ag=16,bg=32,cg=64,dg=128,eg=240,Wf=256,Yf=512,Vf=768,Rf=0,Sf=1,Zf=2,Xf=3;function fg(){this.Cc=new L;this.Wj=1.0E-5;this.Aj=10;this.Ln=45;this.Zc=function(){this.c.gl(this.Cc)};this.$c=p();this.ad=function(a){this.Cc.Uk(this.Ln,this.c.width/this.c.height,this.Wj,this.Aj);a.Re[a.Re.length-1].ea(this.Cc)};this.Te=p();this.Se=p();this.Ue=p()}fg.prototype=new de;function gg(a){this.c=a;this.navigation=new Qf;this.navigation.c=a;ee(this.navigation);this.Hb=this.navigation;this.Pb=new fg;this.G=new Lf;this.vd=new ge;this.Pb.c=a;ee(this.Pb);this.G.c=a;ee(this.G);this.vd.c=a;ee(this.vd);this.Xc=new Oc;this.Gb=new L;this.hb=new L;this.Pn=new L}gg.prototype.Wa=function(){this.Hb.Zc();this.Hb.$c();this.Pb.Zc();this.Pb.$c();this.G.Zc();this.G.$c();this.vd.Zc();this.vd.$c()};
gg.prototype.k=function(){this.Hb&&(this.Hb.Ad(),this.Hb=l);this.Pb&&(this.Pb.Ad(),this.Pb=l);this.G&&(this.G.Ad(),this.G=l);this.vd&&(this.vd.Ad(),this.vd=l)};function hg(a){this.b=a;this.Rc=o;this.Jj=this.xk=this.Ub=this.Hj=this.vk=this.lc=this.Gj=this.uk=this.kc=this.Bj=this.pk=this.ic=this.Ej=this.sk=this.Sb=this.Ij=this.wk=this.Tb=this.Dj=this.rk=this.jc=this.Fj=this.tk=this.zb=this.Cj=this.qk=this.Hc=l}function fd(a,b,c){a.Hc&&(a.b.useProgram(a.Hc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Hc,"matMVP"),o,b.Ca()),a.b.uniform4fv(a.b.getUniformLocation(a.Hc,"uColor"),c.Ca()))}
function gd(a,b,c){a.jc&&(a.b.useProgram(a.jc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.jc,"matMVP"),o,b.Ca()),a.b.uniform4fv(a.b.getUniformLocation(a.jc,"uColor"),c.Ca()))}
function ig(a){a.Rc=i;a.qk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.Cj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");a.qk&&a.Cj&&(a.Hc=a.b.createProgram(),a.b.attachShader(a.Hc,a.qk),a.b.attachShader(a.Hc,a.Cj),a.b.bindAttribLocation(a.Hc,0,"aPosition"),a.b.linkProgram(a.Hc),a.b.getProgramParameter(a.Hc,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.Hc)));a.tk=jg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Fj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");a.tk&&a.Fj&&(a.zb=a.b.createProgram(),a.b.attachShader(a.zb,a.tk),a.b.attachShader(a.zb,a.Fj),a.b.bindAttribLocation(a.zb,0,"aPosition"),
a.b.bindAttribLocation(a.zb,1,"aNormal"),a.b.bindAttribLocation(a.zb,2,"aTexCoord"),a.b.linkProgram(a.zb),a.b.getProgramParameter(a.zb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.zb)));a.rk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Dj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
a.rk&&a.Dj&&(a.jc=a.b.createProgram(),a.b.attachShader(a.jc,a.rk),a.b.attachShader(a.jc,a.Dj),a.b.bindAttribLocation(a.jc,0,"aPosition"),a.b.bindAttribLocation(a.jc,1,"aColor"),a.b.linkProgram(a.jc),a.b.getProgramParameter(a.jc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.jc)));a.wk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Ij=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");a.wk&&a.Ij&&(a.Tb=a.b.createProgram(),a.b.attachShader(a.Tb,a.wk),a.b.attachShader(a.Tb,a.Ij),a.b.bindAttribLocation(a.Tb,0,"aPosition"),a.b.bindAttribLocation(a.Tb,1,"aTexCoord"),a.b.linkProgram(a.Tb),a.b.getProgramParameter(a.Tb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Tb)));
a.sk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Ej=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
a.sk&&a.Ej&&(a.Sb=a.b.createProgram(),a.b.attachShader(a.Sb,a.sk),a.b.attachShader(a.Sb,a.Ej),a.b.bindAttribLocation(a.Sb,0,"aPosition"),a.b.bindAttribLocation(a.Sb,1,"aNormal"),a.b.bindAttribLocation(a.Sb,2,"aTexCoord"),a.b.bindAttribLocation(a.Sb,3,"aColor"),a.b.linkProgram(a.Sb),a.b.getProgramParameter(a.Sb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Sb)));a.pk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Bj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");a.pk&&a.Bj&&(a.ic=a.b.createProgram(),a.b.attachShader(a.ic,a.pk),a.b.attachShader(a.ic,a.Bj),a.b.bindAttribLocation(a.ic,0,"aPosition"),a.b.bindAttribLocation(a.ic,1,"aTexCoord"),a.b.linkProgram(a.ic),a.b.getProgramParameter(a.ic,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.ic)));a.uk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Gj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
a.uk&&a.Gj&&(a.kc=a.b.createProgram(),a.b.attachShader(a.kc,a.uk),a.b.attachShader(a.kc,a.Gj),a.b.bindAttribLocation(a.kc,0,"aPosition"),a.b.bindAttribLocation(a.kc,1,"aTexCoord"),a.b.linkProgram(a.kc),a.b.getProgramParameter(a.kc,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.kc)));a.vk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Hj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");a.vk&&a.Hj&&(a.lc=a.b.createProgram(),a.b.attachShader(a.lc,a.vk),a.b.attachShader(a.lc,a.Hj),a.b.bindAttribLocation(a.lc,0,"aPosition"),a.b.bindAttribLocation(a.lc,1,"aColor"),a.b.linkProgram(a.lc),a.b.getProgramParameter(a.lc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.lc)));a.xk=jg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Jj=jg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
a.xk&&a.Jj&&(a.Ub=a.b.createProgram(),a.b.attachShader(a.Ub,a.xk),a.b.attachShader(a.Ub,a.Jj),a.b.bindAttribLocation(a.Ub,0,"aPosition"),a.b.bindAttribLocation(a.Ub,1,"aTexCoord"),a.b.linkProgram(a.Ub),a.b.getProgramParameter(a.Ub,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Ub)))}
function jg(a,b,c){var d=a.b.createShader(b);if(!d)return l;a.b.shaderSource(d,c);a.b.compileShader(d);return!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)?(b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),l):d};function kg(a){this.c=a;this.wi=[];this.Db=[]}A("TextureManager",kg);kg.prototype.Ik=function(a,b,c,d){var e=this.wi[a];e?(this.Db[a]+=1,b(e)):(e=new O(this.c),Q(e,a,b,c,d),this.Db[a]=1,this.wi[a]=e);return e};kg.prototype.CreateTexture=kg.prototype.Ik;kg.prototype.Kk=function(a){this.Db[a]-=1;0==this.Db[a]&&(this.wi[a].k(),delete this.wi[a],delete this.Db[a])};kg.prototype.DestroyTexture=kg.prototype.Kk;var lg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function mg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Uh=new M(this.c);for(var a=[],d=[],e=0;16>e;e++)for(var f=0;16>f;f++){var b=0.0625*e,g=0.0625*f;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=4*c;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Uh;0==a.length%5&&(c.r=new Float32Array(a),c.mode="font",c.M=5);ed(this.Uh,d,"TRIANGLES");a=new O(this.c);Q(a,kd+"font.png");this.Uh.ac(a);new L}
mg.prototype.zd=function(a,b,c,d,e){d==l&&(d=1);this.c.uc();this.c.Yi();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new L,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=lg[g]/2*d,f.Bd(d,d,1),f.Tk(f,b+j,c,0),this.c.vc(f),this.Uh.ga(i,6,12*g,e),j+=lg[g]/2*d;this.c.bd();this.c.b.disable(this.c.b.BLEND)};mg.prototype.Nk=function(a){for(var b=0,c=0;c<a.length;c++)b+=lg[a.charCodeAt(c)];return b};
mg.prototype.hn=s(32);A("Font",mg);mg.prototype.DrawText=mg.prototype.zd;mg.prototype.GetStringHeight=mg.prototype.hn;mg.prototype.GetStringWidth=mg.prototype.Nk;function ng(a){this.c=a;this.b=a.b;this.Be=o;this.mk=this.Rb=this.q=l;this.p=this.m=0}
ng.prototype.Pf=function(a,b){this.Ne=document.createElement("canvas");this.K=this.Ne.getContext("2d");this.Fa=new O(this.c);this.Fa.g=this.b.createTexture();this.text=a;this.K.save();this.K.font=b.fontString;this.K.textAlign="left";this.K.textBaseline="top";this.K.lineWidth=b.lineWidth;this.K.strokeStyle=b.strokeStyle;var c=this.K.measureText(this.text),c=Math.round(c.width);this.K.restore();this.m=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.p=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.pc=Ic(this.m);this.oc=Ic(this.p);this.Fa.width=this.pc;this.Fa.height=this.oc;this.K.canvas.width=this.pc;this.K.canvas.height=this.oc;this.K.fillStyle=b.backgroundColor;this.K.fillRect(0,0,this.m,this.p);this.K.shadowOffsetX=b.shadowOffsetX;this.K.shadowOffsetY=b.shadowOffsetY;this.K.shadowBlur=b.shadowBlur;this.K.shadowColor=b.shadowColor;this.K.fillStyle=b.fontColor;this.K.font=b.fontString;this.K.textAlign=
"left";this.K.textBaseline="middle";this.K.lineWidth=b.lineWidth;this.K.strokeStyle=b.strokeStyle;this.K.strokeText(a,b.lineWidth,this.p/2);this.K.fillText(a,b.lineWidth,this.p/2);this.eg();this.q=new M(this.c);this.q.ac(this.Fa);c=[];c.push(-this.m/2,this.p/2,0,0,0);c.push(-this.m/2,-this.p/2,0,0,1/this.oc*this.p);c.push(this.m/2,-this.p/2,0,1/this.pc*this.m,1/this.oc*this.p);c.push(this.m/2,this.p/2,0,1/this.pc*this.m,0);dd(this.q,c);ed(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.m=this.m;this.q.p=
this.p;return this.q};
ng.prototype.Nf=function(a,b){this.Ne=document.createElement("canvas");this.K=this.Ne.getContext("2d");this.Fa=new O(this.c);this.Fa.g=this.b.createTexture();og(this,a,b);this.q=new M(this.c);this.q.ac(this.Fa);var c=[];c.push(-this.m/2,this.p/2,0,0,0);c.push(-this.m/2,-this.p/2,0,0,1/this.oc*this.p);c.push(this.m/2,-this.p/2,0,1/this.pc*this.m,1/this.oc*this.p);c.push(this.m/2,this.p/2,0,1/this.pc*this.m,0);dd(this.q,c);ed(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.Q=[-this.m/2,-this.p/2,0];this.q.ha=
[this.m/2,this.p/2,0];this.q.m=this.m;this.q.p=this.p;return this.q};
function og(a,b,c){a.m=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.p=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.pc=Ic(a.m);a.oc=Ic(a.p);a.Fa.width=a.pc;a.Fa.height=a.oc;a.K.canvas.width=a.pc;a.K.canvas.height=a.oc;a.K.fillStyle=c.backgroundColor;a.K.fillRect(0,0,a.m,a.p);a.K.shadowOffsetX=c.shadowOffsetX;a.K.shadowOffsetY=c.shadowOffsetY;a.K.shadowBlur=c.shadowBlur;a.K.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.K.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.eg()};d.src=b}
ng.prototype.eg=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Fa.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Ne);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.Fa.Cb=i};ng.prototype.k=function(){this.q&&(this.q.k(),this.q=l);this.Rb&&(this.Rb.k(),this.Rb=l);this.mk&&(this.mk.k(),this.mk=l);this.Fa&&(this.Fa.k(),this.Fa=l);this.Ne&&(document.removeChild(this.Ne),this.Ne=l)};function pg(a){this.c=a;this.b=a.b;this.Qc=this.Tc=this.Sc=0;this.Be=o;this.Ba=this.va=this.Rb=l;this.scale=20;this.text=this.of="";this.ng=new ng(a);this.Ig=this.Lg=0;this.tm=this.um=1;this.sm=0;this.rm=1;this.ok=0;this.nk=Infinity;this.$j=new Xc(1,1,1,1);this.Yh={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Qg={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",fontColor:"rgba(255,255,255,1.0)",
lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}t=pg.prototype;t.pn=function(a,b,c,d){this.of=c?c:"";b&&(this.Qg=b);this.text=a;d&&(this.Yh=d);c&&(this.va=this.ng.Nf(this.of,this.Yh));this.ng=new ng(this.c);a&&(this.Ba=this.ng.Pf(a,this.Qg))};
t.ta=function(a,b,c,d){this.va&&this.Ba?(this.Lg=this.va.m+this.Ba.m,this.Ig=this.va.p):this.va?(this.Lg=this.va.m,this.Ig=this.va.p):this.Ba&&(this.Lg=this.Ba.m,this.Ig=this.Ba.p);this.va&&this.va.bg(a,b,c,1.1920930376163766E-7*-(this.va.m/2+(this.Lg/2-this.va.m))*this.scale,1.1920930376163766E-7*(this.Ig/2)*this.scale,0);this.Ba&&this.Ba.bg(a,b,c,1.1920930376163766E-7*(this.Ba.m/2+(this.Lg/2-this.Ba.m))*this.scale,1.1920930376163766E-7*(this.Ig/2)*this.scale,0);this.De=a;this.Ee=b;this.Fe=c;if(d!=
l){this.Be=i;var d=this.ng,e=this.um,f=this.tm,g=this.sm,j=this.rm;d.Rb=new M(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);ad(d.Rb,k);ed(d.Rb,[0,1],"LINES");this.Rb=d.Rb}};
t.ga=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Be&&this.Rb.ga();this.va&&jd(this.va);this.Ba&&jd(this.Ba);this.c.uc();var a=new L;a.Bd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.vc(a);this.va&&this.va.ga(o,0,0,l,this.$j);this.Ba&&this.Ba.ga(o,0,0,l,this.$j);this.c.bd();this.c.b.disable(this.c.b.BLEND)};
t.uh=function(a){this.scale=a;this.Be?this.ta(this.De,this.Ee,this.Fe,0):this.ta(this.De,this.Ee,this.Fe,l)};t.Yf=function(a,b){var c=o,d=o;if(this.va)var e=this.c.be(a,b,this.c.ja,i),c=this.va.Ed(e.x,e.y,e.n,e.md,e.nd,e.od);this.Ba&&(e=this.c.be(a,b,this.c.ja,i),d=this.Ba.Ed(e.x,e.y,e.n,e.md,e.nd,e.od));return c||d};t.k=function(){this.ng=l;this.Qc=this.Tc=this.Sc=0;this.va&&this.va.k();this.Ba&&this.Ba.k();this.Rb&&this.Rb.k();this.Be=o;this.Rb=l;this.scale=0};A("Poi",pg);pg.prototype.Draw=pg.prototype.ga;
pg.prototype.SetContent=pg.prototype.pn;pg.prototype.SetPosition=pg.prototype.ta;pg.prototype.SetSize=pg.prototype.uh;pg.prototype.Destroy=pg.prototype.k;function qg(a){this.c=a;this.Jg=[];this.Db=[];this.df=l;this.Kg=[];this.He=[]}t=qg.prototype;t.Hk=function(a,b,c,d){var e=new pg(this.c);b&&(e.Qg=b);e.text=a;d&&(e.Yh=d);c&&(e.of=c,e.va=this.Nf(c,e.Yh));a&&(e.Ba=this.Pf(a,e.Qg));return e};t.Jk=function(a){a.va&&rg(this,a.of);a.Ba&&sg(this,a.text,a.Qg)};t.Nf=function(a,b){var c=this.Jg[a];if(c){this.Db[a]+=1;var d=new M(this.c);d.ea(c);d.m=c.m;d.p=c.p;this.Jg[a]=d}else this.df=new ng(this.c),d=this.df.Nf(a,b),this.Db[a]=1,this.Jg[a]=d,this.df=l;return d};
function rg(a,b){a.Db[b]-=1;0==a.Db[b]&&(a.Jg[b].g.k(),delete a.Jg[b],delete a.Db[b])}t.Pf=function(a,b){var c=this.Kg[a+b.id];if(c){this.He[a+b.id]+=1;var d=new M(this.c);d.ea(c);d.m=c.m;d.p=c.p;this.Kg[a+b.id]=d}else this.df=new ng(this.c),d=this.df.Pf(a,b),this.He[a+b.id]=1,this.Kg[a+b.id]=d,this.df=l;return d};function sg(a,b,c){a.He[b+c.id]-=1;0==a.He[b+c.id]&&(a.Kg[b+c.id].g.k(),delete a.Kg[b+c.id],delete a.He[b+c.id])}
t.Fk=function(a,b,c){a.va=this.Nf(b,c);a.ta(a.De,a.Ee,a.Fe,l);rg(this,a.of);a.of=b};t.Gk=function(a,b,c){a.Ba=this.Pf(b,c);a.ta(a.De,a.Ee,a.Fe,l);sg(this,a.text,c);a.text=b};A("PoiManager",qg);qg.prototype.CreatePoi=qg.prototype.Hk;qg.prototype.DestroyPoi=qg.prototype.Jk;qg.prototype.ChangePoiIcon=qg.prototype.Fk;qg.prototype.ChangePoiText=qg.prototype.Gk;var tg=new Date,ug=new Date,vg=[],wg=0,xg=l,yg=l;function zg(){for(var a=0;a<vg.length;a++){var b=vg[a];b.ul&&(0<b.yk&&0<b.Mj?(b.X.width=window.innerWidth-b.yk,b.X.height=window.innerHeight-b.Mj):(b.X.width=window.innerWidth,b.X.height=window.innerHeight));Ag(b,b.X.width,b.X.height)}}
function X(){this.jd=this.hd=this.Jd=this.Kd=this.Id=l;this.Rc=o;this.height=this.width=0;this.ul=o;this.Ta=this.X=this.b=l;this.rj=0.670588;this.qj=0.921569;this.oj=this.pj=1;this.Um=this.Vm=this.Xm=this.Wm=0;this.Zg=this.Yg=20;this.Gb=new L;this.hb=new L;this.Cc=new L;this.Ag=new L;this.ja=new L;this.Qj=new L;this.fe=[];this.Ze=new Oc;this.Rm=[];this.Sm=[];vg[wg]=this;wg++;this.Xj=this.f=this.Af=l;this.Zd=1;this.Pa=this.vi=this.yf=l;this.Mj=this.yk=0}
function Bg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),l;var c=Cg(a);c===l&&b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');
return c}function Cg(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=l,d=0;d<b.length;++d){try{c=a.getContext(b[d],{antialias:o})}catch(e){}if(c)break}return c}t=X.prototype;
t.Ok=function(a,b){var c=document.getElementById(a);if(this.b=Bg(c)){this.X=c;b&&(this.Zg=this.Yg=0,c.width=window.innerWidth-this.Yg,c.height=window.innerHeight-this.Zg,this.ul=i);for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(Ag(this,this.X.width,this.X.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Ta=new hg(this.b),ig(this.Ta),
this.Af=new mg(this),this.Xj=new O(this),Q(this.Xj,kd+"nodata.png"),this.yf=new qg(this),this.vi=new kg(this),this.Pa=new Dg(this),this.Id&&this.Id(this),S(window,"resize",zg,o,this),ug=new Date,"undefined"!=typeof window&&window.zm(Eg,this.X),this.X.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return o},S(window,"unload",this.Ad,o,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
t.Ad=function(){this.jd=this.hd=this.Jd=this.Kd=this.Id=l;this.f&&(this.f.k(),this.f=l);this.Ta=this.X=this.b=l;this.Rm=[];this.Sm=[];this.vi=this.yf=this.f=this.Af=l;S(window,"resize",l,o,this)};t.Zk=function(a,b,c,d){0<=a&&1>=a&&0<=b&&1>=b&&0<=c&&1>=c&&0<=d&&1>=d&&(this.rj=a,this.qj=b,this.pj=c,this.oj=d)};t.gn=function(){return{Do:this.rj,uo:this.qj,po:this.pj,oo:this.oj}};t.Ei=function(){var a=this.b;a.clearColor(this.rj,this.qj,this.pj,this.oj);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)};
t.jl=function(a,b,c,d){this.Wm=a;this.Xm=b;this.Vm=c;this.Um=d;this.b.viewport(a,b,c,d)};t.jn=function(){return{x:this.Wm,y:this.Xm,Lo:this.Vm,vo:this.Um}};t.gl=function(a){this.Cc.ea(a);Fg(this)};t.Zi=function(a){this.hb.ea(a);Fg(this)};t.vc=function(a){this.Gb.ea(a);Fg(this)};function Fg(a){a.Ag.aa(a.hb,a.Gb);a.ja.aa(a.Cc,a.Ag);a.Qj.Qe(a.Ag);a.Qj.Ye()}t.ln=function(a){var b=new O(this);Q(b,a);this.Sm.push(b);return b};t.kn=function(a){var b=new M(this);hd(b,a);this.Rm.push(b);return b};
t.uc=function(){var a=this.Ze,b=this.hb,c=new L;c.ea(b);a.hh.push(c);a=this.Ze;b=this.Gb;c=new L;c.ea(b);a.gh.push(c);a=this.Ze;b=this.Cc;c=new L;c.ea(b);a.Re.push(c)};t.bd=function(){this.Gb.ea(this.Ze.gh.pop());this.hb.ea(this.Ze.hh.pop());this.Cc.ea(this.Ze.Re.pop());Fg(this)};t.Yi=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Gb.fh();this.hb.fh();this.Cc.Sk(0,b,0,a);Fg(this)};
t.Of=function(){0==this.Zd?H(I("owg.engine3d"),"** WARNING: not implemented"):1==this.Zd?(this.f=new gg(this),this.f.G.Lk(this.width,this.height)):2==this.Zd?H(I("owg.engine3d"),"** WARNING: not implemented"):3==this.Zd&&H(I("owg.engine3d"),"** WARNING: not implemented")};t.zd=function(a,b,c,d,e){this.Af&&this.Af.zd(a,b,c,d,e)};t.Hi=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Af&&(b[0]=this.Af.Nk(a),b[1]=32);return b};
t.be=function(a,b,c,d){var e=new L;e.Qe(c);var f=this.height-b-1,b=2*(a-0)/this.width-1,c=2*(f-0)/this.height-1,a=2*(a-0)/this.width-1,f=2*(f-0)/this.height-1,g=new K;g.t(b,c,-1);b=e.Ma(g);c=new K;c.t(a,f,1);c=e.Ma(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.n=d[2];b.md=e;b.nd=a;b.od=c;return b};
"undefined"!=typeof window&&(window.zm=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)});
function Eg(){tg=new Date;var a=tg.valueOf()-ug.valueOf();ug=tg;for(var b=0;b<vg.length;b++){var c=vg[b];if(c.f){var d=c.f,e=a;d.Hb.Ve(e);d.Pb.Ve(e);d.G.Ve(e);d.vd.Ve(e)}c.Kd&&c.Kd(a,c);c.jl(0,0,c.width,c.height);c.Ei();if(c.f){var d=c.f,e=d.Xc,f=d.Gb,g=new L;g.ea(f);e.gh.push(g);e=d.Xc;f=d.hb;g=new L;g.ea(f);e.hh.push(g);e=d.Xc;f=d.Pn;g=new L;g.ea(f);e.Re.push(g);d.Hb.ad(d.Xc);d.Pb.ad(d.Xc);d.G.ad(d.Xc);d.vd.ad(d.Xc);d.Xc.gh.pop();d.Xc.hh.pop();d.Xc.Re.pop();c.f.Wa()}c.Jd&&c.Jd(c);typeof window!=
"undefined"&&window.zm(Eg,c.X)}}function Ag(a,b,c){a.width=b;a.height=c;a.jd&&a.jd(b,c,a);a.f&&a.f.G.Lk(b,c)}t=X.prototype;t.$k=ba("Id");t.vh=ba("Kd");t.hl=ba("Jd");t.cl=function(a){if(this.ne){Qd(this.ne);this.ne=l}if(a)this.ne=S(this.X,ud,function(b){a(b.button,b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},o,this)};t.el=function(a){if(this.pe){Qd(this.pe);this.pe=l}if(a)this.pe=S(this.X,vd,function(b){a(b.button,b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},o,this)};
t.dl=function(a){if(this.oe){Qd(this.oe);this.oe=l}if(a)this.oe=S(this.X,wd,function(b){a(b.clientX-this.Yg/2,b.clientY-this.Zg/2,this)},o,this)};t.fl=function(a){if(this.hd){Qd(this.hd);this.hd=l}if(a){var b=new Mf(this.X);this.hd=S(b,wd,function(b){b.preventDefault();a(b.Ph,this)},o,this)}};t.il=ba("jd");t.al=function(a){if(xg){Qd(xg);xg=l}a&&(xg=S(window,xd,function(b){a(b.keyCode,this)},o,this))};t.bl=function(a){if(yg){Qd(yg);yg=l}a&&(yg=S(window,yd,function(b){a(b.keyCode,this)},o,this))};
t.de=function(a,b,c){this.f&&this.f.G.Qa.de(a,b,c)};t.mh=function(a,b,c,d){this.f&&this.f.G.Qa.mh(a,b,c,d)};t.$f=function(a,b){return this.f?this.f.G.gi.$f(a,b):l};t.ee=function(a,b){return this.f?this.f.G.Vh.ee(a,b):-1};t.Zf=function(a,b){return this.f?this.f.G.Hh.Zf(a,b):-1};t.$g=function(){return this.f?this.f.G.Qa.$g():0};t.$m=function(){return this.f?this.f.Hb.ce().elevation:0};t.dh=function(a,b){return this.f?this.f.G.Qa.dh(a,b):{hasvalue:o,elevation:0,lod:-1}};
t.Gi=function(a,b,c,d,e,f,g){this.Pa.Gi(a,b,c,d,e,f,g)};t.qh=function(a){this.Pa.qh(a)};t.dg=function(){this.Pa.dg()};function ze(a){if(a.fe.length<1)Gg("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.fe.pop(),c=a.fe.length;c>0?a.fe[c-1].fg():b.ll()}}A("engine3d",X);X.prototype.AltitudeAboveEllipsoid=X.prototype.$m;X.prototype.AltitudeAboveGround=X.prototype.$g;X.prototype.Clear=X.prototype.Ei;X.prototype.CreateScene=X.prototype.Of;
X.prototype.DrawText=X.prototype.zd;X.prototype.GetClearColor=X.prototype.gn;X.prototype.GetDirectionMousePos=X.prototype.be;X.prototype.GetViewport=X.prototype.jn;X.prototype.InitEngine=X.prototype.Ok;X.prototype.LoadMesh=X.prototype.kn;X.prototype.LoadTexture=X.prototype.ln;X.prototype.PickGlobe=X.prototype.de;X.prototype.PopMatrices=X.prototype.bd;X.prototype.PushMatrices=X.prototype.uc;X.prototype.SetClearColor=X.prototype.Zk;X.prototype.SetInitCallback=X.prototype.$k;
X.prototype.SetKeyDownCallback=X.prototype.al;X.prototype.SetKeyUpCallback=X.prototype.bl;X.prototype.SetModelMatrix=X.prototype.vc;X.prototype.SetMouseDownCallback=X.prototype.cl;X.prototype.SetMouseMoveCallback=X.prototype.dl;X.prototype.SetMouseUpCallback=X.prototype.el;X.prototype.SetMouseWheelCallback=X.prototype.fl;X.prototype.SetOrtho2D=X.prototype.Yi;X.prototype.SetProjectionMatrix=X.prototype.gl;X.prototype.SetRenderCallback=X.prototype.hl;X.prototype.SetResizeCallback=X.prototype.il;
X.prototype.SetTimerCallback=X.prototype.vh;X.prototype.SetViewMatrix=X.prototype.Zi;X.prototype.SetViewport=X.prototype.jl;X.prototype.GetElevationAt=X.prototype.dh;X.prototype.OnDestroy=X.prototype.Ad;function Hg(a){a=a.Jb;a.Id&&a.Id(a.id)}function Ig(a,b){var c=b.Jb;c.Kd&&c.Kd(c.id,a)}function Jg(a){a=a.Jb;a.Jd&&a.Jd(a.id)}function Kg(a,b,c,d){d=d.Jb;d.ne&&d.ne(d.id,a,b,c)}function Lg(a,b,c,d){a=d.Jb;a.pe&&a.pe(a.id)}function Mg(a,b,c){c=c.Jb;c.oe&&c.oe(c.id,a,b)}function Ng(a,b){var c=b.Jb;c.hd&&c.hd(c.id,a)}function Og(a,b,c){c=c.Jb;c.jd&&c.jd(c.id,a,b)}function Pg(a,b){var c=b.Jb;c.sj&&c.sj(c.id,a)}function Qg(a,b){var c=b.Jb;c.tj&&c.tj(c.id,a)}
function Rg(a){var b=a.Jb;b.le&&b.le(a.Jb.id)}function Sg(a){var b=a.Jb;b.me&&b.me(a.Jb.id)}function Tg(){this.name="ogContext";this.type=B;this.Kl=o;this.f=this.c=l;this.fontcolor=new Xc(1,1,1,1);this.me=this.le=this.Id=this.Kd=this.Jd=this.jd=this.tj=this.sj=this.oe=this.hd=this.pe=this.ne=l}Tg.prototype=new F;
Tg.prototype.ya=function(a){this.Id=a.cbfInit;this.jd=a.cbfResize;a.fullscreen&&(this.Kl=i);this.c=new X;this.c.Jb=this;a.canvas?this.c.Ok(a.canvas,this.Kl):H(I("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.$k(Hg);this.c.vh(Ig);this.c.hl(Jg);this.c.cl(Kg);this.c.el(Lg);this.c.dl(Mg);this.c.fl(Ng);this.c.il(Og);this.c.al(Pg);this.c.bl(Qg);this.c.Pa.le=Rg;this.c.Pa.me=Sg};Tg.prototype.zd=function(a,b,c){this.c&&this.c.zd(a,b,c,1,this.fontcolor)};
Tg.prototype.Hi=function(a){return this.c?this.c.Hi(a):l};Tg.prototype.Oa=function(){this.c.Ad();this.c=l};function Ug(){this.name="ogWorld";this.type=za}Ug.prototype=new F;Ug.prototype.ya=function(a){if(a==l)H(I("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;a.scenetype==ab?(b.Zd=1,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==bb?(b.Zd=2,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==cb?(b.Zd=3,b.Of(),b.f&&(b.f.Kf=this)):a.scenetype==db&&(b.Zd=0,b.Of(),b.f&&(b.f.Kf=this))}};
Ug.prototype.th=function(a){var b=this.parent.parent.c.f.G.Qa;switch(a){case 0:b.th(tf);break;case 1:b.th(uf)}};function Vg(){this.name="ogScene";this.type=D;this.je=this.Kf=l;this.Jh=[];this.Ic=ab}Vg.prototype=new F;t=Vg.prototype;t.ya=function(a){a==l?H(I("owg.ogScene"),"** ERROR: no options for scene creation!"):a.type&&(this.Ic=a.type)};t.Yf=function(a,b){var c={};this.parent.c.de(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};t.$f=function(a,b){var c=this.parent.c.$f(a,b);return c?c.Vn.id:-1};t.ee=function(a,b){return this.parent.c.ee(a,b)};
t.Zf=function(a,b){return this.parent.c.Zf(a,b)};function Wg(a,b){var c=E(b);if(c&&c.type==Oa){var d=Kc(c);d.ta(c.Tc,c.Sc,c.Qc);d.We(J(c.La),J(c.pitch),J(c.nc));d.yb=c}a.je=c};function Xg(){this.name="ogPOI";this.type=Ta;this.F=o;this.j=this.sa=l}Xg.prototype=new F;
Xg.prototype.ya=function(a){var b="",c=40,d=l;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new R(e[0],e[1],e[2])).la(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);a.textstyle&&(this.Pe=a.textstyle);a.iconstyle&&(this.se=a.iconstyle);this.sa=this.parent.parent.c.yf.Hk(b,this.Pe,d,this.se);this.sa.F=o;a.flagpoleColor&&(b=this.sa,d=a.flagpoleColor,b.um=d[0],b.tm=d[1],b.sm=d[2],b.rm=d[3]);a.flagpole==i?this.sa.ta(f[0],f[1],f[2],0):this.sa.ta(f[0],f[1],f[2],l);this.sa.uh(c);this.sa.Vn=this;(c=Yg(this))&&
c.Aa.push(this.sa);a.visibilityRange&&(c=this.sa,a=a.visibilityRange,c.ok=1.1920930376163766E-4*a[0],c.nk=1.1920930376163766E-4*a[1])};Xg.prototype.Oa=function(){var a=this.parent.parent,b=Yg(this);if(b)for(var c=this.sa,d=0;d<b.Aa.length;d++)if(b.Aa[d]==c){b.Aa.splice(d,1);break}a.c.yf.Jk(this.sa)};Xg.prototype.$=function(){this.F=i;this.sa.F=i};Xg.prototype.ba=function(){this.F=o;this.sa.F=o};function Yg(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.gi);return b};function Zg(){this.name="ogPOILayer";this.type=Da;this.F=o;this.Aa=[];this.se=this.Pe=l;this.Dn={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Cn={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}Zg.prototype=new F;
function $g(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")"}a.fontColor&&(b=a.fontColor,a.fontColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.strokeColor&&(b=a.strokeColor,a.strokeStyle="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.shadowColor&&(b=a.shadowColor,a.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+b[3]+")");a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Zg.prototype.ya=function(a){a.textstyle?($g(a.textstyle),this.Pe=a.textstyle):this.Pe=this.Dn;a.iconstyle?($g(a.iconstyle),this.se=a.iconstyle):this.se=this.Cn};Zg.prototype.Oa=function(){for(var a=0;a<this.Aa.length;a++)G(this.Aa[a])};Zg.prototype.$=function(){this.F=i;for(var a=0;a<this.Aa.length;a++)this.Aa[a].$()};Zg.prototype.ba=function(){this.F=o;for(var a=0;a<this.Aa.length;a++)this.Aa[a].ba()};function ah(){this.name="ogElevationLayer";this.type=Ba;this.yg=-1}ah.prototype=new F;ah.prototype.eh=function(){var a=l,b=this.parent.parent.parent.c;b.f&&b.f.G&&(a=b.f.G.Qa);return a};ah.prototype.Bi=function(a){var b=this.eh();b&&(this.yg=b.Bi(a))};ah.prototype.ya=function(a){this.Bi(a)};function Dg(a){this.c=a;this.b=a.b;this.ye=l;this.Ql=this.Rd=o;this.ih=[];this.jh=[];this.kh=[];this.lh=[];this.Nm=2E3;this.Mn=new R;this.me=this.le=l}function bh(a,b,c,d){var e=a.ye.ce(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.og=Ec*Math.acos(Math.sin(J(f[1]))*Math.sin(J(g[1]))+Math.cos(J(f[1]))*Math.cos(J(g[1]))*Math.cos(J(g[0]-f[0])));isNaN(a.og)&&(a.og=0);e=[e.longitude,e.latitude,e.elevation+a.og/4];b=[b,c,d+a.og/4];a.ih=f;a.jh=e;a.kh=b;a.lh=g;a.Ql=i}
function ue(a,b,c,d,e,f,g){a.ye=a.c.f.Hb;var j=a.ye.Sf();a.gk=j.La;a.ek=j.pitch;a.fk=j.nc;e!=l&&f!=l&&g!=l?(a.Gm=J(e),a.Em=J(f),a.Fm=J(g)):(a.Gm=a.gk,a.Em=a.ek,a.Fm=a.fk);a.jf=a.Gm-a.gk;Math.abs(a.jf)>Math.PI&&(a.jf=0<a.jf?a.jf-2*Math.PI:a.jf+2*Math.PI);a.gf=a.Em-a.ek;Math.abs(a.gf)>Math.PI&&(a.gf=0<a.gf?a.gf-2*Math.PI:a.gf+2*Math.PI);a.hf=a.Fm-a.fk;Math.abs(a.hf)>Math.PI&&(a.hf=0<a.hf?a.hf-2*Math.PI:a.hf+2*Math.PI);bh(a,b,c,d);a.le&&a.le(a.c);a.c.vh(function(b){if(a.Ql){a.Tj=a.Tj+b;b=a.Tj/a.Nm;a.w=
0.5*Math.sin(Math.PI*b-Math.PI/2)+0.5;if(b>1){a.w=1;a.dg()}var b=Math.pow(1-a.w,3)*a.ih[0]+3*a.w*Math.pow(1-a.w,2)*a.jh[0]+3*a.w*a.w*(1-a.w)*a.kh[0]+Math.pow(a.w,3)*a.lh[0],c=Math.pow(1-a.w,3)*a.ih[1]+3*a.w*Math.pow(1-a.w,2)*a.jh[1]+3*a.w*a.w*(1-a.w)*a.kh[1]+Math.pow(a.w,3)*a.lh[1],d=Math.pow(1-a.w,3)*a.ih[2]+3*a.w*Math.pow(1-a.w,2)*a.jh[2]+3*a.w*a.w*(1-a.w)*a.kh[2]+Math.pow(a.w,3)*a.lh[2];a.Mn.Mc(b,c,d);a.ye.ta(b,c,d);a.ye.We(a.gk+a.w*a.jf,a.ek+a.w*a.gf,a.fk+a.w*a.hf);a.w==1&&a.dg()}});a.w=0;a.Tj=
0;a.Rd=i}Dg.prototype.dg=function(){this.c.vh(l);this.Rd=o;this.me&&this.me(this.c)};
Dg.prototype.Gi=function(a,b,c,d,e,f,g){this.ye=this.c.f.Hb;var d=1.1920930376163766E-7*d,j=new R(a,b,c),k=[];j.la(k);var m=new L;m.ae(a,b);a=new L;a.dd(k[0],k[1],k[2]);k=new L;k.aa(a,m);m={};e!=l&&f!=l&&g!=l?(m.La=J(e),m.pitch=J(f),m.nc=J(g)):m=this.ye.Sf();a=m.pitch-Math.PI/2;d=new K(d*Math.sin(a)*Math.cos(m.La),d*Math.sin(a)*Math.sin(m.La),d*Math.cos(a));d=k.Ma(d).a;j.Mc(d[0],d[1],d[2]);d=j.H[1];k=j.H[0];j=j.H[2];j>c?ue(this,k,d,j,e,f,g):ue(this,k,d,-j,m.La,-Hc(m.pitch),m.nc)};
Dg.prototype.qh=ba("Nm");function Kf(a,b){this.c=a;this.b=a.b;this.ka=this.ub=this.V=this.L=this.r=l;this.ud=new L;this.ak=[];this.options=b;this.gc=new Xc;this.gc.t(1,1,1,1)}
Kf.prototype.sh=function(a){this.ak=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];jf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];jf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,m=[];kf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,m);m[2]=k;k=new R(m[0],m[1],m[2]);m=[];k.la(m);c.push(m[0]);c.push(m[1]);c.push(m[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new R(a[e][0],a[e][1],a[e][2]),m=[],k.la(m),c.push(m[0]),c.push(m[1]),c.push(m[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Gg=e*this.options.segmentation;this.r=new Float32Array(c);this.L=new Uint16Array(d);
this.Ib=d.length;this.Fd()};Kf.prototype.k=function(){this.V&&(this.b.deleteBuffer(this.V),this.V=l);this.ub&&(this.b.deleteBuffer(this.ub),this.V=l);this.V=this.xd=l};
Kf.prototype.ga=function(){this.ak!=l&&(this.V||this.Fd(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,o,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,o,28,12),gd(this.c.Ta,this.c.ja,this.gc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.Ib,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Kf.prototype.Fd=function(){this.V=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.V);this.b.bufferData(this.b.ARRAY_BUFFER,this.r,this.b.STATIC_DRAW);this.ub=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.ub);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.L,this.b.STATIC_DRAW)};function ch(){this.name="ogEarthPolylineObject";this.type=Za;this.options=this.Md=l}ch.prototype=new F;t=ch.prototype;t.ya=function(a){this.options=a;this.Md=new Kf(this.parent.parent.parent.c,a);this.Md.sh(a.coords)};t.Oa=function(){this.Md&&(this.Md.k(),this.Md=l,this.status=3)};t.$=function(){this.Md.F=i};t.Dd=p();t.ba=function(){this.Md.F=o};function dh(a){this.c=a;this.b=a.b;this.Qc=this.Tc=this.Sc=0;this.canvas=l;this.p=this.m=0;this.K=this.q=l;this.pm=-1}t=dh.prototype;
t.eg=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Fa.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,l);this.Fa.Cb=i};t.ta=function(a,b,c){var d=[];(new R(a,b,c)).la(d);this.q.bg(d[0],d[1],d[2],0,0,0)};
t.ga=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.q&&jd(this.q);this.c.uc();var a=new L;a.Bd(1.1920930376163766E-7*this.scale,1.1920930376163766E-7*this.scale,1);this.c.vc(a);this.q&&this.q.ga(o,0,0,l,l);this.c.bd();this.c.b.disable(this.c.b.BLEND)};t.uh=ba("scale");
t.Yf=function(a,b){if(this.q)var c=this.c.be(a,b,this.c.ja,i),d=this.q.Ed(c.x,c.y,c.n,c.md,c.nd,c.od);if(d){var e=c=0,f=d.Zb,g=d.Jc,j=1-f-g;0==d.Om?(c=f*-this.m/2+g*this.m/2+j*-this.m/2/(f+g+j)+this.m/2,e=f*this.p/2+g*this.p/2+j*-this.p/2/(f+g+j)+this.p/2):1==d.Om&&(c=f*this.m/2+g*this.m/2+j*-this.m/2/(f+g+j)+this.m/2,e=f*this.p/2+g*-this.p/2+j*-this.p/2/(f+g+j)+this.p/2);c/=this.m;e/=this.p;d={};d.id=this.pm;d.x=c;d.y=e;return d}return l};t.k=function(){this.q&&(this.q.k(),this.Fa.k())};function eh(){this.name="ogBillboard";this.type=Ua;this.status=fb;this.j=-1;this.F=o}eh.prototype=new F;t=eh.prototype;
t.ya=function(a){if(a==l)H(I("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==l)H(I("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=D)H(I("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.ec=new dh(this.parent.parent.c);this.ec.pm=this.id;var b=this.ec,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.K=b.canvas.getContext("2d");b.m=b.K.canvas.width;b.p=b.K.canvas.height;
break;case "[object HTMLVideoElement]":b.m=c.videoWidth,b.p=c.videoHeight}b.Fa=new O(b.c);b.Fa.g=b.b.createTexture();b.q=new M(b.c);b.q.ac(b.Fa);b.pc=b.m;b.oc=b.p;c=[];c.push(-b.m/2,b.p/2,0,0,0);c.push(-b.m/2,-b.p/2,0,0,1/b.oc*b.p);c.push(b.m/2,-b.p/2,0,1/b.pc*b.m,1/b.oc*b.p);c.push(b.m/2,b.p/2,0,1/b.pc*b.m,0);dd(b.q,c);ed(b.q,[0,1,2,0,2,3],"TRIANGLES");b.q.Q=[-b.m/2,-b.p/2,0];b.q.ha=[b.m/2,b.p/2,0];b.q.m=b.m;b.q.p=b.p;b.eg();a=a.position;this.ec.ta(a[0],a[1],a[2]);fh(this).Ai(this.ec)}};
t.Oa=function(){this.ec&&(fh(this).Vi(this.ec),this.ec.k(),this.status=3)};t.ga=function(){this.ec.ga()};function fh(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.Hh);return b}t.$=function(){this.F=i;this.ec.F=i};t.ba=function(){this.F=o;this.ec.F=o};function gh(){this.name="ogMeshObject";this.type=La;this.Eb=[];this.Me=[]}gh.prototype=new F;t=gh.prototype;t.ya=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=W(Ma,this,this.options);this.Eb.push(c);this.Me.push(c.q)}};t.Oa=function(){for(var a=0;a<this.Eb.length;a++)G(this.Eb[a]);this.Me=this.Eb=l};t.$=function(){for(var a=0;a<this.Eb.length;a++)this.Eb[a].$()};
t.ge=function(a,b,c,d){for(var e=0;e<this.Eb.length;e++)this.Eb[e].ge(a,b,c,d)};t.Dd=function(a,b,c,d,e,f){for(var g=0;g<this.Eb.length;g++)this.Eb[g].Dd(a,b,c,d,e,f)};t.cg=function(a,b,c,d){for(var e=0;e<this.Eb.length;e++)this.Eb[e].cg(a,b,c,d)};t.ba=function(){for(var a=0;a<this.Eb.length;a++)this.Eb[a].ba()};function hh(){this.ym=xa()}var ih=new hh;hh.prototype.set=ba("ym");hh.prototype.reset=function(){this.set(xa())};hh.prototype.get=da("ym");function jh(a){this.bk=a||"";this.fo=ih}jh.prototype.ao=i;jh.prototype.co=i;jh.prototype.bo=i;jh.prototype.Bm=o;function kh(a){return 10>a?"0"+a:""+a}function lh(a,b){var c=(a.Im-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function mh(a){jh.call(this,a)}ya(mh,jh);mh.prototype.Bm=i;function nh(a){this.xe=a||100;this.ke=[]}t=nh.prototype;t.Eg=0;t.add=function(a){this.ke[this.Eg]=a;this.Eg=(this.Eg+1)%this.xe};t.get=function(a){a=oh(this,a);return this.ke[a]};t.set=function(a,b){a=oh(this,a);this.ke[a]=b};t.re=function(){return this.ke.length};t.clear=function(){this.Eg=this.ke.length=0};t.Kj=function(){for(var a=this.re(),b=[],c=this.re()-this.re();c<a;c++)b[c]=this.get(c);return b};t.Wh=function(){for(var a=[],b=this.re(),c=0;c<b;c++)a[c]=c;return a};
function oh(a,b){b>=a.ke.length&&aa(Error("Out of bounds exception"));return a.ke.length<a.xe?b:(a.Eg+Number(b))%a.xe};function ph(a,b){this.Od=a||"";this.bk=b||"";this.xf=[];this.ii=new nh(qh);this.Yn=wa(this.tn,this);this.Kn=new mh(this.bk);this.Jn={};if(i!=this.Ol){this.Ol=i;Cc();var c=Bc,d=this.Yn;c.vg||(c.vg=[]);c.vg.push(d)}this.Qh="1"==rh(this.Od,"enabled");w.setInterval(wa(this.$n,this),7500)}var qh=500;t=ph.prototype;t.Ym="LOGGING";t.Gn=o;t.Ka=l;t.zk=o;t.Ol=o;t.vl=l;t.Oj=xa();t.Rc=function(){this.Qh&&sh(this)};function th(a,b){a.Qh=b;a.Qh&&sh(a);uh(a,"enabled",b?"1":"0")}
function vh(a){return!!a.Ka&&!a.Ka.closed}t.yn=function(){this.ii.clear();vh(this)&&this.Bk()};
t.tn=function(a){if(!this.Jn[a.Ul]){var b=this.Kn,c;switch(a.Bc.value){case rc.value:c="dbg-sh";break;case sc.value:c="dbg-sev";break;case tc.value:c="dbg-w";break;case uc.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.bk," ");if(b.ao){var e=new Date(a.Im);d.push("[",kh(e.getFullYear()-2E3)+kh(e.getMonth()+1)+kh(e.getDate())+" "+kh(e.getHours())+":"+kh(e.getMinutes())+":"+kh(e.getSeconds())+"."+kh(Math.floor(e.getMilliseconds()/10)),"] ")}b.co&&d.push("[",pb(lh(a,b.fo.get())),"s] ");b.bo&&
d.push("[",jb(a.Ul),"] ");d.push('<span class="',c,'">',ib(pb(jb(a.$l))));b.Bm&&a.zj&&d.push("<br>",ib(pb(a.yj||"")));d.push("</span><br>");b=d.join("");this.Qh?(sh(this),this.ii.add(b),wh(this,b)):this.ii.add(b);this.Gn&&a.Bc.value>=sc.value&&th(this,i)}};function wh(a,b){a.xf.push(b);w.clearTimeout(a.vl);750<xa()-a.Oj?a.Ak():a.vl=w.setTimeout(wa(a.Ak,a),250)}
t.Ak=function(){this.Oj=xa();if(vh(this)){var a=this.Ka.document.body,a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);this.Ka.document.write(this.xf.join(""));this.xf.length=0;a&&this.Ka.scrollTo(0,1E6)}};function xh(a){for(var b=a.ii.Kj(),c=0;c<b.length;c++)wh(a,b[c])}
function sh(a){if(!vh(a)&&!a.zk){var b=rh(a.Od,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.zk=i;a.Ka=window.open("",zb?a.Od.replace(/[\s\-\.\,]/g,"_"):a.Od,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);!a.Ka&&!a.eo&&(alert("Logger popup was blocked"),a.eo=i);a.zk=o;a.Ka&&a.Bk()}}t.Xh=s("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
t.Bk=function(){vh(this)||(this.Ka.document.open(),wh(this,"<style>"+this.Xh()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Ym+"<br><small>Logger: "+this.Od+"</small></div><hr>"),xh(this))};function uh(a,b,c){b+=a.Od;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(xa()+2592E6)).toUTCString()}
function rh(a,b,c){var a=b+a,b=""+document.cookie,d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}t.$n=function(){vh(this)&&uh(this,"dbg",(this.Ka.screenX||this.Ka.screenLeft||0)+","+(this.Ka.screenY||this.Ka.screenTop||0)+","+(this.Ka.outerWidth||800)+","+(this.Ka.outerHeight||500))};function yh(a,b){var c;c=a.className;c=la(c)&&c.match(/\S+/g)||[];for(var d=bc(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Yb(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e};var zh=!zb||Pb();!Ab&&!zb||zb&&Pb()||Ab&&Nb("1.9.1");zb&&Nb("9");function Ah(a,b){Qb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Bh?a.setAttribute(Bh[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Bh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Ch(a,b,c){function d(c){c&&b.appendChild(la(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];ha(f)&&!(na(f)&&0<f.nodeType)?Zb(Dh(f)?ac(f):f,d):d(f)}}function Dh(a){if(a&&"number"==typeof a.length){if(na(a))return"function"==typeof a.item||"string"==typeof a.item;if(ma(a))return"function"==typeof a.item}return o}function Eh(a){this.pg=a||w.document||document}function Fh(a,b){return la(b)?a.pg.getElementById(b):b}
Eh.prototype.ef=function(a,b,c){var d=this.pg,e=arguments,f=e[0],g=e[1];if(!zh&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',jb(g.name),'"');if(g.type){f.push(' type="',jb(g.type),'"');var j={};Tb(j,g);g=j;delete g.type}f.push(">");f=f.join("")}f=d.createElement(f);g&&(la(g)?f.className=g:ga(g)?yh.apply(l,[f].concat(g)):Ah(f,g));2<e.length&&Ch(d,f,e);return f};Eh.prototype.createElement=function(a){return this.pg.createElement(a)};Eh.prototype.createTextNode=function(a){return this.pg.createTextNode(a)};
Eh.prototype.appendChild=function(a,b){a.appendChild(b)};function Gh(a,b){if(Hh){var c=Ih(),d;for(d in c){var e=d.replace("fancywindow.sel.",""),e=I(e),f=e.Bc,g=window.localStorage.getItem(d).toString();(!f||f.toString()!=g)&&e.Pg(yc(g))}}ph.call(this,a,b)}ya(Gh,ph);var Hh;a:{try{Hh=!!window.localStorage.getItem;break a}catch(Jh){}Hh=o}t=Gh.prototype;
t.Ak=function(){this.Oj=xa();if(vh(this)){for(var a=Fh(this.Ob,"log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.xf.length;c++){var d=this.Ob.ef("div","logmsg");d.innerHTML=this.xf[c];a.appendChild(d)}this.xf.length=0;this.Am();b&&(a.scrollTop=a.scrollHeight)}};
t.Bk=function(){if(vh(this)){var a=this.Ka.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Od+"</title><style>"+this.Xh()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Od+"</b></p><p>"+this.Ym+'</p><span id="clearbutton">clear</span><span id="exitbutton">exit</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(zb?a.body:this.Ka).onresize=wa(this.Am,this);this.Ob=new Eh(a);Fh(this.Ob,"openbutton").onclick=wa(this.Wn,this);Fh(this.Ob,"closebutton").onclick=wa(this.zn,this);Fh(this.Ob,"clearbutton").onclick=wa(this.yn,this);Fh(this.Ob,"exitbutton").onclick=wa(this.Hn,this);xh(this)}};
t.Wn=function(){var a=Fh(this.Ob,"optionsarea");a.innerHTML="";for(var b=Kh(),c=this.Ob,d=0;d<b.length;d++){var e=I(b[d]),e=c.ef("div",{},Lh(this,"sel"+b[d],e.Bc?e.Bc.name:"INHERIT"),c.ef("span",{},b[d]||"(root)"));a.appendChild(e)}Fh(this.Ob,"options").style.display="block";return o};
function Lh(a,b,c){for(var a=a.Ob,b=a.ef("select",{id:b}),d=0;d<wc.length;d++){var e=wc[d],f=a.ef("option",{},e.name);c==e.name&&(f.selected=i);b.appendChild(f)}b.appendChild(a.ef("option",{selected:"INHERIT"==c},"INHERIT"));return b}
t.zn=function(){Fh(this.Ob,"options").style.display="none";for(var a=Kh(),b=this.Ob,c=0;c<a.length;c++){var d=I(a[c]),e=Fh(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;"INHERIT"==e?d.Pg(l):d.Pg(yc(e))}if(Hh){a=Kh();b=Ih();for(c=0;c<a.length;c++)d="fancywindow.sel."+a[c],e=I(a[c]).Bc,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name)}return o};
t.Am=function(){var a=this.Ob,b=Fh(a,"log"),c=Fh(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.pg.body.offsetHeight-c.offsetHeight-(zb?4:0)+"px"};t.Hn=function(){th(this,o);this.Ka&&this.Ka.close()};t.Xh=function(){return Gh.Le.Xh.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};
function Ih(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);d!=l&&0==d.lastIndexOf("fancywindow.sel.",0)&&(a[d]=i)}return a}function Kh(){var a=Rb(Ac);a.sort();return a};function Mh(a){this.y=this.x=l;this.index=-1;0==arguments.length?this.y=this.x=0:2==arguments.length?(this.x=arguments[0],this.y=arguments[1]):3==arguments.length?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.rg=[]}t=Mh.prototype;t.set=function(a,b){this.x=a;this.y=b};t.add=function(a){this.x+=a.x;this.y+=a.y};t.sub=function(a){this.x-=a.x;this.y-=a.y};t.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
t.h=function(a){return this.x==a.x&&this.y==a.y};function Nh(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function Oh(a){this.eb=this.za=l;2==arguments.length?arguments[0].y>arguments[1].y?(this.eb=arguments[0],this.za=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.eb=arguments[0],this.za=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.za=arguments[0],this.eb=arguments[1]):(this.za=arguments[0],this.eb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.eb.rg.push(this)}
function Ph(a,b,c){this.d=[l,l,l];this.xa=[l,l,l];this.Ml=o;this.na=[o,o,o];this.ra=[o,o,o];3==arguments.length&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}t=Ph.prototype;t.Nc=function(a){return this.d[a]};t.Fi=function(a,b){for(var c=i,d=0;d<arguments.length;++d)c=c&&(arguments[d].h(this.d[0])||arguments[d].h(this.d[1])||arguments[d].h(this.d[2]));return c};t.Pk=function(){0!=arguments.length&&(this.Ml=arguments[0]);return this.Ml};
t.sc=function(a){var b;if(3==arguments.length){var c=arguments[0],d=arguments[1];b=arguments[2];c.h(this.d[2])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[2])?this.xa[0]=b:c.h(this.d[0])&&d.h(this.d[2])||c.h(this.d[2])&&d.h(this.d[0])?this.xa[1]=b:c.h(this.d[0])&&d.h(this.d[1])||c.h(this.d[1])&&d.h(this.d[0])?this.xa[2]=b:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else 1==arguments.length?(b=arguments[0],b.Fi(this.d[1],this.d[2])?(this.xa[0]=b,b.sc(this.d[1],this.d[2],this)):b.Fi(this.d[0],
this.d[2])?(this.xa[1]=b,b.sc(this.d[0],this.d[2],this)):b.Fi(this.d[0],this.d[1])&&(this.xa[2]=b,b.sc(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function Qh(a){a.xa[0]=l;a.xa[1]=l;a.xa[2]=l}function Rh(a){a.ra[0]=o;a.ra[1]=o;a.ra[2]=o}function Sh(a,b){return b.h(a.d[0])?a.d[2]:b.h(a.d[1])?a.d[0]:b.h(a.d[2])?a.d[1]:l}function Th(a,b){return b.h(a.d[0])?a.d[1]:b.h(a.d[1])?a.d[2]:b.h(a.d[2])?a.d[0]:l}
function Uh(a,b){return b.h(a.d[0])?a.xa[1]:b.h(a.d[1])?a.xa[2]:a.xa[0]}function Vh(a,b){return b.h(a.d[0])?a.xa[2]:b.h(a.d[1])?a.xa[0]:a.xa[1]}function Wh(a,b){return b.h(a.d[0])?a.na[1]:b.h(a.d[1])?a.na[2]:a.na[0]}function Xh(a,b){return b.h(a.d[0])?a.na[2]:b.h(a.d[1])?a.na[0]:a.na[1]}function Yh(a,b,c){b.h(a.d[0])?a.na[1]=c:b.h(a.d[1])?a.na[2]=c:a.na[0]=c}function Zh(a,b,c){b.h(a.d[0])?a.na[2]=c:b.h(a.d[1])?a.na[0]=c:a.na[1]=c}
function $h(a,b){return b.h(a.d[0])?a.ra[1]:b.h(a.d[1])?a.ra[2]:a.ra[0]}function ai(a,b){return b.h(a.d[0])?a.ra[2]:b.h(a.d[1])?a.ra[0]:a.ra[1]}function bi(a,b,c){b.h(a.d[0])?a.ra[1]=c:b.h(a.d[1])?a.ra[2]=c:a.ra[0]=c}function ci(a,b,c){b.h(a.d[0])?a.ra[2]=c:b.h(a.d[1])?a.ra[0]=c:a.ra[1]=c}function di(a,b){return b.h(a.d[0])?a.xa[0]:b.h(a.d[1])?a.xa[1]:a.xa[2]}
t.Ki=function(a){if(1==arguments.length)this.Ki(this.d[0],arguments[0]);else if(2==arguments.length){var b=arguments[0],c=arguments[1];b.h(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=c):b.h(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=c):b.h(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=c):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function ei(a,b,c){if(b.h(a.d[0])){if(c.h(a.d[1]))return 2;if(c.h(a.d[2]))return 1}else if(b.h(a.d[1])){if(c.h(a.d[2]))return 0;if(c.h(a.d[0]))return 2}else if(b.h(a.d[2])){if(c.h(a.d[0]))return 1;if(c.h(a.d[1]))return 0}return-1}
t.Uf=function(a){if(1==arguments.length)"number"==typeof arguments[0]?this.na[arguments[0]]=i:this.Uf(arguments[0].za,arguments[0].eb);else if(2==arguments.length){var b=arguments[0],c=arguments[1];if(c.h(this.d[0])&&b.h(this.d[1])||c.h(this.d[1])&&b.h(this.d[0]))this.na[2]=i;else if(c.h(this.d[0])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[0]))this.na[1]=i;else if(c.h(this.d[1])&&b.h(this.d[2])||c.h(this.d[2])&&b.h(this.d[1]))this.na[0]=i}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var fi=3*Math.PI/4,gi=Math.PI/2;function hi(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return-1.0E-16<a&&1.0E-16>a?0:0<a?-1:1}function ii(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;return 1.0E-16>=f*(b.y-d)-(b.x-e)*a?o:1.0E-16>=(c.x-e)*a-f*(c.y-d)?o:i}
function ji(a){this.s=this.next=this.Wd=this.e=l;this.value=0;1==arguments.length?(this.e=arguments[0],this.value=this.e.x):2==arguments.length?(this.e=arguments[0],this.Wd=arguments[1],this.value=this.e.x):alert("Invalid poly2tri.Node constructor call!")}function ki(a,b){this.wg=a;this.jk=b;this.Og=a}ki.prototype.head=da("wg");ki.prototype.Mi=function(a){var b=this.Og;if(a<b.value)for(;(b=b.s)!=l;){if(a>=b.value)return this.Og=b}else for(;(b=b.next)!=l;)if(a<b.value)return this.Og=b.s;return l};
function li(){this.Vb=this.xc=this.sd=l;this.width=0;this.Pj=o}li.prototype.Ei=function(){this.Vb=this.xc=this.sd=l;this.width=0;this.Pj=o};function mi(){this.na=l;this.right=o}function ni(a){this.Pm=[];this.hc=[];this.d=a;this.rg=[];this.jk=this.wg=this.ug=l;this.P=new li;this.qg=new mi;oi(this,this.d)}ni.prototype.head=da("wg");function oi(a,b){for(var c=0;c<b.length;++c)a.rg.push(new Oh(b[c],b[(c+1)%b.length]))}ni.prototype.Nc=function(a){return this.d[a]};ni.prototype.Mi=function(a){return this.ug.Mi(a.x)};
function pi(a,b){for(var c=0;3>c;++c)if(b.xa[c]==l){var d;a:{d=a.ug;var e=Sh(b,b.Nc(c)),f=e.x,g=d.Og,j=g.e.x;if(f==j)if(e.h(g.s.e))g=g.s;else if(e.h(g.next.e))g=g.next;else{if(!e.h(g.e)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=l;break a}}else if(f<j)for(;(g=g.s)!=l&&!e.h(g.e););else for(;(g=g.next)!=l&&!e.h(g.e););g!=l&&(d.Og=g);d=g}d!=l&&(d.Wd=b)}}function qi(a,b){if(b!=l&&!b.Pk()){b.Pk(i);a.Pm.push(b);for(var c=0;3>c;++c)b.na[c]||qi(a,b.xa[c])}}
function ri(a){var b;if(3==arguments.length){b=arguments[0];var c=arguments[1],d=arguments[2];b.qg.na=c;b.qg.right=c.za.x>c.eb.x;if(!si(d.Wd,c.za,c.eb)){var e=b;if(e.qg.right)for(var f=d;f.next.e.x<c.za.x;)-1==hi(c.eb,f.next.e,c.za)?ti(e,c,f):f=f.next;else for(f=d;f.s.e.x>c.za.x;)1==hi(c.eb,f.s.e,c.za)?ui(e,c,f):f=f.s;ri(b,c.za,c.eb,d.Wd,c.eb)}}else if(5==arguments.length){if(b=arguments[0],c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],!si(e,c,d)){var g=Th(e,f),g=hi(d,g,c);if(0==g)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var j=Sh(e,f),j=hi(d,j,c);0==j?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):g==j?(e=1==g?Vh(e,f):Uh(e,f),ri(b,c,d,e,f)):vi(b,c,d,e,f)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function si(a,b,c){var d=ei(a,b,c);return-1!=d?(a.Uf(d),a=a.xa[d],a!=l&&a.Uf(b,c),i):o}function wi(a,b){var c=new Ph(b.s.e,b.e,b.next.e);c.sc(b.s.Wd);c.sc(b.Wd);a.hc.push(c);b.s.next=b.next;b.next.s=b.s;xi(a,c)||pi(a,c)}
function yi(a){var b=a.next.e.x-a.e.x,c=a.next.e.y-a.e.y,d=a.s.e.x-a.e.x,a=a.s.e.y-a.e.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function xi(a,b){for(var c=0;3>c;++c)if(!b.ra[c]){var d=b.xa[c];if(d!=l){var e=b.Nc(c),f=Sh(d,Sh(b,e)),g=f.h(d.d[0])?0:f.h(d.d[1])?1:f.h(d.d[2])?2:-1;if(d.na[g]||d.ra[g])b.na[c]=d.na[g];else{var j;var k=Th(b,e),m=Sh(b,e);j=e.x-f.x;var n=e.y-f.y,r=k.x-f.x,k=k.y-f.y,q=j*k-r*n;if(0>=q)j=o;else{var u=m.x-f.x,m=m.y-f.y,v=u*n-j*m;j=0>=v?o:0<(j*j+n*n)*(r*m-u*k)+(r*r+k*k)*v+(u*u+m*m)*q}if(j)return b.ra[c]=i,d.ra[g]=i,zi(b,e,d,f),(e=!xi(a,b))&&pi(a,b),(e=!xi(a,d))&&pi(a,d),b.ra[c]=o,d.ra[g]=o,i}}}return o}
function zi(a,b,c,d){var e,f,g,j;e=Vh(a,b);f=Uh(a,b);g=Vh(c,d);j=Uh(c,d);var k,m,n,r;k=Xh(a,b);m=Wh(a,b);n=Xh(c,d);r=Wh(c,d);var q,u,v,y;q=ai(a,b);u=$h(a,b);v=ai(c,d);y=$h(c,d);a.Ki(b,d);c.Ki(d,b);ci(c,b,q);bi(a,b,u);ci(a,d,v);bi(c,d,y);Zh(c,b,k);Yh(a,b,m);Zh(a,d,n);Yh(c,d,r);Qh(a);Qh(c);e&&c.sc(e);f&&a.sc(f);g&&a.sc(g);j&&c.sc(j);a.sc(c)}
function Ai(a,b){if(!(a.P.width>(a.P.Pj?a.P.sd.e.y-b.e.y:a.P.Vb.e.y-b.e.y))){wi(a,b);var c;if(!(b.s==a.P.sd&&b.next==a.P.Vb)){if(b.s==a.P.sd){c=hi(b.e,b.next.e,b.next.next.e);if(1==c)return;b=b.next}else if(b.next==a.P.Vb){c=hi(b.e,b.s.e,b.s.s.e);if(-1==c)return;b=b.s}else b=b.s.e.y<b.next.e.y?b.s:b.next;Ai(a,b)}}}function ti(a,b,c){c.e.x<b.za.x&&(-1==hi(c.e,c.next.e,c.next.next.e)?Bi(a,b,c):(Ci(a,b,c),ti(a,b,c)))}
function Bi(a,b,c){wi(a,c.next);c.next.e!=b.za&&-1==hi(b.eb,c.next.e,b.za)&&-1==hi(c.e,c.next.e,c.next.next.e)&&Bi(a,b,c)}function Ci(a,b,c){-1==hi(c.next.e,c.next.next.e,c.next.next.next.e)?Bi(a,b,c.next):-1==hi(b.eb,c.next.next.e,b.za)&&Ci(a,b,c.next)}function ui(a,b,c){c.e.x>b.za.x&&(1==hi(c.e,c.s.e,c.s.s.e)?Di(a,b,c):(Ei(a,b,c),ui(a,b,c)))}function Ei(a,b,c){1==hi(c.s.e,c.s.s.e,c.s.s.s.e)?Di(a,b,c.s):1==hi(b.eb,c.s.s.e,b.za)&&Ei(a,b,c.s)}
function Di(a,b,c){wi(a,c.s);c.s.e!=b.za&&1==hi(b.eb,c.s.e,b.za)&&1==hi(c.e,c.s.e,c.s.s.e)&&Di(a,b,c)}
function vi(a,b,c,d,e){var f=di(d,e);if(f==l)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Sh(f,Sh(d,e));ii(e,Th(d,e),Sh(d,e),g)?(zi(d,e,f,g),pi(a,d),pi(a,f),e==c&&g==b?c==a.qg.na.eb&&b==a.qg.na.za&&(d.Uf(b,c),f.Uf(b,c),xi(a,d),xi(a,f)):(-1==hi(c,g,b)?(g=ei(f,e,g),f.ra[g]=i,xi(a,f),Rh(f)):(g=ei(d,e,g),d.ra[g]=i,xi(a,d),Rh(d),d=f),vi(a,b,c,d,e))):(g=Fi(b,c,f,g),Gi(a,b,c,d,f,g),ri(a,b,c,d,e))}}
function Fi(a,b,c,d){a=hi(b,d,a);if(1==a)return Th(c,d);if(-1==a)return Sh(c,d);alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function Gi(a,b,c,d,e,f){var g=di(e,f);g==l?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Sh(g,Sh(e,f)),ii(c,Th(d,c),Sh(d,c),e)?vi(a,c,e,g,e):(e=Fi(b,c,g,e),Gi(a,b,c,d,g,e)))};function Hi(){this.name="ogGeometry";this.type=Ka;this.rd="";this.options=this.yc=this.kd=l;this.Me=[];this.ue=this.wa=-1;this.color=[1,1,1,1];this.gc=[1,1,1,1];this.Sl=10;this.Zl=-1E3;this.Yl=9E3}Hi.prototype=new F;t=Hi.prototype;t.ya=function(a){this.options=a;a.url&&"GeoJSON"==a.type&&Ii(this,a.url)};t.Oa=function(){Ji(this).oh(this.wa)};function Ji(a){var b=l,a=a.parent.parent.c;a.f&&a.f.G&&(b=a.f.G.lk);return b}t.$=p();t.ba=p();
t.dj=function(){4==this.N.readyState&&(404==this.N.status?this.yc&&this.yc(this.id):this.Lc(Yc(this.N.responseText)))};
function Ki(a,b,c,d){var e={Hg:o,og:0,Qb:[0,0,0],Xn:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],m=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],n=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],r=g*k-j*j;1.0E-14>r?(e.Hg=i,f=0,g=j>k?m/j:n/k):(f=(j*n-k*m)/r,g=(g*n-j*m)/r);e.Qb=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Xn=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function Li(a,b,c,d,e,f,g,j,k,m,n){m.push(b[0]);m.push(b[1]);m.push(b[2]);b=a;a++;m.push(f[0]);m.push(f[1]);m.push(f[2]);f=a;a++;m.push(e[0]);m.push(e[1]);m.push(e[2]);e=a;a++;m.push(k[0]);m.push(k[1]);m.push(k[2]);k=a;a++;m.push(c[0]);m.push(c[1]);m.push(c[2]);c=a;a++;m.push(g[0]);m.push(g[1]);m.push(g[2]);g=a;a++;m.push(d[0]);m.push(d[1]);m.push(d[2]);d=a;a++;m.push(j[0]);m.push(j[1]);m.push(j[2]);j=a;a++;n.push(c);n.push(g);n.push(d);n.push(g);n.push(j);n.push(d);n.push(b);n.push(e);n.push(f);
n.push(f);n.push(e);n.push(k);n.push(b);n.push(f);n.push(c);n.push(f);n.push(g);n.push(c);n.push(e);n.push(d);n.push(j);n.push(k);n.push(e);n.push(j);n.push(b);n.push(c);n.push(e);n.push(c);n.push(d);n.push(e);n.push(f);n.push(j);n.push(g);n.push(f);n.push(k);n.push(j);return a}
function Mi(a,b,c){var d={VertexSemantic:"",Vertices:l,IndexSemantic:"",Indices:l,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new M(a.parent.parent.c);b.Lc(d,l,l,b);4==a.color.length?b.yd.t(a.color[0],a.color[1],a.color[2],a.color[3]):3==a.color.length&&b.yd.t(a.color[0],a.color[1],a.color[2],1);return b}
t.Lc=function(a){Ni("CreateFromJSONObject");var b=o;if("FeatureCollection"==a.type&&(Ni("[GeoJSON Parser] type = FeatureCollection"),x(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(x(a[d].type)&&"Feature"==a[d].type&&x(a[d].properties)&&x(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;x(e.color)&&(this.color=e.color);x(e.highlightcolor)&&(this.gc=e.highlightcolor);x(e.linewidth)&&(this.Sl=e.linewidth);x(e.minelv)&&(this.Zl=e.minelv);x(e.maxelv)&&(this.Yl=e.maxelv);if(x(f.type))if(e=
f.type,"LineString"==e)x(f.coordinates&&ga(f.coordinates))&&(b=Oi(this,f.coordinates));else if("MultiLineString"==e){if(x(f.coordinates&&ga(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)Oi(this,f[e])&&(b=i)}}else if("Polygon"==e){if(x(f.coordinates&&ga(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new R;var k=b.length;if(0==k)b=o;else{if(1<=k){for(var m=0;m<k;m++)if(0==m)for(var n=0;n<b[m].length;n++)g.push(new Mh(b[m][n][0],b[m][n][1],e)),j.push([b[m][n][0],b[m][n][1]]),e++;else{for(var r=
[],n=0;n<b[m].length;n++)r.push(new Mh(b[m][n][0],b[m][n][1]),e),j.push([b[m][n][0],b[m][n][1]]),e++;f.push(r)}b=new ni(g);e=h;for(e in f)for(k in g=b,j=f[e],oi(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;m=e.d[0].y;k=e.d[0].y;n=h;for(n in e.d)if(r=e.d[n],r.x>g&&(g=r.x),r.x<j&&(j=r.x),r.y>m&&(m=r.y),r.y<k)k=r.y;m=0.3*(m-k);e.wg=new Mh(g+0.3*(g-j),k-m);e.jk=new Mh(j-m,k-m);e.d.sort(Nh);e=f;k=j=g=h;k=new Ph(e.d[0],e.jk,e.wg);e.hc.push(k);g=new ji(k.Nc(1),k);j=new ji(k.Nc(0),k);k=new ji(k.Nc(2));
e.ug=new ki(g,k);g.next=j;j.next=k;j.s=g;k.s=j;e=f;for(g=1;g<e.d.length;++g){var j=e.Nc(g),k=e,m=j,n=k.Mi(m),r=k,q=m,u=n,v=new Ph(q,u.e,u.next.e);v.sc(u.Wd);r.hc.push(v);q=new ji(q);q.next=u.next;q.s=u;u.next.s=q;u.next=q;xi(r,v)||pi(r,v);r=q;m.x<=n.e.x+1.0E-16&&wi(k,n);m=r;n=m.next;for(u=h;n.next!=l;){u=yi(n);if(u>gi||u<-gi)break;wi(k,n);n=n.next}for(n=m.s;n.s!=l;){u=yi(n);if(u>gi||u<-gi)break;wi(k,n);n=n.s}if(m.next!=l&&m.next.next!=l&&(u=Math.atan2(m.e.y-m.next.next.e.y,m.e.x-m.next.next.e.x),
u<fi)){k.P.sd=-1==hi(m.e,m.next.e,m.next.next.e)?m.next.next:m.next;for(k.P.xc=k.P.sd;k.P.xc.next!=l&&k.P.xc.e.y>=k.P.xc.next.e.y;)k.P.xc=k.P.xc.next;if(k.P.xc!=k.P.sd){for(k.P.Vb=k.P.xc;k.P.Vb.next!=l&&k.P.Vb.e.y<k.P.Vb.next.e.y;)k.P.Vb=k.P.Vb.next;k.P.Vb!=k.P.xc&&(k.P.width=k.P.Vb.e.x-k.P.sd.e.x,k.P.Pj=k.P.sd.e.y>k.P.Vb.e.y,Ai(k,k.P.xc))}}k=r;for(m=0;m<j.rg.length;++m)ri(e,j.rg[m],k)}e=f.ug.head().next.Wd;for(g=f.ug.head().next.e;!Wh(e,g);)e=Vh(e,g);qi(f,e);b=b.Pm;f=[];for(e=0;e<b.length;e++)g=
b[e].Nc(1).index,j=b[e].Nc(2).index,f.push(b[e].Nc(0).index),f.push(g),f.push(j)}b=i}}}else"MultiPolygon"==e?Gg("MultiPolygon is not yet supported"):"Point"==e?Gg("Point is not yet supported"):"MultiPoint"==e&&Gg("MultiPoint is not yet supported")}b&&(this.wa=Ji(this).Ck(this.Me))};function Ii(a,b){b==l?alert("invalid json-url"):(a.rd=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.rd,i),a.N.onreadystatechange=function(){a.dj()},a.N.send())}
function Oi(a,b){var c=new R,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(1<g)for(var j=0;j<g;j++){var k=b[j][0],m=b[j][1];c.t(k,m,a.Yl);c.la(d);c.t(k,m,a.Zl);c.la(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return o;var c=[],d=[],g=5.960465188081883E-8*a.Sl,e=0,n,r,q,u,v,y,z,ia,ja,P,ca,T,U,V,oa,pa,qa;if(4==f.length){j=f[0];n=f[1];var k=f[2],m=f[3],C=k[0]-j[0],Y=k[1]-j[1],ka=k[2]-j[2],Z=n[0]-j[0],$=n[1]-j[1],N=n[2]-j[2],f=Y*N-ka*$,e=ka*Z-C*N;r=C*$-Y*Z;C=g/Math.sqrt(f*f+e*e+r*r);f*=C;e*=C;
r*=C;u=[j[0]+f,j[1]+e,j[2]+r];v=[n[0]+f,n[1]+e,n[2]+r];y=[k[0]+f,k[1]+e,k[2]+r];z=[m[0]+f,m[1]+e,m[2]+r];ia=[j[0]-f,j[1]-e,j[2]-r];ja=[n[0]-f,n[1]-e,n[2]-r];P=[k[0]-f,k[1]-e,k[2]-r];ca=[m[0]-f,m[1]-e,m[2]-r];Li(0,u,ia,P,y,v,ja,ca,z,d,c);a.Me.push(Mi(a,d,c))}else if(6<=f.length){j=f[0];n=f[1];k=f[2];m=f[3];r=f[4];q=f[5];C=k[0]-j[0];Y=k[1]-j[1];ka=k[2]-j[2];Z=n[0]-j[0];$=n[1]-j[1];N=n[2]-j[2];T=Y*N-ka*$;U=ka*Z-C*N;V=C*$-Y*Z;C=g/Math.sqrt(T*T+U*U+V*V);T*=C;U*=C;V*=C;u=[j[0]+T,j[1]+U,j[2]+V];v=[n[0]+
T,n[1]+U,n[2]+V];ia=[j[0]-T,j[1]-U,j[2]-V];ja=[n[0]-T,n[1]-U,n[2]-V];for(j=4;j<f.length;j+=2)r=f[j],q=f[j+1],C=r[0]-k[0],Y=r[1]-k[1],ka=r[2]-k[2],Z=m[0]-k[0],$=m[1]-k[1],N=m[2]-k[2],oa=Y*N-ka*$,pa=ka*Z-C*N,qa=C*$-Y*Z,C=g/Math.sqrt(oa*oa+pa*pa+qa*qa),oa*=C,pa*=C,qa*=C,Z=m[0]-n[0],$=m[1]-n[1],N=m[2]-n[2],z=Math.sqrt(Z*Z+$*$+N*N),Z/=z,$/=z,N/=z,C=m[0]-q[0],Y=m[1]-q[1],ka=m[2]-q[2],z=Math.sqrt(C*C+Y*Y+ka*ka),C/=z,Y/=z,P=[q[0]+oa,q[1]+pa,q[2]+qa],n=[q[0]-oa,q[1]-pa,q[2]-qa],ca=[r[0]+oa,r[1]+pa,r[2]+qa],
y=[r[0]-oa,r[1]-pa,r[2]-qa],z=Ki([v[0],v[1],v[2]],[v[0]+Z,v[1]+$,v[2]+N],[P[0],P[1],P[2]],[P[0]+C,P[1]+Y,P[2]+N]),P=Ki([ja[0],ja[1],ja[2]],[ja[0]+Z,ja[1]+$,ja[2]+N],[n[0],n[1],P[2]],[n[0]+C,n[1]+Y,n[2]+N]),n=Ki([u[0],u[1],u[2]],[u[0]+Z,u[1]+$,u[2]+N],[ca[0],ca[1],ca[2]],[ca[0]+C,ca[1]+Y,ca[2]+N]),C=Ki([ia[0],ia[1],ia[2]],[ia[0]+Z,ia[1]+$,ia[2]+N],[y[0],y[1],y[2]],[y[0]+C,y[1]+Y,y[2]+N]),!z.Hg&&!P.Hg&&!n.Hg&&!C.Hg?(z=[z.Qb[0],z.Qb[1],z.Qb[2]],ca=[P.Qb[0],P.Qb[1],P.Qb[2]],y=[n.Qb[0],n.Qb[1],n.Qb[2]],
P=[C.Qb[0],C.Qb[1],C.Qb[2]]):(z=[m[0]+T,m[1]+U,m[2]+V],ca=[m[0]-T,m[1]-U,m[2]-V],y=[k[0]+T,k[1]+U,k[2]+V],P=[k[0]-T,k[1]-U,k[2]-V]),e=Li(e,u,ia,P,y,v,ja,ca,z,d,c),T=oa,U=pa,V=qa,n=m,k=r,m=q,v=z,ja=ca,u=y,ia=P;f=[q[0]+T,q[1]+U,q[2]+V];g=[q[0]-T,q[1]-U,q[2]-V];j=[r[0]+T,r[1]+U,r[2]+V];k=[r[0]-T,r[1]-U,r[2]-V];Li(e,y,P,k,j,z,ca,g,f,d,c);a.Me.push(Mi(a,d,c))}else return o;return i};function Pi(){this.name="ogAoeImageLayer";this.type=Wa;this.F=o;this.$a=[]}Pi.prototype=new F;t=Pi.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.$a.length;a++){for(var b=a;b<this.$a.length;b++)this.$a[a].wa-=1;G(this.$a[a])}};t.$=function(){this.F=i;for(var a=0;a<this.$a.length;a++)this.$a[a].$()};t.ba=function(){this.F=o;for(var a=0;a<this.$a.length;a++)this.$a[a].ba()};t.zi=function(a){this.$a.push(a);a.ue=this.id};
t.Ui=function(a){for(var b=0;b<this.$a.length;b++)if(this.$a[b]==a){for(var c=b+1;c<this.$a.length;c++)this.$a[c].wa-=1;G(this.$a[b]);this.$a.splice(b,1)}};function Qi(){this.name="ogVectorLayer";this.type=Ga;this.F=o;this.da=[]}Qi.prototype=new F;t=Qi.prototype;t.ya=p();t.oh=function(a){for(var b=0;b<this.da.length;b++)this.da[b]==a&&(G(this.da[b]),this.da.splice(b,1))};t.Oa=function(){Ri(this)};t.$=function(){this.F=i;for(var a=0;a<this.da.length;a++)this.da[a].$()};t.ba=function(){this.F=o;for(var a=0;a<this.da.length;a++)this.da[a].ba()};function Ri(a){for(var b=0;b<a.da.length;b++){for(var c=b;c<a.da.length;c++)a.da[b].wa-=1;G(a.da[b])}}
t.Ck=function(a){this.da.push(a);a.ue=this.id};t.oh=function(a){for(var b=0;b<this.da.length;b++)if(this.da[b]==a){for(var c=b+1;c<this.da.length;c++)this.da[c].wa-=1;G(this.da[b]);this.da.splice(b,1)}};function Si(){this.name="ogImageLayer";this.type=Aa;this.yg=-1}Si.prototype=new F;Si.prototype.eh=function(){var a=l,b=this.parent.parent.parent.c;b.f&&b.f.G&&(a=b.f.G.Qa);return a};Si.prototype.Ci=function(a){var b=this.eh();b&&(this.yg=b.Ci(a))};Si.prototype.nh=function(){var a=this.eh();a&&-1!=this.yg&&a.nh(this.yg)};Si.prototype.ya=function(a){this.Ci(a)};function Ti(){this.name="ogBillboardLayer";this.type=Va;this.F=o;this.Da=[]}Ti.prototype=new F;t=Ti.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.Da.length;a++)G(this.Da[a])};t.$=function(){this.F=i;for(var a=0;a<this.Da.length;a++)this.Da[a].$()};t.ba=function(){this.F=o;for(var a=0;a<this.Da.length;a++)this.Da[a].ba()};t.Vi=function(a){for(var b=0;b<this.Da.length;b++)this.Da[b]==a&&(G(this.Da[b]),this.Da.splice(b,1))};t.Ai=function(a){this.Da.push(a)};function Ui(){this.name="ogPointSpriteObject";this.type=Ya;this.xd=this.options=this.Gc=l;this.ei=this.Oh=0}Ui.prototype=new F;t=Ui.prototype;t.ya=function(a){this.options=a;this.Gc=new nd(this.parent.parent.parent.c);a.Vertices&&this.Gc.sh(a.Vertices);a.PointUrl&&(Vi(this,a.PointUrl),this.Tn=a.NumberOfPoints,this.Gc.xi=this.Tn);this.Gc.ph(a.Center[0],a.Center[1],a.Center[2])};t.Oa=function(){this.Gc&&(this.Gc.k(),this.Gc=l,this.status=3)};t.$=function(){this.Gc.F=i};t.Dd=p();
t.ba=function(){this.Gc.F=o};function Vi(a,b){b==l?alert("invalid xyzurl"):(a.no=b,a.N=new window.XMLHttpRequest,a.N.open("GET",a.no,i),a.N.onreadystatechange=function(){4==a.N.readyState&&(404==a.N.status?alert("xyz-file not found..."):Wi(a))},a.N.onprogress=function(){Wi(a)},a.N.send(),a.Oh=0,a.ei=0)}
function Wi(a){var b=a.N.responseText;a.Oh=b.lastIndexOf("\n");for(var b=b.substr(a.ei,a.Oh-a.ei-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.Gc.sh(c);a.ei=a.Oh};function Xi(){this.name="ogGeometryLayer";this.type=Ea;this.F=o;this.Y=[]}Xi.prototype=new F;t=Xi.prototype;t.ya=p();t.Oa=function(){for(var a=0;a<this.Y.length;a++){for(var b=a;b<this.Y.length;b++)this.Y[a].wa-=1;G(this.Y[a])}};t.$=function(){this.F=i;for(var a=0;a<this.Y.length;a++)this.Y[a].$()};t.ba=function(){this.F=o;for(var a=0;a<this.Y.length;a++)this.Y[a].ba()};t.$d=function(a){this.Y.push(a);a.ue=this.id};
t.Wi=function(a){for(var b=0;b<this.Y.length;b++)if(this.Y[b]==a){for(var c=b+1;c<this.Y.length;c++)this.Y[c].wa-=1;G(this.Y[b]);this.Y.splice(b,1)}};function Yi(){this.name="ogSurface";this.type=Ma;this.elevation=this.latitude=this.longitude=0;this.status=fb;this.q=l}Yi.prototype=new F;t=Yi.prototype;t.Dd=function(a,b,c,d,e,f){this.q.ph(a,b,c,d,e,f)};
t.cg=function(a,b,c,d){var e=this.q,f=new R(a,b,c),c=Array(3);f.la(c);f=new L;f.ae(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new L;c.Cd(a);a=new L;a.Cd([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Ye();b=new L;b.bh(d[0],d[1],d[2],d[3]);b.Ye();f=new L;f.aa(a,b);d=new L;d.aa(a,f);b=new L;b.Cd([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Ye();a=new L;a.aa(b,d);d=new L;
d.aa(c,a);c=new L;c.Bd(1.1920930376163766E-7,1.1920930376163766E-7,1.1920930376163766E-7);a=new L;a.aa(d,c);e.ka=a;id(e)};
t.ya=function(a){if(a==l)H(I("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==l)H(I("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=La)H(I("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.q=new M(this.parent.parent.parent.parent.c);this.q.F=o;this.q.Un=this.id;var b=this;this.q.Lc(a.jsonobject,function(){0!=b.longitude&&0!=b.latitude&&b.Dd(b.longitude,b.latitude,b.elevation);b.status=eb;b.J&&b.J(b.id)},function(){b.status=
3;b.I&&b.I(b.id)});this.rd=a.url;this.q.Tm=a.jsonobject.VisibilityDistance?1.1920930376163766E-7*a.jsonobject.VisibilityDistance:0.005960465188081883}a.longitude&&a.latitude&&a.elevation&&(this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation)}};t.Oa=function(){this.q&&(this.q.k(),this.q=l,this.status=3)};t.ba=function(){this.q&&(this.q.F=o)};t.$=function(){this.q&&(this.q.F=i)};t.ge=function(a,b,c,d){this.q&&this.q.ge(a,b,c,d)};var Zi=-1;function W(a,b,c){var d=l;a==B?d=new Tg:a==D?d=new Vg:a==za?d=new Ug:a==Aa?d=new Si:a==Ba?d=new ah:a!=Ca&&(a==Da?d=new Zg:a==Ea?d=new Xi:a!=Fa&&a!=Ha&&(a==Ia?d=new Dc:a==Ta?d=new Xg:a!=Ja&&(a==Ka?d=new Gf:a==La?d=new gh:a==Ma?d=new Yi:a==Oa?d=new Jc:a!=Pa&&a!=Qa&&a!=Ra&&a!=Sa&&(a==Ua?d=new eh:a==Va?d=new Ti:a==Wa?d=new Pi:a==Xa?d=new ve:a==Ya?d=new Ui:a==Za?d=new ch:a==Ga?d=new Qi:a==Na&&(d=new Hi)))));d!=l&&(Zi++,d.id=Zi,d.parent=b,gb.push(d),d.ya(c));return d}A("_CreateObject",W);
A("ogGetObjectType",function(a){return(a=E(a))?a.type:$a});A("ogGetObjectName",function(a){return(a=E(a))?a.name:""});A("ogGetNumObjects",function(){return gb.length});A("ogGetObjectAt",function(a){a=0>a||a>gb.length-1?l:gb[a];return a==l?-1:a.id});A("ogGetParentObject",function(a){return(a=E(a))&&a.parent?a.parent.id:-1});A("ogSetObjectName",function(a,b){var c=E(a);c&&(c.name=b)});
A("ogGetObjectByName",function(a){a:{for(var b=0;b<gb.length;b++)if(gb[b].name==a){a=gb[b];break a}a=l}return a?a.id:-1});A("ogGetObjectStatus",function(a){return(a=E(a))?a.status:3});A("ogOnLoad",function(a,b){var c=E(a);c&&(c.status==eb?b(a):c.J=b)});A("ogOnFailure",function(a,b){var c=E(a);c&&(3==c.status?b(a):c.I=b)});function $i(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=W(B,l,a);return a!=l?a.id:-1}A("ogCreateContext",$i);
A("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?i:o;f.canvas=a;return $i(f,c,d,e)});A("ogDestroyContext",function(a){(a=E(a))&&a.type==B&&G(a)});A("ogGetWidth",function(a){return(a=E(a))&&a.type==B?a.c?a.c.width:0:0});A("ogGetHeight",function(a){return(a=E(a))&&a.type==B?a.c?a.c.height:0:0});A("ogGetScene",function(a){return(a=E(a))&&a.type==B&&a.f?a.f.id:-1});A("ogSetBackgroundColor",function(a,b,c,d,e){(a=E(a))&&a.type==B&&a.c&&a.c.Zk(b,c,d,e)});
A("ogSetTextColor",function(a,b,c,d){(a=E(a))&&a.type==B&&a.fontcolor.t(b,c,d,1)});A("ogDrawText",function(a,b,c,d){(a=E(a))&&a.type==B&&a.zd(b,c,d)});A("ogGetTextSize",function(a,b){var c=E(a);if(c&&c.type==B&&(c=c.Hi(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});A("ogSetMouseDownFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.ne=b)});A("ogSetMouseUpFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.pe=b)});A("ogSetMouseMoveFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.oe=b)});
A("ogSetMouseWheelFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.hd=b)});A("ogSetKeyDownFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.sj=b)});A("ogSetKeyUpFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.tj=b)});A("ogSetResizeFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.jd=b)});A("ogSetRenderFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.Jd=b)});A("ogSetTimerFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.Kd=b)});
A("ogSetRenderGeometryFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.so=b)});A("ogSetBeginRenderFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.qo=b)});A("ogSetEndRenderFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.ro=b)});A("ogSetFlyToStartedFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.le=b)});A("ogSetInPositionFunction",function(a,b){var c=E(a);c&&c.type==B&&(c.me=b)});A("ogSetNumRenderPasses",function(a,b){var c=E(a);c&&c.type==B&&(c.Bo=b)});A("ogExec",p());
A("ogSetArtworkDirectory",function(a){kd=a});function aj(a,b){var c=E(a);if(c&&c.type==B){var d={};d.type=b;if(b==ab||b==bb||b==cb||b==db)return d=W(D,c,d),c.f=d,d.id;H(I("owg.og"),"** WARNING: wrong scene type");return-1}H(I("owg.og"),"** WARNING: context is not valid");return-1}A("ogCreateScene",aj);A("ogGetContext",function(a){if((a=E(a))&&a.type==D)if(a=a.parent)return a.id;return-1});A("ogGetWorld",function(a){if((a=E(a))&&a.type==D)if(a=a.Kf)return a.id;return-1});
A("ogPickGlobe",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==ab?a.Yf(b,c):[o,0,0,0,0,0,0]});A("ogToCartesian",function(a,b,c,d){if((a=E(a))&&a.type==D&&a.Ic==ab){var e=[];(new R(b,c,d)).la(e)}return e||l});A("ogToWGS84",function(a,b,c,d){if((a=E(a))&&a.type==D&&a.Ic==ab){var e=new R;e.Mc(b,c,d);e=[e.H[0],e.H[1],e.H[2]]}return e||l});A("ogCreateCamera",function(a){if((a=E(a))&&a.type==D){var b=W(Oa,a,l);a.Jh.push(b);return b.id}return-1});A("ogDestroyCamera",function(a){(a=E(a))&&a.type==Oa&&G(a)});
A("ogSetPosition",function(a,b,c,d){(a=E(a))&&a.type==Oa&&a.ta(b,c,d)});function bj(a){return(a=E(a))&&a.type==D?(a=a.je,Lc(a),a.ce()):l}A("ogGetPosition",bj);function cj(a,b,c,d){return(a=E(a))&&a.type==Oa?(360<b&&(b-=360),0>b&&(b=360+b),a.We(b,c,d)):l}A("ogSetOrientation",cj);A("ogSetOrientationFromQuaternion",function(a,b,c,d,e){return(a=E(a))&&a.type==Oa?a.rh(b,c,d,e):l});function dj(a){return(a=E(a))&&a.type==D?(a=a.je,Lc(a),a.Sf()):l}A("ogGetOrientation",dj);
function ej(a){return(a=E(a))&&a.type==D?a.je.id:-1}A("ogGetActiveCamera",ej);A("ogSetActiveCamera",function(a){(a=E(a))&&a.type==Oa&&Wg(a.parent,a.id)});A("ogGetNumCameras",function(a){if((a=E(a))&&a.type==D)return a.Jh.length});A("ogGetCameraAt",function(a,b){var c=E(a);return c&&c.type==D?c.Jh[b].id:-1});
A("ogLookAt",function(a,b,c,d){var e=ej(a);Lc(E(e));var f=bj(a),g=[];(new R(f.longitude,f.latitude,f.elevation)).la(g);var j=new K(g[0],g[1],g[2]),k=[];(new R(b,c,d)).la(k);b=(new K(k[0],k[1],k[2])).Mf();b.$i(j);j=new L;j.ae(f.longitude,f.latitude);f=new L;f.dd(g[0],g[1],g[2]);g=new L;g.aa(f,j);g.Ye();g=g.Ma(b);g.tc();g=g.a;f=g[0];j=g[1];b=g[2];g=57.29577951308232*Math.acos(f/Math.sqrt(1-b*b));0>j&&0<f&&(g=360-g);0>j&&0>f&&(g=360-g);f=-(90-57.29577951308232*Math.acos(b));-0.9>b&&(g=180+g,f=-f);a=
dj(a);cj(e,g,f,a.roll)});function fj(a){if((a=E(a))&&a.type==D){var b={};b.scenetype=a.Ic;b=W(za,a,b);a.Kf=b;return b.id}return-1}A("ogCreateWorld",fj);A("ogCreateGlobe",function(a){var b=aj(a,ab),a=fj(b),b=E(b),c=W(Oa,b,l);Lc(c);Wg(b,c.id);b.Jh.push(c);return a});A("ogSetNorthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==za)a.parent.parent.c.f.G.Qa.Ae=[b,c,d]});A("ogSetSouthpoleColor",function(a,b,c,d){if((a=E(a))&&a.type==za)a.parent.parent.c.f.G.Qa.Ke=[b,c,d]});
A("ogSetRenderQuality",function(a,b){var c=E(a);c&&c.type==za&&(c=c.parent.parent.c.f.G.Qa,0<b&&3>=b&&(c.xm=b))});A("ogSetRenderEffect",function(a,b,c){(a=E(a))&&a.type==za&&a.th(b,c)});A("ogLoadTextureAsync",function(a,b){var c=E(a);if(c&&c.type==D){var d={};d.url=b;return W(Ia,c,d).id}return-1});A("ogDestroyTexture",function(a){(a=E(a))&&a.type==Ia&&G(a)});A("ogBlitTexture",function(a,b,c,d){(a=E(a))&&a.type==Ia&&a.B(b,c,d)});
A("ogAddImageLayer",function(a,b){var c=E(a);return c&&c.type==za?W(Aa,c,b).id:-1});A("ogRemoveImageLayer",function(a){if((a=E(a))&&a.type==Aa)a.nh(),G(a)});A("ogAddElevationLayer",function(a,b){var c=E(a);return c&&c.type==za?W(Ba,c,b).id:-1});A("ogRemoveElevationLayer",function(a){if((a=E(a))&&a.type==Ba)a.nh(),G(a)});A("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;return(a=E(a))&&a.type==za?W(Da,a,e).id:-1});
A("ogRemovePOILayer",function(a){(a=E(a))&&a.type==Da&&G(a)});A("ogHidePOILayer",function(a){(a=E(a))&&a.type==Da&&a.$()});A("ogShowPOILayer",function(a){(a=E(a))&&a.type==Da&&a.ba()});A("ogAddVectorLayer",function(a,b){var c=E(a);return c&&c.type==za?W(Ga,c,b).id:-1});A("ogRemoveVectorLayer",function(a){if((a=E(a))&&a.type==Ga)Ri(a),G(a)});A("ogLoadVectorAsync",function(a,b){var c=E(a);if(c&&c.type==Ga){var d=W(Na,c.parent.parent,{url:b,type:"GeoJSON"});c.da.push(d);d.Ko=c;c=d.id}else c=-1;return c});
A("ogDestroyVector",function(a){if((a=E(a))&&a.type==Na)if(a.j){var b=a.j;b&&b.type==Ga&&b.oh(a)}else G(a);return-1});A("ogCreatePOI",function(a,b){var c=E(a);if(c&&c.type==Da){b.textstyle=c.Pe;b.iconstyle=c.se;var d=W(Ta,c.parent.parent,b);c.Aa.push(d);d.Co=c;c=d.id}else c=-1;return c});A("ogDestroyPOI",function(a){if((a=E(a))&&a.type==Ta)if(a.j){var b=a.j;if(b&&b.type==Da)for(var c=0;c<b.Aa.length;c++)b.Aa[c]==a&&(G(b.Aa[c]),b.Aa.splice(c,1))}else G(a);return-1});
A("ogChangePOIText",function(a,b){var c=E(a);if(c&&c.type==Ta){var d=c.parent.parent;c.Pe&&d.c.yf.Gk(c.sa,b,c.Pe)}});A("ogChangePOIIcon",function(a,b){var c=E(a);if(c&&c.type==Ta){var d=c.parent.parent;c.se&&d.c.yf.Fk(c.sa,b,c.se)}});A("ogChangePOISize",function(a,b){var c=E(a);c&&c.type==Ta&&c.sa.uh(b)});A("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=E(a))&&a.type==Ta){var e=[];(new R(b,c,d)).la(e);b=e[0];c=e[1];e=e[2];a.sa.Be?a.sa.ta(b,c,e,0):a.sa.ta(b,c,e,l)}});
A("ogChangePOIPosition",function(a,b,c,d){(a=E(a))&&a.type==Ta&&(a.sa.Be?a.sa.ta(b,c,d,0):a.sa.ta(b,c,d,l))});A("ogHidePOI",function(a){(a=E(a))&&a.type==Ta&&a.$()});A("ogShowPOI",function(a){(a=E(a))&&a.type==Ta&&a.ba()});A("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=E(a))&&a.type==Ta)a.sa.$j=new Xc(b,c,d,e)});A("ogPickPOI",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==ab?a.$f(b,c):-1});
A("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==za?W(Ea,d,c).id:-1});A("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==za?W(Wa,d,c).id:-1});A("ogCreateAoeImage",function(a,b){var c=E(a);if(c&&c.type==Wa){var d=W(Xa,c.parent.parent,b);c.zi(d);return d.id}return-1});A("ogDestroyAoeImage",function(a){if((a=E(a))&&a.type==Xa){var b=E(a.ue);b&&b.type==Wa&&b.Ui(a)}return-1});
A("ogHideGeometryLayer",function(a){(a=E(a))&&a.type==Ea&&a.$()});A("ogShowGeometryLayer",function(a){(a=E(a))&&a.type==Ea&&a.ba()});A("ogRemoveGeometryLayer",function(a){(a=E(a))&&a.type==Ea&&G(a);return-1});A("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=E(a);return d&&d.type==Ea?(c=W(Ka,d.parent.parent,c),d.$d(c),c.id):-1});A("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=E(a);return d&&d.type==Ea?(c=W(Ka,d.parent.parent,c),d.$d(c),c.id):-1});
A("ogDestroyGeometry",function(a){if((a=E(a))&&a.type==Ka){var b=E(a.ue);b&&b.type==Ea&&b.Wi(a)}return-1});A("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){return(a=E(a))&&a.type==Ka?a.Dd(b,c,d,e,f,g):-1});A("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){return(a=E(a))&&a.type==Ka?a.cg(b,c,d,e):-1});A("ogGetNumMeshes",function(a){return(a=E(a))&&a.type==Ka?a.vb.length:-1});A("ogGetMeshAt",function(a,b){var c=E(a);return c&&c.type==Ka?c.vb[b].id:-1});
A("ogHideGeometry",function(a){(a=E(a))&&a.type==Ka&&a.$()});A("ogShowGeometry",function(a){(a=E(a))&&a.type==Ka&&a.ba()});A("ogHighlightGeometry",function(a,b,c,d,e){(a=E(a))&&a.type==Ka&&a.ge(b,c,d,e)});A("ogPickGeometry",function(a,b,c){if((a=E(a))&&a.type==D&&a.Ic==ab)if(b=a.ee(b,c),b=E(b))return b.parent.parent.id;return-1});A("ogCreatePolylineWGS84",function(a,b,c){return(a=E(a))&&a.type==Ea?(c.coords=b,c.type="EarthPolyline",b=W(Ka,a.parent.parent,c),a.$d(b),b.id):-1});
A("ogGetSurfaceAt",function(a,b){var c=E(a);return c&&c.type==La?c.Eb[b].id:-1});A("ogHideMesh",function(a){(a=E(a))&&a.type==La&&a.$()});A("ogShowMesh",function(a){(a=E(a))&&a.type==La&&a.ba()});A("ogPickMesh",function(a,b,c){if((a=E(a))&&a.type==D&&a.Ic==ab)if(b=a.ee(b,c),b=E(b))return b.parent.id;return-1});A("ogHideSurface",function(a){(a=E(a))&&a.type==Ma&&a.$()});A("ogShowSurface",function(a){(a=E(a))&&a.type==Ma&&a.ba()});
A("ogPickSurface",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==ab?a.ee(b,c):-1});A("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=E(a);return d&&d.type==za?W(Va,d,c).id:-1});A("ogRemoveBillboardLayer",function(a){(a=E(a))&&a.type==Va&&G(a)});A("ogHideBillboardLayer",function(a){(a=E(a))&&a.type==Va&&a.$()});A("ogShowBillboardLayer",function(a){(a=E(a))&&a.type==Va&&a.ba()});
A("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=E(a))&&a.type==Va){var f={};f.canvas=b;f.position=[c,d,e];b=W(Ua,a.parent.parent,f);a.Ai(b);b.j=a.id;return b.id}return-1});A("ogDestroyBillboard",function(a){if((a=E(a))&&a.type==Ua)if(a.j){var b=E(a.j);b&&b.type==Va&&b.Vi(a)}else G(a);return-1});A("ogHideBillboard",function(a){(a=E(a))&&a.type==Ua&&a.$();return-1});A("ogShowBillboard",function(a){(a=E(a))&&a.type==Ua&&a.ba();return-1});
A("ogPickBillboard",function(a,b,c){return(a=E(a))&&a.type==D&&a.Ic==ab?a.Zf(b,c):-1});A("ogUpdateBillboard",function(a,b){var c=E(a);c&&c.type==Ua?(c.ec.canvas=b,c.ec.eg(),c=h):c=-1;return c});A("ogFlyTo",function(a,b,c,d,e,f,g){(a=E(a).parent.c)&&ue(a.Pa,b,c,d,e,f,g)});A("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=E(a).parent.c)&&a.Gi(b,c,d,e,f,g,j)});A("ogSetFlightDuration",function(a,b){var c=E(a).parent.c;c&&c.qh(b)});A("ogStopFlyTo",function(a){(a=E(a).parent.c)&&a.dg()});
A("ogLockNavigation",function(a){(a=E(a).parent.c)&&a.f.Hb.Ni(i)});A("ogUnlockNavigation",function(a){(a=E(a).parent.c)&&a.f.Hb.Ni(o)});A("ogSetCanvasSizeOffset",function(a,b,c){a=E(a).parent.c;a.yk=b;a.Mj=c;zg()});A("ogDebug",function(){var a=new Gh;th(a,i);a.Rc()});A("ogWarning",function(a){H(I("warning"),a)});function Gg(a){I("error").log(sc,a,h)}A("ogError",Gg);function Ni(a){I("message").info(a)}A("ogLog",Ni);
A("ogWorldToWindow",function(a,b,c,d){var e;if((a=E(a))&&a.type==D&&a.Ic==ab)e=a.parent.c,a=new L,a.aa(e.Cc,e.Ag),b=new K(b,c,d),d=a.Ma(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor(0.5*(b+1)*e.width+0.5),c=Math.floor(0.5*(c+1)*e.height-1+0.5),e=[b,c,0.5*(d+1)];return e||l});A("ogCalcDistanceWGS84",function(a,b,c,d){a=Ec*Math.acos(Math.sin(J(b))*Math.sin(J(d))+Math.cos(J(b))*Math.cos(J(d))*Math.cos(J(c-a)));isNaN(a)&&(a=0);return a});
